function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequirecc54;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequirecc54=o);var i=o("eEuqc"),s=o("kRZ7z"),u=o("gmEQj"),a=o("20LS2"),l=(s=o("kRZ7z"),o("gzr8q")),d=o("iGyOD"),c=o("hvEnP"),h=o("j2K3b"),f=o("cgPpQ"),m=o("9z1G1"),g=o("lVQul"),p=o("kBSVF");p=o("kBSVF");function F(e,t){return function(){void 0===S&&"undefined"!=typeof document&&(S=document.implementation.createDocument("","",null));return S}().createElementNS(e,t)}function y(e){return"documentElement"in e}function _(e){return(new DOMParser).parseFromString(e,"application/xml")}function x(e,t){return function(r,n,o){const i=n[n.length-1].node;let s=e;void 0===s&&(s=o);return F(void 0!==t?t:i.namespaceURI,s)}}x();function w(e,t,r){let n,o;for(r=void 0!==r?r:{},n=0,o=e.length;n<o;++n)r[e[n]]=t;return r}function v(e,t,r,n,o){return n.push(e),function(e,t,r,n){let o;for(o=t.firstElementChild;o;o=o.nextElementSibling){const t=e[o.namespaceURI];if(void 0!==t){const e=t[o.localName];void 0!==e&&e.call(n,o,r)}}}(t,r,n,o),n.pop()}let b,S;class D extends m.default{constructor(){super(),this.xmlSerializer_=(void 0===b&&"undefined"!=typeof XMLSerializer&&(b=new XMLSerializer),b)}getType(){return"xml"}readFeature(e,t){if(e){if("string"==typeof e){const r=_(e);return this.readFeatureFromDocument(r,t)}return y(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}return null}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(e){if("string"==typeof e){const r=_(e);return this.readFeaturesFromDocument(r,t)}return y(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}return[]}readFeaturesFromDocument(e,t){const r=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,p.extend)(r,this.readFeaturesFromNode(n,t));return r}readFeaturesFromNode(e,t){return(0,g.abstract)()}readGeometry(e,t){if(e){if("string"==typeof e){const r=_(e);return this.readGeometryFromDocument(r,t)}return y(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}return null}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(e){if("string"==typeof e){const t=_(e);return this.readProjectionFromDocument(t)}return y(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}return null}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}var N=D,z=(p=o("kBSVF"),l=o("gzr8q"),o("kKEgb"));m=o("9z1G1");const G=[null],I=w(G,{nd:function(e,t){t[t.length-1].ndrefs.push(e.getAttribute("ref"))},tag:k}),R=w(G,{node:function(e,t){const r=t[0],n=t[t.length-1],o=e.getAttribute("id"),i=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))];n.nodes[o]=i;const s=v({tags:{}},E,e,t);if(!(0,z.isEmpty)(s.tags)){const e=new(0,h.default)(i);(0,m.transformGeometryWithOptions)(e,!1,r);const t=new(0,d.default)(e);void 0!==o&&t.setId(o),t.setProperties(s.tags,!0),n.features.push(t)}},way:function(e,t){const r=v({id:e.getAttribute("id"),ndrefs:[],tags:{}},I,e,t);t[t.length-1].ways.push(r)}});const E=w(G,{tag:k});function k(e,t){t[t.length-1].tags[e.getAttribute("k")]=e.getAttribute("v")}var O=class extends N{constructor(){super(),this.dataProjection=(0,l.get)("EPSG:4326")}readFeaturesFromNode(e,t){if(t=this.getReadOptions(e,t),"osm"==e.localName){const r=v({nodes:{},ways:[],features:[]},R,e,[t]);for(let e=0;e<r.ways.length;e++){const n=r.ways[e],o=[];for(let e=0,t=n.ndrefs.length;e<t;e++){const t=r.nodes[n.ndrefs[e]];(0,p.extend)(o,t)}let i;i=n.ndrefs[0]==n.ndrefs[n.ndrefs.length-1]?new(0,f.default)(o,"XY",[o.length]):new(0,c.default)(o,"XY"),(0,m.transformGeometryWithOptions)(i,!1,t);const s=new(0,d.default)(i);void 0!==n.id&&s.setId(n.id),s.setProperties(n.tags,!0),r.features.push(s)}if(r.features)return r.features}return[]}},T=class extends a.default{constructor(e){(e=e||{}).loader=function(e,t,r){return this._loaderFn(e,t,r)},e.attributions||(e.attributions=s.default.ATTRIBUTION),e.strategy||(e.strategy=u.bbox),super(e),this._url=e.url||"https://overpass-api.de/api/interpreter",this._maxResolution=e.maxResolution||100,this._types={node:!1!==e.node,way:!1!==e.way,rel:!0===e.rel},this._filter=e.filter}_loaderFn(e,t,r){if(!(t>this._maxResolution)){var n=this,o=(0,l.transformExtent)(e,r,"EPSG:4326"),i="[bbox:"+(o=o[1]+","+o[0]+","+o[3]+","+o[2])+"][out:xml][timeout:25];";for(var s in i+="(",this._types)if(this._types[s]){i+=s;for(var u,a=0;u=this._filter[a];a++)i+="["+u+"]";i+=";"}i+=");out;>;out skel qt;";var d=new XMLHttpRequest;d.open("POST",this._url,!0),d.onload=function(){for(var e,t=(new O).readFeatures(this.responseText,{featureProjection:r}),o=[],i=0;e=t[i];i++)n.hasFeature(e)||o.push(e);n.addFeatures(o)},d.onerror=function(){console.log(arguments)},d.send("data="+i)}}hasFeature(e){for(var t,r=e.getGeometry().getFirstCoordinate(),n=e.getId(),o=this.getFeaturesInExtent([r[0]-.1,r[1]-.1,r[0]+.1,r[1]+.1]),i=0;t=o[i];i++)if(n===t.getId())return!0;return!1}},P=o("cEuiU"),j=(u=o("gmEQj"),o("5NhYx")),A=(o("4lFOe"),o("2zf1Y")),M=o("d5AAH");o("eJ4LZ");class Z{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=L,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new Z({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=L,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function L(e){return e.getGeometry()}var q=Z,U=o("h1ihb"),C=o("ej7yC");M=o("d5AAH"),A=o("2zf1Y");o("e1DCI"),o("5JlsX");var V=o("1B70O"),X=o("jZUWm");var Y=o("6yJ0x"),B=o("5VeMq");(0,X.default)(e('<div> <h2> Day 8: data - OpenStreetMap </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.source.Overpass.html" target="_new"> ol-ext Overpass source </a> to display OSM features on a map (highway=bus_stop). </p> </div>'));const H=new(0,i.default)({source:new(0,s.default)});V.default.addLayer(H),V.default.getView().setZoom(14),V.default.getView().setCenter([452391,6156107]);const Q=new T({filter:["highway=bus_stop"],strategy:(0,u.tile)((0,j.createXYZ)({minZoom:11,maxZoom:11,tileSize:512}))});let J;(0,C.default)((e=>{J=new q({image:new(0,U.default)({glyph:"maki-bus",radius:18,displacement:[0,0],fontSize:.8,color:"#00AAFF",fill:new(0,A.default)({color:"#00AAFF"}),stroke:new(0,M.default)({color:[255,255,255],width:2})})})})),V.default.addLayer(new(0,P.default)({name:"OSM",source:Q,maxResolution:20,style:()=>J}));const W=new(0,B.default)({positioning:"bottom-center"});V.default.addOverlay(W);const K=new(0,Y.default)({cursor:"pointer",hitTolerance:2});K.on("leave",(()=>{W.hide()})),K.on("hover",(e=>{const t=e.feature;t?W.show(e.coordinate,t.get("name")||""):W.hide()})),V.default.addInteraction(K);