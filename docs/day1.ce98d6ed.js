function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},n=t.parcelRequirecc54;null==n&&((n=function(e){if(e in i)return i[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequirecc54=n);var s=n("6gELa"),o=n("2YyN3"),a=n("8vXOK"),l=n("dVSax"),u=n("1FnBm"),d=n("av38f"),h=n("bCUH1"),c=n("3CYjy"),f=n("14PDX"),g=n("jZquI"),p=n("713Fw"),y=n("lVQul"),T=n("6BjcK"),w=n("d1ltq");const _={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},m={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class x extends u.default{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=(0,f.create)()}prepareTile(e,t,i){let r;const n=e.getState();return n!==d.default.LOADED&&n!==d.default.ERROR||(this.updateExecutorGroup_(e,t,i),this.tileImageNeedsRender_(e)&&(r=!0)),r}getTile(e,t,i,r){const n=r.pixelRatio,s=r.viewState,o=s.resolution,a=s.projection,l=this.getLayer(),u=l.getSource().getTile(e,t,i,n,a),d=r.viewHints,c=!(d[h.default.ANIMATING]||d[h.default.INTERACTING]);!c&&u.wantedResolution||(u.wantedResolution=o);return this.prepareTile(u,n,a)&&(c||Date.now()-r.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(u,r),super.getTile(e,t,i,r)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&("vector"===t.getRenderMode()?(0,y.getUid)(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),n=r.getRevision(),s=r.getRenderOrder()||null,o=e.wantedResolution,u=e.getReplayState(r);if(!u.dirty&&u.renderedResolution===o&&u.renderedRevision==n&&u.renderedRenderOrder==s)return;const h=r.getSource(),c=r.getDeclutter(),f=h.getTileGrid(),T=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),w=h.getSourceTiles(t,i,e),_=(0,y.getUid)(r);delete e.hitDetectionImageData[_],e.executorGroups[_]=[],c&&(e.declutterExecutorGroups[_]=[]),u.dirty=!1;for(let i=0,n=w.length;i<n;++i){const n=w[i];if(n.getState()!=d.default.LOADED)continue;const y=n.tileCoord,m=f.getTileCoordExtent(y),x=(0,g.getIntersection)(T,m),v=(0,g.buffer)(x,r.getRenderBuffer()*o,this.tmpExtent),F=(0,g.equals)(m,x)?null:v,S=new(0,a.default)(0,v,o,t),C=c?new(0,a.default)(0,x,o,t):void 0,b=(0,p.getSquaredTolerance)(o,t),E=function(e){let t;const i=e.getStyleFunction()||r.getStyleFunction();if(i&&(t=i(e,o)),t){const i=this.renderFeature(e,b,t,S,C);u.dirty=u.dirty||i}},R=n.getFeatures();s&&s!==u.renderedRenderOrder&&R.sort(s);for(let e=0,t=R.length;e<t;++e){const t=R[e];F&&!(0,g.intersects)(F,t.getGeometry().getExtent())||E.call(this,t)}const P=S.finish(),L="vector"!==r.getRenderMode()&&c&&1===w.length?null:x,I=new(0,l.default)(L,o,t,h.getOverlaps(),P,r.getRenderBuffer());if(e.executorGroups[_].push(I),C){const i=new(0,l.default)(null,o,t,h.getOverlaps(),C.finish(),r.getRenderBuffer());e.declutterExecutorGroups[_].push(i)}}u.renderedRevision=n,u.renderedRenderOrder=s,u.renderedResolution=o}forEachFeatureAtCoordinate(e,t,i,r,n){const s=t.viewState.resolution,o=t.viewState.rotation;i=null==i?0:i;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(t.viewState.projection),u=(0,g.boundingExtent)([e]);(0,g.buffer)(u,s*i,u);const d={},h=function(e,t,i){let s=e.getId();void 0===s&&(s=(0,y.getUid)(e));const o=d[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return d[s]=!0,n.splice(n.lastIndexOf(o),1),r(e,a,t);o.geometry=t,o.distanceSq=i}}else{if(0===i)return d[s]=!0,r(e,a,t);n.push(d[s]={feature:e,layer:a,geometry:t,distanceSq:i,callback:r})}},c=this.renderedTiles;let f;for(let r=0,n=c.length;!f&&r<n;++r){const n=c[r],d=l.getTileCoordExtent(n.wrappedTileCoord);if(!(0,g.intersects)(d,u))continue;const p=(0,y.getUid)(a),T=[n.executorGroups[p]],w=n.declutterExecutorGroups[p];w&&T.push(w),T.some((r=>{const n=r===w?t.declutterTree.all().map((e=>e.value)):null;for(let t=0,a=r.length;t<a;++t){const a=r[t];if(f=a.forEachFeatureAtCoordinate(e,s,o,i,h,n),f)return!0}}))}return f}getFeatures(e){return new Promise(function(t,i){const r=this.getLayer(),n=(0,y.getUid)(r),s=r.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,u=s.getTileGridForProjection(o),h=(0,f.apply)(this.renderedPixelToCoordinateTransform_,e.slice()),p=u.getTileCoordForCoordAndResolution(h,l);let _;for(let e=0,t=this.renderedTiles.length;e<t;++e)if(p.toString()===this.renderedTiles[e].tileCoord.toString()){if(_=this.renderedTiles[e],_.getState()===d.default.LOADED){const e=u.getTileCoordExtent(_.tileCoord);s.getWrapX()&&o.canWrapX()&&!(0,g.containsExtent)(a,e)&&(0,w.wrapX)(h,o);break}_=void 0}if(!_||_.loadingSourceTiles>0)return void t([]);const m=u.getTileCoordExtent(_.wrappedTileCoord),x=(0,g.getTopLeft)(m),v=[(h[0]-x[0])/l,(x[1]-h[1])/l],F=_.getSourceTiles().reduce((function(e,t){return e.concat(t.getFeatures())}),[]);let S=_.hitDetectionImageData[n];if(!S&&!this.animatingOrInteracting_){const e=(0,T.toSize)(u.getTileSize(u.getZForResolution(l,s.zDirection))),t=this.renderedRotation_,i=[this.getRenderTransform(u.getTileCoordCenter(_.wrappedTileCoord),l,0,c.HIT_DETECT_RESOLUTION,e[0]*c.HIT_DETECT_RESOLUTION,e[1]*c.HIT_DETECT_RESOLUTION,0)];S=(0,c.createHitDetectionImageData)(e,i,F,r.getStyleFunction(),u.getTileCoordExtent(_.wrappedTileCoord),_.getReplayState(r).renderedResolution,t),_.hitDetectionImageData[n]=S}t((0,c.hitDetect)(v,F,S))}.bind(this))}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const t=this.context,i=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();const r=e.viewHints,n=!(r[h.default.ANIMATING]||r[h.default.INTERACTING]),s=this.renderedTiles;for(let t=0,i=s.length;t<i;++t){const i=s[t],r=i.declutterExecutorGroups[(0,y.getUid)(this.getLayer())];if(r)for(let t=r.length-1;t>=0;--t)r[t].execute(this.context,1,this.getTileRenderTransform(i,e),e.viewState.rotation,n,void 0,e.declutterTree)}t.globalAlpha=i}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,n=r.center,s=r.resolution,o=r.rotation,a=t.size,l=Math.round(a[0]*i),u=Math.round(a[1]*i),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),h=e.tileCoord,c=d.getTileCoordExtent(e.wrappedTileCoord),g=d.getTileCoordExtent(h,this.tmpExtent)[0]-c[0];return(0,f.multiply)((0,f.scale)(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(n,s,o,i,l,u,g))}postRender(e,t){const i=t.viewHints,r=!(i[h.default.ANIMATING]||i[h.default.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;const n=this.getLayer(),s=n.getRenderMode(),o=e.globalAlpha;e.globalAlpha=n.getOpacity();const a=m[s],l=t.viewState,u=l.rotation,d=n.getSource(),c=d.getTileGridForProjection(l.projection).getZForResolution(l.resolution,d.zDirection),f=this.renderedTiles,p=[],T=[];let w=!0;for(let i=f.length-1;i>=0;--i){const s=f[i];w=w&&!s.getReplayState(n).dirty;const o=s.executorGroups[(0,y.getUid)(n)].filter((e=>e.hasExecutors(a)));if(0===o.length)continue;const l=this.getTileRenderTransform(s,t),d=s.tileCoord[0];let h=!1;const _=o[0].getClipCoords(l);if(_){for(let t=0,i=p.length;t<i;++t)if(c!==d&&d<T[t]){const i=p[t];(0,g.intersects)([_[0],_[3],_[4],_[7]],[i[0],i[3],i[4],i[7]])&&(h||(e.save(),h=!0),e.beginPath(),e.moveTo(_[0],_[1]),e.lineTo(_[2],_[3]),e.lineTo(_[4],_[5]),e.lineTo(_[6],_[7]),e.moveTo(i[6],i[7]),e.lineTo(i[4],i[5]),e.lineTo(i[2],i[3]),e.lineTo(i[0],i[1]),e.clip())}p.push(_),T.push(d)}for(let t=0,i=o.length;t<i;++t){o[t].execute(e,1,l,u,r,a)}h&&e.restore()}e.globalAlpha=o,this.ready=w,super.postRender(e,t)}renderFeature(e,t,i,r,n){if(!i)return!1;let s=!1;if(Array.isArray(i))for(let o=0,a=i.length;o<a;++o)s=(0,p.renderFeature)(r,e,i[o],t,this.boundHandleStyleImageChange_,void 0,n)||s;else s=(0,p.renderFeature)(r,e,i,t,this.boundHandleStyleImageChange_,void 0,n);return s}tileImageNeedsRender_(e){const t=this.getLayer();if("vector"===t.getRenderMode())return!1;const i=e.getReplayState(t),r=t.getRevision(),n=e.wantedResolution;return i.renderedTileResolution!==n||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),n=i.getRevision(),s=e.executorGroups[(0,y.getUid)(i)];r.renderedTileRevision=n;const o=e.wrappedTileCoord,a=o[0],l=i.getSource();let u=t.pixelRatio;const d=t.viewState.projection,h=l.getTileGridForProjection(d),c=h.getResolution(e.tileCoord[0]),g=t.pixelRatio/e.wantedResolution*c,p=h.getResolution(a),T=e.getContext(i);u=Math.round(Math.max(u,g/u));const w=l.getTilePixelSize(a,u,d);T.canvas.width=w[0],T.canvas.height=w[1];const m=u/g;if(1!==m){const e=(0,f.reset)(this.tmpTransform_);(0,f.scale)(e,m,m),T.setTransform.apply(T,e)}const x=h.getTileCoordExtent(o,this.tmpExtent),v=g/p,F=(0,f.reset)(this.tmpTransform_);(0,f.scale)(F,v,-v),(0,f.translate)(F,-x[0],-x[3]);for(let e=0,t=s.length;e<t;++e){s[e].execute(T,m,F,0,!0,_[i.getRenderMode()])}r.renderedTileResolution=e.wantedResolution}}var v=x,F=n("8ElLP"),S=n("eJ4LZ");class C extends o.default{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const i=e.renderMode||"hybrid";(0,S.assert)("hybrid"==i||"vector"==i,28),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new v(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(F.default.PRELOAD)}getUseInterimTilesOnError(){return this.get(F.default.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(F.default.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(F.default.USE_INTERIM_TILES_ON_ERROR,e)}}var b=C,E=n("cw4dl"),R=n("hMeZw");d=n("av38f");class P extends R.default{constructor(e,t,i,r,n,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=n,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==d.default.IDLE&&(this.setState(d.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(d.default.ERROR)}setFeatures(e){this.features_=e,this.setState(d.default.LOADED)}setLoader(e){this.loader_=e}}var L=P,I=n("85w1a"),M=n("co8nU"),D=(d=n("av38f"),n("5k6kp")),O=(R=n("hMeZw"),n("cgxQK"));y=n("lVQul");const k=[];class A extends R.default{constructor(e,t,i,r){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(e){const t=(0,y.getUid)(e);return t in this.context_||(this.context_[t]=(0,O.createCanvasContext2D)(1,1,k)),this.context_[t]}hasContext(e){return(0,y.getUid)(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=(0,y.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];(0,O.releaseCanvas)(t),k.push(t.canvas),delete this.context_[e]}super.release()}}var V=A,G=n("3QMf6"),N=(g=n("jZquI"),n("5NhYx")),B=n("9YraL"),j=n("kKEgb"),U=n("kWPIP");T=n("6BjcK");class z extends D.default{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||(0,N.extentFromProjection)(t),r=e.tileGrid||(0,N.createXYZ)({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Z,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new(0,I.default)(this.tileCache.highWaterMark),this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:L,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],i=this.tileCache;if(0===i.getCount())return t;const r=(0,B.fromKey)(i.peekFirstKey())[0],n=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]!==r||i.getState()!==d.default.LOADED)return;const s=i.getSourceTiles();for(let i=0,r=s.length;i<r;++i){const r=s[i],o=r.tileCoord;if((0,g.intersects)(e,n.getTileCoordExtent(o))){const i=r.getFeatures();if(i)for(let r=0,n=i.length;r<n;++r){const n=i[r],s=n.getGeometry();(0,g.intersects)(e,s.getExtent())&&t.push(n)}}}})),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const i=this.getTileCacheForProjection(e),r=Object.keys(t).reduce(((e,t)=>{const r=(0,B.getCacheKeyForTileKey)(t),n=i.peek(r);if(n){const t=n.sourceTiles;for(let i=0,r=t.length;i<r;++i)e[t[i].getKey()]=!0}return e}),{});super.expireCache(e,t),this.sourceTileCache.expireCache(r)}getSourceTiles(e,t,i){if(i.getState()===d.default.IDLE){i.setState(d.default.LOADING);const r=i.wrappedTileCoord,n=this.getTileGridForProjection(t),s=n.getTileCoordExtent(r),o=r[0],a=n.getResolution(o);(0,g.buffer)(s,-a,s);const l=this.tileGrid,u=l.getExtent();u&&(0,g.getIntersection)(s,u,s);const h=l.getZForResolution(a,this.zDirection);l.forEachTileCoord(s,h,(r=>{const n=this.tileUrlFunction(r,e,t),s=this.sourceTileCache.containsKey(n)?this.sourceTileCache.get(n):new this.tileClass(r,n?d.default.IDLE:d.default.EMPTY,n,this.format_,this.tileLoadFunction);i.sourceTiles.push(s);const o=s.getState();if(o<d.default.LOADED){const e=t=>{this.handleTileChange(t);const r=s.getState();if(r===d.default.LOADED||r===d.default.ERROR){const t=s.getKey();t in i.errorTileKeys?s.getState()===d.default.LOADED&&delete i.errorTileKeys[t]:i.loadingSourceTiles--,r===d.default.ERROR?i.errorTileKeys[t]=!0:s.removeEventListener(E.default.CHANGE,e),0===i.loadingSourceTiles&&i.setState((0,j.isEmpty)(i.errorTileKeys)?d.default.LOADED:d.default.ERROR)}};s.addEventListener(E.default.CHANGE,e),i.loadingSourceTiles++}o===d.default.IDLE&&(s.extent=l.getTileCoordExtent(r),s.projection=t,s.resolution=l.getResolution(r[0]),this.sourceTileCache.set(n,s),s.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((e=>e.getState()===d.default.ERROR))?d.default.ERROR:d.default.LOADED)}return i.sourceTiles}getTile(e,t,i,r,n){const s=(0,B.getKeyZXY)(e,t,i),o=this.getKey();let a;if(this.tileCache.containsKey(s)&&(a=this.tileCache.get(s),a.key===o))return a;const l=[e,t,i];let u=this.getTileCoordForTileUrlFunction(l,n);const h=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(n);if(u&&h){const t=c.getTileCoordExtent(u);(0,g.buffer)(t,-c.getResolution(e),t),(0,g.intersects)(h,t)||(u=null)}let f=!0;if(null!==u){const t=this.tileGrid,i=c.getResolution(e),s=t.getZForResolution(i,1),o=c.getTileCoordExtent(u);(0,g.buffer)(o,-i,o),t.forEachTileCoord(o,s,function(e){f=f&&!this.tileUrlFunction(e,r,n)}.bind(this))}const p=new V(l,f?d.default.EMPTY:d.default.IDLE,u,this.getSourceTiles.bind(this,r,n));return p.key=o,a?(p.interimTile=a,p.refreshInterimChain(),this.tileCache.replace(s,p)):this.tileCache.set(s,p),p}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const e=this.tileGrid,r=e.getResolutions().slice(),n=r.map((function(t,i){return e.getOrigin(i)})),s=r.map((function(t,i){return e.getTileSize(i)})),o=G.DEFAULT_MAX_ZOOM+1;for(let e=r.length;e<o;++e)r.push(r[e-1]/2),n.push(n[e-1]),s.push(s[e-1]);i=new(0,M.default)({extent:e.getExtent(),origins:n,resolutions:r,tileSizes:s}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),n=(0,T.toSize)(r.getTileSize(e),this.tmpSize);return[Math.round(n[0]*t),Math.round(n[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(2*e,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}var K=z;function Z(e,t){e.setLoader((function(i,r,n){(0,U.loadFeaturesXhr)(t,e.getFormat(),i,r,n,e.onLoad.bind(e),e.onError.bind(e))}))}var H,X,Y,q=n("9z1G1"),Q=n("hvEnP"),W=n("7TB1l"),J=n("ljDIj"),$=n("dEQmT");function ee(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}H=ee,X=function(e,t,i,r,n){var s,o,a=8*n-r-1,l=(1<<a)-1,u=l>>1,d=-7,h=i?n-1:0,c=i?-1:1,f=e[t+h];for(h+=c,s=f&(1<<-d)-1,f>>=-d,d+=a;d>0;s=256*s+e[t+h],h+=c,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=256*o+e[t+h],h+=c,d-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=u}return(f?-1:1)*o*Math.pow(2,s-r)},Y=function(e,t,i,r,n,s){var o,a,l,u=8*s-n-1,d=(1<<u)-1,h=d>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,g=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?c/l:c*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(t*l-1)*Math.pow(2,n),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[i+f]=255&a,f+=g,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;e[i+f]=255&o,f+=g,o/=256,u-=8);e[i+f-g]|=128*p},ee.Varint=0,ee.Fixed64=1,ee.Bytes=2,ee.Fixed32=5;var te="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ie(e){return e.type===ee.Bytes?e.readVarint()+e.pos:e.pos+1}function re(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function ne(e,t,i){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=e;n--)i.buf[n+r]=i.buf[n]}function se(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function oe(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function ae(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function le(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function ue(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function de(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function he(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function ce(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function fe(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function ge(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pe(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function ye(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}ee.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,s=this.pos;this.type=7&r,e(n,t,this),this.pos===s&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ge(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ye(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ge(this.buf,this.pos)+4294967296*ge(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=ge(this.buf,this.pos)+4294967296*ye(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=X(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=X(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,r=this.buf;return t=127&(i=r[this.pos++]),i<128?t:(t|=(127&(i=r[this.pos++]))<<7,i<128?t:(t|=(127&(i=r[this.pos++]))<<14,i<128?t:(t|=(127&(i=r[this.pos++]))<<21,i<128?t:function(e,t,i){var r,n,s=i.buf;if(n=s[i.pos++],r=(112&n)>>4,n<128)return re(e,r,t);if(n=s[i.pos++],r|=(127&n)<<3,n<128)return re(e,r,t);if(n=s[i.pos++],r|=(127&n)<<10,n<128)return re(e,r,t);if(n=s[i.pos++],r|=(127&n)<<17,n<128)return re(e,r,t);if(n=s[i.pos++],r|=(127&n)<<24,n<128)return re(e,r,t);if(n=s[i.pos++],r|=(1&n)<<31,n<128)return re(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&te?function(e,t,i){return te.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){var r="",n=t;for(;n<i;){var s,o,a,l=e[n],u=null,d=l>239?4:l>223?3:l>191?2:1;if(n+d>i)break;1===d?l<128&&(u=l):2===d?128==(192&(s=e[n+1]))&&(u=(31&l)<<6|63&s)<=127&&(u=null):3===d?(s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&((u=(15&l)<<12|(63&s)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===d&&(s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&((u=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,d=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),n+=d}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ee.Bytes)return e.push(this.readVarint(t));var i=ie(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ee.Bytes)return e.push(this.readSVarint());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ee.Bytes)return e.push(this.readBoolean());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ee.Bytes)return e.push(this.readFloat());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ee.Bytes)return e.push(this.readDouble());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ee.Bytes)return e.push(this.readFixed32());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ee.Bytes)return e.push(this.readSFixed32());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ee.Bytes)return e.push(this.readFixed64());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ee.Bytes)return e.push(this.readSFixed64());var t=ie(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===ee.Varint)for(;this.buf[this.pos++]>127;);else if(t===ee.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ee.Fixed32)this.pos+=4;else{if(t!==ee.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pe(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pe(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pe(this.buf,-1&e,this.pos),pe(this.buf,Math.floor(2.3283064365386963e-10*e),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pe(this.buf,-1&e,this.pos),pe(this.buf,Math.floor(2.3283064365386963e-10*e),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,r;e>=0?(i=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos]=127&e}(i,0,t),function(e,t){var i=(7&e)<<4;if(t.buf[t.pos++]|=i|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var r,n,s=0;s<t.length;s++){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){r>56319||s+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):n=r;continue}if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(e[i++]=239,e[i++]=191,e[i++]=189,n=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=63&r|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&ne(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Y(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Y(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var r=this.pos-i;r>=128&&ne(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,i){this.writeTag(e,ee.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,se,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,oe,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,ue,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,ae,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,le,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,de,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,he,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,ce,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,fe,t)},writeBytesField:function(e,t){this.writeTag(e,ee.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ee.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ee.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ee.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ee.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ee.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ee.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ee.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ee.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ee.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Te=n("j2K3b"),we=n("cgPpQ"),_e=n("5zIbz"),me=n("iGyOD"),xe=(Te=n("j2K3b"),J=n("ljDIj"),Q=n("hvEnP"),W=n("7TB1l"),$=n("dEQmT"),we=n("cgPpQ"),f=n("14PDX"),g=n("jZquI"),n("kBSVF")),ve=n("ec4vu"),Fe=n("gzr8q"),Se=n("2cCpz"),Ce=n("1fqgz"),be=n("88eMt"),Ee=n("bsQCi");const Re=(0,f.create)();class Pe{constructor(e,t,i,r,n){this.styleFunction,this.extent_,this.id_=n,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,g.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,g.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=(0,g.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,ve.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=(0,be.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,ve.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,Ce.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,n=i.length;r<n;++r){const n=i[r],s=(0,Ce.interpolatePoint)(e,t,n,2,.5);(0,xe.extend)(this.flatMidpoints_,s),t=n}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const t=(e=(0,Fe.get)(e)).getExtent(),i=e.getWorldExtent();if(t&&i){const e=(0,g.getHeight)(i)/(0,g.getHeight)(t);(0,f.compose)(Re,i[0],i[3],e,-e,0,0,0),(0,Ee.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Re,this.flatCoordinates_)}}getEnds(){return this.ends_}}Pe.prototype.getEndss=Pe.prototype.getEnds,Pe.prototype.getFlatCoordinates=Pe.prototype.getOrientedFlatCoordinates;var Le=Pe;S=n("eJ4LZ"),Fe=n("gzr8q"),Se=n("2cCpz");class Ie extends q.default{constructor(e){super(),e=e||{},this.dataProjection=new(0,_e.default)({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:Le,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const n=e.readVarint()+e.pos;let s=1,o=0,a=0,l=0,u=0,d=0;for(;e.pos<n;){if(!o){const t=e.readVarint();s=7&t,o=t>>3}o--,1===s||2===s?(a+=e.readSVarint(),l+=e.readSVarint(),1===s&&u>d&&(r.push(u),d=u),i.push(a,l),u+=2):7===s?u>d&&(i.push(i[d],i[d+1]),u+=2):(0,S.assert)(!1,59)}u>d&&(r.push(u),d=u)}createFeature_(e,t,i){const r=t.type;if(0===r)return null;let n;const s=t.properties;let o;this.idProperty_?(o=s[this.idProperty_],delete s[this.idProperty_]):o=t.id,s[this.layerName_]=t.layer.name;const a=[],l=[];this.readRawGeometry_(e,t,a,l);const u=function(e,t){let i;1===e?i=1===t?"Point":"MultiPoint":2===e?i=1===t?"LineString":"MultiLineString":3===e&&(i="Polygon");return i}(r,l.length);if(this.featureClass_===Le)n=new this.featureClass_(u,a,l,s,o),n.transform(i.dataProjection);else{let e;if("Polygon"==u){const t=(0,Se.inflateEnds)(a,l);e=t.length>1?new(0,$.default)(a,"XY",t):new(0,we.default)(a,"XY",l)}else e="Point"===u?new(0,Te.default)(a,"XY"):"LineString"===u?new(0,Q.default)(a,"XY"):"MultiPoint"===u?new(0,J.default)(a,"XY"):"MultiLineString"===u?new(0,W.default)(a,"XY",l):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);const t=(0,q.transformGeometryWithOptions)(e,!1,i);n.setGeometry(t),void 0!==o&&n.setId(o),n.setProperties(s,!0)}return n}getType(){return"arraybuffer"}readFeatures(t,i){const r=this.layers_;i=this.adaptOptions(i);const n=(0,Fe.get)(i.dataProjection);n.setWorldExtent(i.extent),i.dataProjection=n;const s=new(e(H))(t),o=s.readFields(Me,{}),a=[];for(const e in o){if(r&&!r.includes(e))continue;const t=o[e],l=t?[0,0,t.extent,t.extent]:null;n.setExtent(l);for(let e=0,r=t.length;e<r;++e){const r=ke(s,t,e),n=this.createFeature_(s,r,i);null!==n&&a.push(n)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Me(e,t,i){if(3===e){const e={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(De,e,r),e.length=e.features.length,e.length&&(t[e.name]=e)}}function De(e,t,i){if(15===e)t.version=i.readVarint();else if(1===e)t.name=i.readString();else if(5===e)t.extent=i.readVarint();else if(2===e)t.features.push(i.pos);else if(3===e)t.keys.push(i.readString());else if(4===e){let r=null;const n=i.readVarint()+i.pos;for(;i.pos<n;)r=1===(e=i.readVarint()>>3)?i.readString():2===e?i.readFloat():3===e?i.readDouble():4===e?i.readVarint64():5===e?i.readVarint():6===e?i.readSVarint():7===e?i.readBoolean():null;t.values.push(r)}}function Oe(e,t,i){if(1==e)t.id=i.readVarint();else if(2==e){const e=i.readVarint()+i.pos;for(;i.pos<e;){const e=t.layer.keys[i.readVarint()],r=t.layer.values[i.readVarint()];t.properties[e]=r}}else 3==e?t.type=i.readVarint():4==e&&(t.geometry=i.pos)}function ke(e,t,i){e.pos=t.features[i];const r=e.readVarint()+e.pos,n={layer:t,type:0,properties:{}};return e.readFields(Oe,n,r),n}var Ae=Ie,Ve=(me=n("iGyOD"),n("20LS2")),Ge=n("gmEQj"),Ne=(N=n("5NhYx"),n("kPMpK")),Be=n("fkmMz"),je=(Ve.default,n("6nlvT")),Ue=n("31ZqB"),ze=n("eHnTw"),Ke=n("iTTi2"),Ze=(me=n("iGyOD"),n("7lBr2")),He=n("610XN"),Xe=n("eQaCk"),Ye=(j=n("kKEgb"),n("l9IGS")),qe=(xe=n("kBSVF"),y=n("lVQul"),n("btuox"));const Qe="select";class We extends Ke.default{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const Je={};class $e extends Ze.default{constructor(e){let t;if(super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:qe.singleClick,this.addCondition_=e.addCondition?e.addCondition:qe.never,this.removeCondition_=e.removeCondition?e.removeCondition:qe.never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:qe.shiftKeyOnly,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:Xe.TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=void 0!==e.style?e.style:function(){const e=(0,Ye.createEditingStyle)();return(0,xe.extend)(e.Polygon,e.LineString),(0,xe.extend)(e.GeometryCollection,e.LineString),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}(),this.features_=e.features||new(0,Ue.default),e.layers)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(e){return i.includes(e)}}else t=Xe.TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[(0,y.getUid)(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[(0,y.getUid)(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(ze.default.ADD,this.boundAddFeature_),this.features_.addEventListener(ze.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ze.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(ze.default.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const e=this.getMap().getAllLayers().find((function(e){if(e instanceof He.default&&e.getSource()&&e.getSource().hasFeature(t))return e}));e&&this.addFeatureLayerAssociation_(t,e)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=(0,y.getUid)(e);t in Je||(Je[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const r=t[i];if(r!==this&&r instanceof $e&&r.getStyle()&&-1!==r.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(r.getStyle())}const i=(0,y.getUid)(e);e.setStyle(Je[i]),delete Je[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[(0,y.getUid)(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),n=!t&&!i&&!r,s=e.map,o=this.getFeatures(),a=[],l=[];if(n){(0,j.clear)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,function(e,t){if(e instanceof me.default&&this.filter_(e,t))return this.addFeatureLayerAssociation_(e,t),l.push(e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=o.getLength()-1;e>=0;--e){const t=o.item(e),i=l.indexOf(t);i>-1?l.splice(i,1):(o.remove(t),a.push(t))}0!==l.length&&o.extend(l)}else{s.forEachFeatureAtPixel(e.pixel,function(e,n){if(e instanceof me.default&&this.filter_(e,n))return!t&&!r||o.getArray().includes(e)?(i||r)&&o.getArray().includes(e)&&(a.push(e),this.removeFeatureLayerAssociation_(e)):(this.addFeatureLayerAssociation_(e,n),l.push(e)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=a.length-1;e>=0;--e)o.remove(a[e]);o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new We(Qe,l,a,e)),!0}}var et,tt,it,rt=$e,nt=(qe=n("btuox"),n("1B70O")),st=(Ye=n("l9IGS"),n("4lFOe")),ot=n("d5AAH"),at=n("2zf1Y");et=[255,255,255,1],tt=[0,153,255,1],it=[new(0,Ye.default)({stroke:new(0,ot.default)({color:et,width:5})}),new(0,Ye.default)({image:new(0,st.default)({radius:6,fill:new(0,at.default)({color:tt}),stroke:new(0,ot.default)({color:et,width:1.5})}),stroke:new(0,ot.default)({color:tt,width:3}),fill:new(0,at.default)({color:[255,255,255,.5]})})];var lt=function(e){if(!0===e)return it;e=e||{};var t=new(0,at.default)({color:e.fillColor||"rgba(255,255,255,0.4)"}),i=new(0,ot.default)({color:e.color||"#3399CC",width:1.25});return[new(0,Ye.default)({image:new(0,st.default)({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]},ut=(Ye=n("l9IGS"),n("h1ihb")),dt=n("ej7yC");ot=n("d5AAH"),at=n("2zf1Y");n("e1DCI"),n("5JlsX");lt();const ht={};function ct(e){return"erp"===e.get("layer")?ht[e.get("type_principal")]||ht.default:[]}(0,dt.default)((()=>{const e={J:"maki-disability",L:"maki-theatre",M:"maki-shop",N:"maki-restaurant",O:"maki-lodging",P:"maki-playground",R:"maki-school",RH:"maki-school",S:"maki-library",T:"maki-museum",U:"maki-hospital",V:"maki-religious-place_of_worship",W:"maki2-bank",X:"maki2-basketball",EF:"maki-ferry",GA:"maki-rail",PA:"maki-soccer",PS:"maki-parking",SG:"maki2-station",CTS:"maki2-station",OA:"maki2-mountain",REF:"maki2-mountain",default:"maki-circle"};Object.keys(e).forEach((t=>{ht[t]=new(0,Ye.default)({image:new(0,ut.default)({glyph:e[t],form:"circle",radius:18,displacement:[0,0],fontSize:.8,color:[255,255,255],fill:new(0,at.default)({color:"#00AAFF"}),stroke:new(0,ot.default)({color:[255,255,255],width:2})})})})),window.erpStyle=ht}));var ft=n("jZUWm");var gt=n("6yJ0x"),pt=n("5VeMq");dt=n("ej7yC");(0,ft.default)(e('<div> <h2> Day 1: points "Open to the public" </h2> <p> POI from <a href="https://geoservices.ign.fr/bdtopo" target="_new">IGNFrance BDTopo.</a> <br> Use the ol-ext font symbol style to display points with <a href="https://labs.mapbox.com/maki-icons/" target="_new">Maki font symbols</a>. </p> </div>'));const yt=new(0,s.default)({layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"});yt.addFilter(new(0,je.default)({operation:"difference",color:"#FA0",value:1})),nt.default.addLayer(yt);const Tt=new b({title:"MVT",source:new K({format:new Ae({featureClass:me.default}),url:"https://wxs.ign.fr/topographie/geoportail/tms/1.0.0/BDTOPO/{z}/{x}/{y}.pbf"}),style:ct});nt.default.getView().setMinZoom(16),nt.default.getView().setCenter([636860,5651388]),nt.default.addLayer(Tt),(0,dt.default)((()=>{Tt.setStyle(ct)}));const wt=new rt({hitTolerance:2,condition:qe.click});wt.on("select",(e=>{const t=e.selected[0];t&&console.log(t.getProperties())})),nt.default.addInteraction(wt);const _t=new(0,pt.default)({positioning:"bottom-center"});nt.default.addOverlay(_t);const mt=new(0,gt.default)({cursor:"pointer",hitTolerance:2});mt.on("leave",(()=>{_t.hide()})),mt.on("hover",(e=>{const t=e.feature;t?_t.show(e.coordinate,t.get("libelle")||""):_t.hide()})),nt.default.addInteraction(mt);