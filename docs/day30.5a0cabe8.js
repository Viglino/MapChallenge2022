function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},l={},i=t.parcelRequirecc54;null==i&&((i=function(e){if(e in s)return s[e].exports;if(e in l){var t=l[e];delete l[e];var i={id:e,exports:{}};return s[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){l[e]=t},t.parcelRequirecc54=i);var a=i("6gELa"),o=i("1B70O"),r=i("jZUWm");var n=i("610XN"),c=i("20LS2"),h=i("kPMpK"),d=i("ejLRd"),u=i("4DafG"),f=i("iQyfo"),g=i("9EqYA"),p=class extends u.default{constructor(e){var t=f.default.create("DIV",{className:(e.className||"")+" ol-imageline"+(e.target?"":" ol-unselectable ol-control")+(e.collapsed&&e.collapsible?"ol-collapsed":"")});super({element:t,target:e.target}),!e.target&&e.collapsible&&f.default.create("BUTTON",{type:"button",click:function(){this.toggle()}.bind(this),parent:t}),e.source&&(this._sources=e.source.forEach?e.source:[e.source]),e.layers&&this.setLayers(e.layers),this._setScrolling(),this._scrolldiv.addEventListener("scroll",function(){this.getMap()&&this.getMap().render()}.bind(this)),"function"==typeof e.getImage&&(this._getImage=e.getImage),"function"==typeof e.getTitle&&(this._getTitle=e.getTitle),this.set("maxFeatures",e.maxFeatures||100),this.set("linkColor",e.linkColor||!1),this.set("hover",e.hover||!1),this.set("useExtent",e.useExtent||!1),this.refresh()}setMap(e){this._listener&&this._listener.forEach(function(e){(0,d.unByKey)(e)}.bind(this)),this._listener=null,super.setMap(e),e&&(this._listener=[e.on("postcompose",this._drawLink.bind(this)),e.on("moveend",function(){this.get("useExtent")&&this.refresh()}.bind(this))],this.refresh())}setLayers(e){this._sources=this._getSources(e)}_getSources(e){var t=[];return e.forEach(function(e){e.getVisible()&&(e.getSource()&&e.getSource().getFeatures?t.push(e.getSource()):e.getLayers&&this._getSources(e.getLayers()))}.bind(this)),t}useExtent(e){this.set("useExtent",e),this.refresh()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}collapse(e){e?this.element.classList.add("ol-collapsed"):this.element.classList.remove("ol-collapsed"),this.getMap()&&setTimeout(function(){this.getMap().render()}.bind(this),this.isCollapsed()?0:250),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})}toggle(){this.element.classList.toggle("ol-collapsed"),this.getMap()&&setTimeout(function(){this.getMap().render()}.bind(this),this.isCollapsed()?0:250),this.dispatchEvent({type:"collapse",collapsed:this.isCollapsed()})}_getImage(e){return e.get("img")}_getTitle(){return""}getFeatures(){var e=this.getMap();if(!e)return[];var t=[];return(this._sources||this._getSources(e.getLayers())).forEach(function(s){if(t.length<this.get("maxFeatures"))if(this.get("useExtent")&&e){var l=e.getView().calculateExtent(e.getSize());t.push(s.getFeaturesInExtent(l))}else t.push(s.getFeatures())}.bind(this)),t}_setScrolling(){var e=this._scrolldiv=f.default.create("DIV",{parent:this.element});f.default.scrollDiv(e,{onmove:function(e){this._moving=e}.bind(this)}),e.addEventListener("scroll",this._updateScrollBounds.bind(this)),this._updateScrollBounds()}_updateScrollBounds(){var e=this._scrolldiv;e.scrollLeft<5?this.element.classList.add("ol-scroll0"):this.element.classList.remove("ol-scroll0"),e.scrollWidth-e.scrollLeft-e.offsetWidth<5?this.element.classList.add("ol-scroll1"):this.element.classList.remove("ol-scroll1")}refresh(){this._scrolldiv.innerHTML="";var e=this.getFeatures(),t=this._select?this._select.feature:null;this._select&&(this._select.elt=null),this._iline=[],this.getMap()&&this.getMap().render();var s=function(e){if(this._getImage(e)){var s=f.default.create("DIV",{className:"ol-image",parent:this._scrolldiv});f.default.create("IMG",{src:this._getImage(e),parent:s}).addEventListener("load",(function(){this.classList.add("ol-loaded")})),f.default.create("SPAN",{html:this._getTitle(e),parent:s});var l={elt:s,feature:e};s.addEventListener("click",function(){this._moving||(this._scrolldiv.scrollLeft=s.offsetLeft+f.default.getStyle(s,"width")/2-f.default.getStyle(this.element,"width")/2,this._select&&this._select.elt.classList.remove("select"),this._select=l,this._select.elt.classList.add("select"),this.dispatchEvent({type:"select",feature:e}))}.bind(this)),s.addEventListener("mouseover",function(e){this.get("hover")&&(this._select&&this._select.elt.classList.remove("select"),this._select=l,this._select.elt.classList.add("select"),this.getMap().render(),e.stopPropagation())}.bind(this)),s.addEventListener("mouseout",function(e){this.get("hover")&&(this._select&&this._select.elt.classList.remove("select"),this._select=!1,this.getMap().render(),e.stopPropagation())}.bind(this)),s.ondragstart=function(){return!1},this._iline.push(l),t===e&&(this._select=l,l.elt.classList.add("select"))}}.bind(this),l=this.get("maxFeatures");e.forEach(function(e){for(var t,i=0;(t=e[i])&&!(l--<0);i++)s(t)}.bind(this)),this._select&&this._select.feature&&!this._select.elt&&s(this._select.feature),this._updateScrollBounds()}select(e,t){this._select=!1,this._iline.forEach(function(s){s.feature===e?(s.elt.classList.add("select"),this._select=s,!1!==t&&(this._scrolldiv.scrollLeft=s.elt.offsetLeft+f.default.getStyle(s.elt,"width")/2-f.default.getStyle(this.element,"width")/2)):s.elt.classList.remove("select")}.bind(this))}_drawLink(e){if(!(!this.get("linkColor")|this.isCollapsed())&&(this.getMap()&&this._select&&this._select.elt)){var t=e.context||(0,g.default)(this.getMap()).getContext("2d"),s=e.frameState.pixelRatio,l=[this._select.elt.offsetLeft-this._scrolldiv.scrollLeft+f.default.getStyle(this._select.elt,"width")/2,parseFloat(f.default.getStyle(this.element,"top"))||this.getMap().getSize()[1]],i=this._select.feature.getGeometry().getFirstCoordinate();i=this.getMap().getPixelFromCoordinate(i),t.save(),t.fillStyle=this.get("linkColor"),t.beginPath(),i[0]>l[0]?(t.moveTo((l[0]-5)*s,l[1]*s),t.lineTo((l[0]+5)*s,(l[1]+5)*s)):(t.moveTo((l[0]-5)*s,(l[1]+5)*s),t.lineTo((l[0]+5)*s,l[1]*s)),t.lineTo(i[0]*s,i[1]*s),t.fill(),t.restore()}}},_=i("dUROT"),v=i("btuox");(0,r.default)(e('<div> <h2> Day 2: lines Flow lines style </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.filter.Mask.html" target="_new"> ol-ext Mask filter </a> to enhance administrative boundary and focus on the map. </p> </div>')),o.default.getView().setCenter([-419446,4173494]);const m=new(0,a.default)({layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"});o.default.addLayer(m);var L=new(0,n.default)({source:new(0,c.default)({url:"./30day.geojson",format:new(0,h.default)})});o.default.addLayer(L);const y=new p({source:L.getSource(),hover:!0,linkColor:"#ff0",getImage:function(e){return"./day"+e.get("day")+".png"},getTitle:function(e){return e.get("title")}});o.default.addControl(y),L.getSource().on("change",(function(e){"ready"==L.getSource().getState()&&y.refresh()})),y.on("select",(function(e){setTimeout((()=>{S.getFeatures().clear(),S.getFeatures().push(e.feature)})),window.open("./day"+e.feature.get("day")+".html","day")}));const S=new(0,_.default)({hitTolerance:5,condition:v.click});o.default.addInteraction(S),S.on("select",(function(e){var t=e.selected[0];y.select(t)}));