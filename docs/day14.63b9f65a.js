function t(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},s=e.parcelRequirecc54;null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var s={id:t,exports:{}};return i[t]=s,e.call(s.exports,s,s.exports),s.exports}var h=new Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}).register=function(t,e){r[t]=e},e.parcelRequirecc54=s),s.register("3hQzq",(function(e,i){t(e.exports,"default",(()=>n));var r=s("cgPpQ"),h=s("1vCtb"),a=s("9IIzv"),n=class extends h.default{constructor(t){super(t=t||{}),this._hexgrid=new(0,a.default)(t),this.reset()}getGridGeomAt(t){var e=this._hexgrid.coord2hex(t);return new(0,r.default)([this._hexgrid.getHexagon(e)])}setSize(t,e){this._hexgrid.setSize(t),e||this.reset()}getSize(){return this._hexgrid.getSize()}setLayout(t,e){this._hexgrid.setLayout(t),e||this.reset()}getLayout(){return this._hexgrid.getLayout()}setOrigin(t,e){this._hexgrid.setOrigin(t),e||this.reset()}getOrigin(){return this._hexgrid.getOrigin()}getHexFeatures(){return super.getGridFeatures()}}})),s.register("1vCtb",(function(e,i){t(e.exports,"default",(()=>o));var r=s("iGyOD"),h=s("cgPpQ"),a=s("20LS2"),n=s("23ytq");s("WA56z");var o=class extends a.default{constructor(t){super(t=t||{}),this._bindModify=this._onModifyFeature.bind(this),this._watch=!0,this._origin=t.source,this._listen=!1!==t.listenChange,this._geomFn=t.geometryFunction||n.ol_coordinate_getFeatureCenter||function(t){return t.getGeometry().getFirstCoordinate()},this._origin.on("addfeature",this._onAddFeature.bind(this)),this._origin.on("removefeature",this._onRemoveFeature.bind(this)),this._origin.on("clearstart",this._onClearFeature.bind(this)),this._origin.on("clearend",this._onClearFeature.bind(this)),"function"==typeof t.flatAttributes&&(this._flatAttributes=t.flatAttributes)}_onAddFeature(t,e,i){var r=t.feature||t.target;(e=e||this.getBinAt(this._geomFn(r),!0))&&e.get("features").push(r),this._listen&&!1!==i&&r.on("change",this._bindModify)}_onRemoveFeature(t,e,i){if(this._watch){var r=t.feature||t.target;if(e=e||this.getBinAt(this._geomFn(r))){for(var s,h=e.get("features"),a=0;s=h[a];a++)if(s===r){h.splice(a,1);break}h.length||this.removeFeature(e)}this._listen&&!1!==i&&r.un("change",this._bindModify)}}_onClearFeature(t){"clearstart"===t.type?(this._listen&&this._origin.getFeatures().forEach(function(t){t.un("change",this._bindModify)}.bind(this)),this.clear(),this._watch=!1):this._watch=!0}getBin(t){for(var e,i=this.getFeatures(),r=0;e=i[r];r++)for(var s,h=e.get("features"),a=0;s=h[a];a++)if(s===t)return e;return null}getGridGeomAt(t){return new(0,h.default)([t])}getBinAt(t,e){var i={},s=this.getGridGeomAt(t,i);if(!s)return null;var h=s.getInteriorPoint?s.getInteriorPoint().getCoordinates():s.getInteriorPoints().getCoordinates()[0],a=this.getFeaturesAtCoordinate(h)[0];return!a&&e&&(i.geometry=s,i.features=[],i.center=h,a=new(0,r.default)(i),this.addFeature(a)),a||null}_onModifyFeature(t){var e=this.getBin(t.target),i=this.getBinAt(this._geomFn(t.target),"create");e!==i&&(e&&this._onRemoveFeature(t,e,!1),i&&this._onAddFeature(t,i,!1)),this.changed()}reset(){this.clear();for(var t,e=this._origin.getFeatures(),i=0;t=e[i];i++)this._onAddFeature({feature:t});this.changed()}getGridFeatures(){var t=[];return this.getFeatures().forEach(function(e){var i=new(0,r.default)(e.getGeometry().clone());for(var s in e.getProperties())"features"!==s&&"geometry"!==s&&i.set(s,e.get(s));i.set("nb",e.get("features").length),this._flatAttributes(i,e.get("features")),t.push(i)}.bind(this)),t}_flatAttributes(){}setFlatAttributesFn(t){"function"==typeof t&&(this._flatAttributes=t)}getSource(){return this._origin}}})),s.register("WA56z",(function(t,e){var i,r=s("20LS2");i=r.default.prototype.clear,r.default.prototype.clear=function(t){this.dispatchEvent({type:"clearstart"}),i.call(this,t),this.dispatchEvent({type:"clearend"})}})),s.register("9IIzv",(function(e,i){t(e.exports,"default",(()=>a));var r=s("fnScq"),h=class extends r.default{constructor(t){super(t=t||{}),this.size_=t.size||8e4,this.origin_=t.origin||[0,0],this.layout_=this.layout[t.layout]||this.layout.pointy}setLayout(t){this.layout_=this.layout[t]||this.layout.pointy,this.changed()}getLayout(){return 0!=this.layout_[9]?"pointy":"flat"}setOrigin(t){this.origin_=t,this.changed()}getOrigin(){return this.origin_}setSize(t){this.size_=t||8e4,this.changed()}getSize(){return this.size_}cube2hex(t){return[t[0],t[2]]}hex2cube(t){return[t[0],-t[0]-t[1],t[1]]}hex2offset(t){return this.layout_[9]?[t[0]+(t[1]-(1&t[1]))/2,t[1]]:[t[0],t[1]+(t[0]+(1&t[0]))/2]}offset2hex(t){return this.layout_[9]?[t[0]-(t[1]-(1&t[1]))/2,t[1]]:[t[0],t[1]-(t[0]+(1&t[0]))/2]}cube_round(t){var e=Math.round(t[0]),i=Math.round(t[1]),r=Math.round(t[2]),s=Math.abs(e-t[0]),h=Math.abs(i-t[1]),a=Math.abs(r-t[2]);return s>h&&s>a?e=-i-r:h>a?i=-e-r:r=-e-i,[e,i,r]}hex_round(t){return this.cube2hex(this.cube_round(this.hex2cube(t)))}hex_corner(t,e,i){return[t[0]+e*this.layout_[8+i%6*2],t[1]+e*this.layout_[9+i%6*2]]}getHexagonAtCoord(t){return this.getHexagon(this.coord2hex(t))}getHexagon(t){for(var e=[],i=this.hex2coord(t),r=0;r<=7;r++)e.push(this.hex_corner(i,this.size_,r,this.layout_[8]));return e}hex2coord(t){return[this.origin_[0]+this.size_*(this.layout_[0]*t[0]+this.layout_[1]*t[1]),this.origin_[1]+this.size_*(this.layout_[2]*t[0]+this.layout_[3]*t[1])]}coord2hex(t){var e=[(t[0]-this.origin_[0])/this.size_,(t[1]-this.origin_[1])/this.size_],i=this.layout_[4]*e[0]+this.layout_[5]*e[1],r=this.layout_[6]*e[0]+this.layout_[7]*e[1];return this.hex_round([i,r])}cube_distance(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]),Math.abs(t[2]-e[2]))}lerp(t,e,i){return t+(e-t)*i}cube_lerp(t,e,i){return[this.lerp(t[0]+1e-6,e[0],i),this.lerp(t[1]+1e-6,e[1],i),this.lerp(t[2]+1e-6,e[2],i)]}cube_line(t,e){var i=this.cube_distance(t,e);if(!i)return[t];for(var r=[],s=0;s<=i;s++)r.push(this.cube_round(this.cube_lerp(t,e,s/i)));return r}hex_neighbors(t,e){if(void 0!==e)return[t[0]+this.neighbors.hex[e%6][0],t[1]+this.neighbors.hex[e%6][1]];var i=[];for(e=0;e<6;e++)i.push([t[0]+this.neighbors.hex[e][0],t[1]+this.neighbors.hex[e][1]]);return i}cube_neighbors(t,e){if(void 0!==e)return[t[0]+this.neighbors.cube[e%6][0],t[1]+this.neighbors.cube[e%6][1],t[2]+this.neighbors.cube[e%6][2]];var i=[];for(e=0;e<6;e++)i.push([t[0]+this.neighbors.cube[e][0],t[1]+this.neighbors.cube[e][1],t[2]+this.neighbors.cube[e][2]]);for(e=0;e<6;e++)i[e]=this.cube2hex(i[e]);return i}};h.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*30),Math.sin(Math.PI/180*30),Math.cos(Math.PI/180*90),Math.sin(Math.PI/180*90),Math.cos(Math.PI/180*150),Math.sin(Math.PI/180*150),Math.cos(Math.PI/180*210),Math.sin(Math.PI/180*210),Math.cos(Math.PI/180*270),Math.sin(Math.PI/180*270),Math.cos(Math.PI/180*330),Math.sin(Math.PI/180*330)],flat:[1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*0),Math.sin(Math.PI/180*0),Math.cos(Math.PI/180*60),Math.sin(Math.PI/180*60),Math.cos(Math.PI/180*120),Math.sin(Math.PI/180*120),Math.cos(Math.PI/180*180),Math.sin(Math.PI/180*180),Math.cos(Math.PI/180*240),Math.sin(Math.PI/180*240),Math.cos(Math.PI/180*300),Math.sin(Math.PI/180*300)]},h.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]};var a=h}));