function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequirecc54;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequirecc54=o);var i=o("eEuqc"),a=o("kRZ7z"),s=o("gmEQj"),u=o("20LS2"),d=(a=o("kRZ7z"),o("gzr8q")),l=o("iGyOD"),c=o("hvEnP"),f=o("j2K3b"),m=o("cgPpQ"),h=o("9z1G1"),p=o("lVQul"),g=o("kBSVF");g=o("kBSVF");function F(e,t){return function(){void 0===S&&"undefined"!=typeof document&&(S=document.implementation.createDocument("","",null));return S}().createElementNS(e,t)}function y(e){return"documentElement"in e}function w(e){return(new DOMParser).parseFromString(e,"application/xml")}function v(e,t){return function(r,n,o){const i=n[n.length-1].node;let a=e;void 0===a&&(a=o);return F(void 0!==t?t:i.namespaceURI,a)}}v();function x(e,t,r){let n,o;for(r=void 0!==r?r:{},n=0,o=e.length;n<o;++n)r[e[n]]=t;return r}function b(e,t,r,n,o){return n.push(e),function(e,t,r,n){let o;for(o=t.firstElementChild;o;o=o.nextElementSibling){const t=e[o.namespaceURI];if(void 0!==t){const e=t[o.localName];void 0!==e&&e.call(n,o,r)}}}(t,r,n,o),n.pop()}let N,S;class _ extends h.default{constructor(){super(),this.xmlSerializer_=(void 0===N&&"undefined"!=typeof XMLSerializer&&(N=new XMLSerializer),N)}getType(){return"xml"}readFeature(e,t){if(e){if("string"==typeof e){const r=w(e);return this.readFeatureFromDocument(r,t)}return y(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}return null}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(e){if("string"==typeof e){const r=w(e);return this.readFeaturesFromDocument(r,t)}return y(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}return[]}readFeaturesFromDocument(e,t){const r=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,g.extend)(r,this.readFeaturesFromNode(n,t));return r}readFeaturesFromNode(e,t){return(0,p.abstract)()}readGeometry(e,t){if(e){if("string"==typeof e){const r=w(e);return this.readGeometryFromDocument(r,t)}return y(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}return null}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(e){if("string"==typeof e){const t=w(e);return this.readProjectionFromDocument(t)}return y(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}return null}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}var D=_,E=(g=o("kBSVF"),d=o("gzr8q"),o("kKEgb"));h=o("9z1G1");const z=[null],G=x(z,{nd:function(e,t){t[t.length-1].ndrefs.push(e.getAttribute("ref"))},tag:j}),O=x(z,{node:function(e,t){const r=t[0],n=t[t.length-1],o=e.getAttribute("id"),i=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))];n.nodes[o]=i;const a=b({tags:{}},P,e,t);if(!(0,E.isEmpty)(a.tags)){const e=new(0,f.default)(i);(0,h.transformGeometryWithOptions)(e,!1,r);const t=new(0,l.default)(e);void 0!==o&&t.setId(o),t.setProperties(a.tags,!0),n.features.push(t)}},way:function(e,t){const r=b({id:e.getAttribute("id"),ndrefs:[],tags:{}},G,e,t);t[t.length-1].ways.push(r)}});const P=x(z,{tag:j});function j(e,t){t[t.length-1].tags[e.getAttribute("k")]=e.getAttribute("v")}var T=class extends D{constructor(){super(),this.dataProjection=(0,d.get)("EPSG:4326")}readFeaturesFromNode(e,t){if(t=this.getReadOptions(e,t),"osm"==e.localName){const r=b({nodes:{},ways:[],features:[]},O,e,[t]);for(let e=0;e<r.ways.length;e++){const n=r.ways[e],o=[];for(let e=0,t=n.ndrefs.length;e<t;e++){const t=r.nodes[n.ndrefs[e]];(0,g.extend)(o,t)}let i;i=n.ndrefs[0]==n.ndrefs[n.ndrefs.length-1]?new(0,m.default)(o,"XY",[o.length]):new(0,c.default)(o,"XY"),(0,h.transformGeometryWithOptions)(i,!1,t);const a=new(0,l.default)(i);void 0!==n.id&&a.setId(n.id),a.setProperties(n.tags,!0),r.features.push(a)}if(r.features)return r.features}return[]}},A=class extends u.default{constructor(e){(e=e||{}).loader=function(e,t,r){return this._loaderFn(e,t,r)},e.attributions||(e.attributions=a.default.ATTRIBUTION),e.strategy||(e.strategy=s.bbox),super(e),this._url=e.url||"https://overpass-api.de/api/interpreter",this._maxResolution=e.maxResolution||100,this._types={node:!1!==e.node,way:!1!==e.way,rel:!0===e.rel},this._filter=e.filter}_loaderFn(e,t,r){if(!(t>this._maxResolution)){var n=this,o=(0,d.transformExtent)(e,r,"EPSG:4326"),i="[bbox:"+(o=o[1]+","+o[0]+","+o[3]+","+o[2])+"][out:xml][timeout:25];";for(var a in i+="(",this._types)if(this._types[a]){i+=a;for(var s,u=0;s=this._filter[u];u++)i+="["+s+"]";i+=";"}i+=");out;>;out skel qt;";var l=new XMLHttpRequest;l.open("POST",this._url,!0),l.onload=function(){for(var e,t=(new T).readFeatures(this.responseText,{featureProjection:r}),o=[],i=0;e=t[i];i++)n.hasFeature(e)||o.push(e);n.addFeatures(o)},l.onerror=function(){console.log(arguments)},l.send("data="+i)}}hasFeature(e){for(var t,r=e.getGeometry().getFirstCoordinate(),n=e.getId(),o=this.getFeaturesInExtent([r[0]-.1,r[1]-.1,r[0]+.1,r[1]+.1]),i=0;t=o[i];i++)if(n===t.getId())return!0;return!1}},R=o("cEuiU"),I=(s=o("gmEQj"),o("5NhYx")),M=o("4GUat"),k=o("h1ihb"),U=o("ej7yC"),q=o("d5AAH"),L=o("2zf1Y");o("e1DCI"),o("5JlsX");var C=o("1B70O"),V=o("jZUWm");var X=o("6yJ0x"),Z=o("5VeMq");(0,V.default)(e('<div> <h2> Day 8: data - OpenStreetMap </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.source.Overpass.html" target="_new"> ol-ext Overpass source </a> to display OSM features on a map (highway=bus_stop). </p> </div>'));const B=new(0,i.default)({source:new(0,a.default)});C.default.addLayer(B),C.default.getView().setZoom(14),C.default.getView().setCenter([452391,6156107]);const Y=new A({filter:["highway=bus_stop"],strategy:(0,s.tile)((0,I.createXYZ)({minZoom:11,maxZoom:11,tileSize:512}))});let Q;(0,U.default)((e=>{Q=new(0,M.default)({image:new(0,k.default)({glyph:"maki-bus",radius:18,displacement:[0,0],fontSize:.8,color:"#00AAFF",fill:new(0,L.default)({color:"#00AAFF"}),stroke:new(0,q.default)({color:[255,255,255],width:2})})})})),C.default.addLayer(new(0,R.default)({name:"OSM",source:Y,maxResolution:20,style:()=>Q}));const W=new(0,Z.default)({positioning:"bottom-center"});C.default.addOverlay(W);const H=new(0,X.default)({cursor:"pointer",hitTolerance:2});H.on("leave",(()=>{W.hide()})),H.on("hover",(e=>{const t=e.feature;t?W.show(e.coordinate,t.get("name")||""):W.hide()})),C.default.addInteraction(H);