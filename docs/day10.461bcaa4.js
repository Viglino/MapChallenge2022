function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},s=e.parcelRequirecc54;null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in n){var e=n[t];delete n[t];var s={id:t,exports:{}};return i[t]=s,e.call(s.exports,s,s.exports),s.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){n[t]=e},e.parcelRequirecc54=s);var r=s("7qsnY"),o=s("20LS2"),a=s("kPMpK"),l=s("1B70O"),h=s("jZUWm");class d{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new d({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var c=d;class g{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new g({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var u=g,f=s("4GUat"),p=s("fnScq"),v=(p=s("fnScq"),class extends p.default{constructor(t){"string"==typeof t&&(t={feoperation:t}),super(),t&&t.feoperation?(this._name=t.feoperation,this.element=document.createElementNS(v.NS||"http://www.w3.org/2000/svg",this._name),this.setProperties(t),t.operations instanceof Array&&this.appendChild(t.operations)):console.error("[SVGOperation]: no operation defined.")}getName(){return this._name}set(t,e){/^feoperation$|^operations$/.test(t)||(super.set(t,e),this.element.setAttribute(t,e))}setProperties(t){for(var e in t=t||{})this.set(e,t[e])}geElement(){return this.element}appendChild(t){t instanceof Array?t.forEach(function(t){this.appendChild(t)}.bind(this)):(t instanceof v||(t=new v(t)),this.element.appendChild(t.geElement()))}}),m=v,A=class extends p.default{constructor(t){t=t||{},super(),A.prototype.svg||(A.prototype.svg=document.createElementNS(this.NS,"svg"),A.prototype.svg.setAttribute("version","1.1"),A.prototype.svg.setAttribute("width",0),A.prototype.svg.setAttribute("height",0),A.prototype.svg.style.position="absolute",document.body.appendChild(A.prototype.svg)),this.element=document.createElementNS(this.NS,"filter"),this._id=t.id||"_ol_SVGFilter_"+A.prototype._id++,this.element.setAttribute("id",this._id),t.color&&this.element.setAttribute("color-interpolation-filters",t.color),t.operation&&this.addOperation(t.operation),A.prototype.svg.appendChild(this.element)}getId(){return this._id}remove(){this.element.remove()}addOperation(t){t instanceof Array?t.forEach(function(t){this.addOperation(t)}.bind(this)):(t instanceof m||(t=new m(t)),this.element.appendChild(t.geElement()))}grayscale(t){this.addOperation({feoperation:"feColorMatrix",type:"saturate",values:t||0})}luminanceToAlpha(t){t=t||{},this.addOperation({feoperation:"feColorMatrix",type:"luminanceToAlpha"}),t.gamma&&this.addOperation({feoperation:"feComponentTransfer",operations:[{feoperation:"feFuncA",type:"gamma",amplitude:t.gamma,exponent:1,offset:0}]})}applyTo(t){var e=document.createElement("CANVAS");return e.width=t.naturalWidth||t.width,e.height=t.naturalHeight||t.height,e.getContext("2d").filter="url(#"+this.getId()+")",e.getContext("2d").drawImage(t,0,0),e}};A.prototype.NS="http://www.w3.org/2000/svg",A.prototype.svg=null,A.prototype._id=0;var y=A,_=class extends y{constructor(t){super({id:(t=t||{}).id}),this.addOperation({feoperation:"feTurbulence",numOctaves:4,seed:0,type:"fractalNoise",baseFrequency:.2/(t.scale||1)}),this.addOperation({feoperation:"feDiffuseLighting","lighting-color":"rgb(255,255,255)",surfaceScale:1.5,kernelUnitLength:.01,diffuseConstant:1.1,result:"paper",operations:[{feoperation:"feDistantLight",elevation:t.light||50,azimuth:75}]}),this.addOperation({feoperation:"feBlend",in:"SourceGraphic",in2:"paper",mode:"multiply"})}setLight(t){this.element.querySelector("feDistantLight").setAttribute("elevation",t)}},C=s("agkzb"),x=class extends C.default{constructor(t){super(),this._svg={},t&&(t instanceof Array||(t=[t]),t.forEach(function(t){this.addSVGFilter(t)}.bind(this)))}addSVGFilter(t){var e="#"+t.getId();this._svg[e]=1,this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})}removeSVGFilter(t){var e="#"+t.getId();delete this._svg[e],this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})}precompose(){}postcompose(t){var e=[];for(var i in this._svg)e.push("url("+i+")");e=e.join(" ");var n=document.createElement("canvas");n.width=t.context.canvas.width,n.height=t.context.canvas.height,n.getContext("2d").drawImage(t.context.canvas,0,0),e&&(t.context.save(),t.context.clearRect(0,0,n.width,n.height),t.context.filter=e,t.context.drawImage(n,0,0),t.context.restore())}},w=s("dUROT"),b=s("6yJ0x"),L=s("btuox"),F=s("7TB1l"),E=s("cgPpQ");s("4EGw0");var D=s("23ytq"),O=(F=s("7TB1l"),s("cgPpQ"),s("ljDIj")),P=(E=s("cgPpQ"),s("63y7W")),S=s("96blb"),M=s("jZquI"),R=s("ee3b9"),I=s("kBSVF"),J=s("ec4vu"),q=s("iTdJV"),B=s("4NB4B"),G=s("2cCpz"),T=s("1jq6X"),U=s("88eMt"),N=s("7Ifzt"),k=s("exEDy");class V extends P.default{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let n=this.getLayout();const s=t,r=[],o=[];for(let t=0,e=s.length;t<e;++t){const e=s[t];0===t&&(n=e.getLayout());const i=r.length,a=e.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=i;(0,I.extend)(r,e.getFlatCoordinates()),o.push(a)}e=n,t=r,i=o}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,I.extend)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,n=e.length;t<n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const i=new V(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<(0,M.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,S.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,S.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,N.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,T.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,G.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,q.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,U.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,J.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new(0,O.default)(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,G.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,G.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,k.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new V(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let t=0,n=i.length;t<n;++t)i[t]-=e;return new(0,E.default)(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let r=0,o=i.length;r<o;++r){const o=i[r].slice(),a=o[o.length-1];if(0!==s)for(let t=0,e=o.length;t<e;++t)o[t]-=s;const l=new(0,E.default)(e.slice(s,a),t,o);n.push(l),s=a}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,B.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,R.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var Q=V;s("4EGw0");D=s("23ytq");Q.prototype.scribbleFill=function(t){var e,i,n,s=[],r=this.getPolygons();for(e=0;i=r[e];e++){var o=i.scribbleFill(t);o&&s.push(o)}if(!s.length)return null;var a,l=s[0];for(e=0;n=s[e];e++){a=n.getLineStrings();for(var h=0;h<a.length;h++)l.appendLineString(a[h])}return l},E.default.prototype.scribbleFill=function(t){var e,i,n,s=t.interval,r=t.angle||Math.PI/2,o=this.clone();o.rotate(r,[0,0]);var a=o.getCoordinates(),l=a[0];for(e=1;e<a.length;e++)l.push([]),l=l.concat(a[e]);for(var h=o.getExtent(),d=[],c=(Math.floor(h[1]/s)+1)*s;c<h[3];c+=s)n=(0,D.ol_coordinate_splitH)(l,c,e),d=d.concat(n);if(!d.length)return null;var g=l.length-1,u=d[0][0].index;for(i=0;n=d[i];i++)d[i][0].index=(d[i][0].index-u+g)%g,d[i][1].index=(d[i][1].index-u+g)%g;for(var f=[];;){for(i=0;(n=d[i])&&n[0].done;i++);if(!n)break;for(var p=[];n;){n[0].done=!0,p.push(n[0].pt),p.push(n[1].pt);for(var v=n[0].pt[1]+s,m=1/0,A=null;d[i]&&!(d[i][0].pt[1]>v);){if(d[i][0].pt[1]===v){var y=Math.min((d[i][0].index-n[0].index+g)%g,(n[0].index-d[i][0].index+g)%g),_=Math.min((n[1].index-n[0].index+g)%g,(n[0].index-n[1].index+g)%g);y<m&&y<_&&(m=y,A=d[i][0].done?null:d[i])}i++}n=A}p.length&&f.push(p)}if(!f.length)return null;var C=new(0,F.default)(f);return C.rotate(-r,[0,0]),C.cspline({pointsPerSeg:8,tension:.9})},Q.prototype.scribbleFill=function(t){var e,i,n,s=[],r=this.getPolygons();for(e=0;i=r[e];e++){var o=i.scribbleFill(t);o&&s.push(o)}if(!s.length)return null;var a,l=s[0];for(e=0;n=s[e];e++){a=n.getLineStrings();for(var h=0;h<a.length;h++)l.appendLineString(a[h])}return l},E.default.prototype.scribbleFill=function(t){var e,i,n,s=t.interval,r=t.angle||Math.PI/2,o=this.clone();o.rotate(r,[0,0]);var a=o.getCoordinates(),l=a[0];for(e=1;e<a.length;e++)l.push([]),l=l.concat(a[e]);for(var h=o.getExtent(),d=[],c=(Math.floor(h[1]/s)+1)*s;c<h[3];c+=s)n=(0,D.ol_coordinate_splitH)(l,c,e),d=d.concat(n);if(!d.length)return null;var g=l.length-1,u=d[0][0].index;for(i=0;n=d[i];i++)d[i][0].index=(d[i][0].index-u+g)%g,d[i][1].index=(d[i][1].index-u+g)%g;for(var f=[];;){for(i=0;(n=d[i])&&n[0].done;i++);if(!n)break;for(var p=[];n;){n[0].done=!0,p.push(n[0].pt),p.push(n[1].pt);for(var v=n[0].pt[1]+s,m=1/0,A=null;d[i]&&!(d[i][0].pt[1]>v);){if(d[i][0].pt[1]===v){var y=Math.min((d[i][0].index-n[0].index+g)%g,(n[0].index-d[i][0].index+g)%g),_=Math.min((n[1].index-n[0].index+g)%g,(n[0].index-n[1].index+g)%g);y<m&&y<_&&(m=y,A=d[i][0].done?null:d[i])}i++}n=A}p.length&&f.push(p)}if(!f.length)return null;var C=new(0,F.default)(f);return C.rotate(-r,[0,0]),C.cspline({pointsPerSeg:8,tension:.9})};var W=function(t,e){switch(t.getType()){case"Polygon":return E.default.prototype.scribbleFill.call(t,e);case"MultiPolygon":return Q.prototype.scribbleFill.call(t,e);default:return t}};function j(t,e){const i=[[31,119,180],[174,199,232],[255,127,14],[255,187,120],[44,160,44],[152,223,138],[214,39,40],[255,152,150],[148,103,189],[197,176,213],[140,86,75],[196,156,148],[227,119,194],[247,182,210],[127,127,127],[199,199,199],[188,189,34],[219,219,141],[23,190,207],[158,218,229]],n=Math.random()*Math.PI;t.set("angle",n);const s=i[Math.floor(Math.random()*i.length)];t.set("color",s);const r=Math.max(8e4,8*e),o={step:r,geom:W(t.getGeometry(),{interval:r,angle:n})};t._scribble=o}function X(t,e){const i=t.get("angle"),n=t.get("color"),s=Math.max(8e4,8*e),r=Math.max(2,2e4/e),o=[new(0,f.default)({stroke:new c({width:.5,color:n}),fill:new u({color:"transparent"})})];let a=t._scribble;return a&&a.step!==s&&(a={step:s,geom:W(t.getGeometry(),{interval:s,angle:i})},t._scribble=a),a&&o.push(new(0,f.default)({stroke:new c({width:r,color:n}),geometry:a.geom})),o}(0,h.default)(t('<div> <h2> Day 10: <strike>bad</strike> child map! </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.filter.Mask.html" target="_new"> ol-ext Scribble fill </a> to color countries on the map. </p> </div>'));var z=new(0,r.default)({source:new(0,o.default)({url:"https://openlayers.org/en/v4.6.5/examples/data/geojson/countries.geojson",format:new(0,a.default)}),style:X});l.default.addLayer(z);var Y=new x,H=new _({scale:2,light:60});Y.addSVGFilter(H),z.addFilter(Y),l.default.addInteraction(new(0,b.default)({cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAihJREFUWEftlr/LEnEcx193KTQ89JQEDSKELi03BIbQ1uKQptAQYqtbQtDUIBHV2BCIgejk4B8guuhSBs8YYUGoCEa2nSbR8JCHxsfnDtSyu+qo5b7LHXfv7+f9+r6/P+4UnLUacAk4B2jAsbNu9irFXrJWjIE4cNfU33HYz1ZmB6ACOeAxcAE4DbwD7gEN2+oOBPsAXgHPgPM+n++5YRgCkgRaQB0YAA8d1LeV7AIcAq+BsKIoH0Oh0KGmaWfC4TDFYlGKCcQVs6rrAE+A+4CqqurnWCymNhqNs9FolHa7zXA4JJkU/3UCQzcTkFEfmascRVGWmUzmuF6vHwwGA+LxOOOxrEFotVqbELdt83UgkCkwTN0pueZyuVWlUllPTbVapdvtUqvJLjxpGxDWmnBgs18iRivrdSAQYDqdbqlHoxGRSGTrmZsQWwCaptHr9RyNyC2ILQBxbjabJBKJfwaxC/BWjlqnEOVymXw+/80wjJvmGeEIfFO0C/ACeHoSxK+TKBQKq1Kp9Gk+n98A3vy2s9lBAJaAdSAJwDVA5mAvRDab/drpdN7run4d0P/UXPqJ8UvgKuADLAB59wOEruukUql5v9/vzGazW39jbPW1Ri57L7ADsAURDAZJp9NfJpNJcblcFtwwtxKQ62XzG/ABuLhTfJ2E3+83FotFHii7Zb4JIPePgAd7ilv7Ur6Grja7/wFXzX5WzAPwEvAS8BLwEvAS+O8JfAcOZLAhCzd6QAAAAABJRU5ErkJggg==") 0 13, auto'}));const K=new(0,w.default)({style:X,condition:L.click});function Z(){const t=l.default.getView().calculateExtent(),e=[(t[0]+t[2])/2+(Math.random()-.5)*(t[2]-t[0])/2,(t[1]+t[3])/2+(Math.random()-.5)*(t[3]-t[1])/2],i=l.default.getFeaturesAtPixel(l.default.getPixelFromCoordinate(e)).pop();i?(j(i,l.default.getView().getResolution()),$=setTimeout(Z,2e3*Math.random()+500)):$=setTimeout(Z)}l.default.addInteraction(K),K.on("select",(t=>{t.selected.forEach((t=>{j(t,l.default.getView().getResolution()),clearTimeout($),$=setTimeout(Z,2e3*Math.random()+3e3)})),K.getFeatures().clear()}));let $=setTimeout(Z,1e3);