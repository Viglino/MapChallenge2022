function t(t){return t&&t.__esModule?t.default:t}function e(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},o=i.parcelRequirecc54;null==o&&((o=function(t){if(t in s)return s[t].exports;if(t in n){var e=n[t];delete n[t];var i={id:t,exports:{}};return s[t]=i,e.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){n[t]=e},i.parcelRequirecc54=o),o.register("2YyN3",(function(i,s){e(i.exports,"default",(()=>d));var n=o("2K2IB"),r=o("4wfAy"),a=o("l9IGS"),l=o("77Abf");const h="renderOrder";class c extends n.default{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(h)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new(t(r))(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(t){this.set(h,t)}setStyle(t){let e;if(void 0===t)e=a.createDefaultStyle;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof a.default)e=t;else if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let e=0;e<i;++e){const i=t[e];i instanceof a.default?s[e]=i:s[e]=(0,l.toStyle)(i)}e=s}else e=(0,l.toStyle)(t);this.style_=e,this.styleFunction_=null===t?void 0:(0,a.toFunction)(this.style_),this.changed()}}var d=c})),o.register("4wfAy",(function(t,e){t.exports,t.exports=function(){function t(t,s,n,o,r){!function t(i,s,n,o,r){for(;o>n;){if(o-n>600){var a=o-n+1,l=s-n+1,h=Math.log(a),c=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1);t(i,s,Math.max(n,Math.floor(s-l*c/a+d)),Math.min(o,Math.floor(s+(a-l)*c/a+d)),r)}var u=i[s],g=n,f=o;for(e(i,n,s),r(i[o],u)>0&&e(i,n,o);g<f;){for(e(i,g,f),g++,f--;r(i[g],u)<0;)g++;for(;r(i[f],u)>0;)f--}0===r(i[n],u)?e(i,n,f):e(i,++f,o),f<=s&&(n=f+1),s<=f&&(o=f-1)}}(t,s,n||0,o||t.length-1,r||i)}function e(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function i(t,e){return t<e?-1:t>e?1:0}var s=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function o(t,e){r(t,0,t.children.length,e,t)}function r(t,e,i,s,n){n||(n=f(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=e;o<i;o++){var r=t.children[o];a(n,t.leaf?s(r):r)}return n}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(e,i,s,n,o){for(var r=[i,s];r.length;)if(!((s=r.pop())-(i=r.pop())<=n)){var a=i+Math.ceil((s-i)/n/2)*n;t(e,a,i,s,o),r.push(i,a,a,s)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(t){var e=this.data,i=[];if(!g(t,e))return i;for(var s=this.toBBox,n=[];e;){for(var o=0;o<e.children.length;o++){var r=e.children[o],a=e.leaf?s(r):r;g(t,a)&&(e.leaf?i.push(r):u(t,a)?this._all(r,i):n.push(r))}e=n.pop()}return i},s.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var i=[];e;){for(var s=0;s<e.children.length;s++){var n=e.children[s],o=e.leaf?this.toBBox(n):n;if(g(t,o)){if(e.leaf||u(t,o))return!0;i.push(n)}}e=i.pop()}return!1},s.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},s.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},s.prototype.clear=function(){return this.data=f([]),this},s.prototype.remove=function(t,e){if(!t)return this;for(var i,s,o,r=this.data,a=this.toBBox(t),l=[],h=[];r||l.length;){if(r||(r=l.pop(),s=l[l.length-1],i=h.pop(),o=!0),r.leaf){var c=n(t,r.children,e);if(-1!==c)return r.children.splice(c,1),l.push(r),this._condense(l),this}o||r.leaf||!u(r,a)?s?(i++,r=s.children[i],o=!1):r=null:(l.push(r),h.push(i),i=0,s=r,r=r.children[0])}return this},s.prototype.toBBox=function(t){return t},s.prototype.compareMinX=function(t,e){return t.minX-e.minX},s.prototype.compareMinY=function(t,e){return t.minY-e.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(t){return this.data=t,this},s.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},s.prototype._build=function(t,e,i,s){var n,r=i-e+1,a=this._maxEntries;if(r<=a)return o(n=f(t.slice(e,i+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,s-1))),(n=f([])).leaf=!1,n.height=s;var l=Math.ceil(r/a),h=l*Math.ceil(Math.sqrt(a));_(t,e,i,h,this.compareMinX);for(var c=e;c<=i;c+=h){var d=Math.min(c+h-1,i);_(t,c,d,l,this.compareMinY);for(var u=c;u<=d;u+=l){var g=Math.min(u+l-1,d);n.children.push(this._build(t,u,g,s-1))}}return o(n,this.toBBox),n},s.prototype._chooseSubtree=function(t,e,i,s){for(;s.push(e),!e.leaf&&s.length-1!==i;){for(var n=1/0,o=1/0,r=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=c(l),d=(u=t,g=l,(Math.max(g.maxX,u.maxX)-Math.min(g.minX,u.minX))*(Math.max(g.maxY,u.maxY)-Math.min(g.minY,u.minY))-h);d<o?(o=d,n=h<n?h:n,r=l):d===o&&h<n&&(n=h,r=l)}e=r||e.children[0]}var u,g;return e},s.prototype._insert=function(t,e,i){var s=i?t:this.toBBox(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),a(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},s.prototype._split=function(t,e){var i=t[e],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);var r=this._chooseSplitIndex(i,n,s),a=f(i.children.splice(r,i.children.length-r));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},s.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(t,e,i){for(var s,n,o,a,l,h,d,u=1/0,g=1/0,f=e;f<=i-e;f++){var _=r(t,0,f,this.toBBox),x=r(t,f,i,this.toBBox),m=(n=_,o=x,a=void 0,l=void 0,h=void 0,d=void 0,a=Math.max(n.minX,o.minX),l=Math.max(n.minY,o.minY),h=Math.min(n.maxX,o.maxX),d=Math.min(n.maxY,o.maxY),Math.max(0,h-a)*Math.max(0,d-l)),p=c(_)+c(x);m<u?(u=m,s=f,g=p<g?p:g):m===u&&p<g&&(g=p,s=f)}return s||i-e},s.prototype._chooseSplitAxis=function(t,e,i){var s=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,n)&&t.children.sort(s)},s.prototype._allDistMargin=function(t,e,i,s){t.children.sort(s);for(var n=this.toBBox,o=r(t,0,e,n),l=r(t,i-e,i,n),h=d(o)+d(l),c=e;c<i-e;c++){var u=t.children[c];a(o,t.leaf?n(u):u),h+=d(o)}for(var g=i-e-1;g>=e;g--){var f=t.children[g];a(l,t.leaf?n(f):f),h+=d(l)}return h},s.prototype._adjustParentBBoxes=function(t,e,i){for(var s=i;s>=0;s--)a(e[s],t)},s.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},s}()})),o.register("77Abf",(function(t,i){e(t.exports,"toStyle",(()=>d));var s=o("4lFOe"),n=o("2zf1Y"),r=o("ayeEa"),a=o("h6Aha"),l=o("d5AAH"),h=o("l9IGS"),c=o("kuKBR");function d(t){return new(0,h.default)({fill:u(t,""),stroke:g(t,""),text:f(t),image:_(t)})}function u(t,e){const i=t[e+"fill-color"];if(i)return new(0,n.default)({color:i})}function g(t,e){const i=t[e+"stroke-width"],s=t[e+"stroke-color"];if(i||s)return new(0,l.default)({width:i,color:s,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function f(t){const e=t["text-value"];if(!e)return;return new(0,c.default)({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:u(t,"text-"),backgroundFill:u(t,"text-background-"),stroke:g(t,"text-"),backgroundStroke:g(t,"text-background-")})}function _(t){const e=t["icon-src"],i=t["icon-img"];if(e||i){return new(0,r.default)({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]})}const n=t["shape-points"];if(n){const e="shape-";return new(0,a.default)({points:n,fill:u(t,e),stroke:g(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const o=t["circle-radius"];if(o){const e="circle-";return new(0,s.default)({radius:o,fill:u(t,e),stroke:g(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}})),o.register("ayeEa",(function(t,i){e(t.exports,"default",(()=>u));var s=o("cw4dl"),n=o("50PZ9"),r=o("9yR4T"),a=o("lqNjm"),l=o("eJ4LZ"),h=o("9c0bz"),c=o("lVQul");class d extends r.default{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,s=void 0!==t.scale?t.scale:1,o=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:s,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const r=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let d=t.src;(0,l.assert)(!(void 0!==d&&r),4),(0,l.assert)(!r||r&&this.imgSize_,5),void 0!==d&&0!==d.length||!r||(d=r.src||(0,c.getUid)(r)),(0,l.assert)(void 0!==d&&d.length>0,6);const u=void 0!==t.src?n.default.IDLE:n.default.LOADED;this.color_=void 0!==t.color?(0,a.asArray)(t.color):null,this.iconImage_=(0,h.get)(r,d,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,u,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new d({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(s.default.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(s.default.CHANGE,t)}}var u=d})),o.register("9c0bz",(function(t,i){e(t.exports,"get",(()=>g));var s=o("9LzRi"),n=o("cw4dl"),r=o("50PZ9"),a=o("lqNjm"),l=o("cgxQK"),h=o("1Guxd"),c=o("kUxvm");let d=null;class u extends s.default{constructor(t,e,i,s,n,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=n,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===r.default.LOADED){d||(d=(0,l.createCanvasContext2D)(1,1)),d.drawImage(this.image_,0,0);try{d.getImageData(0,0,1,1),this.tainted_=!1}catch(t){d=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(n.default.CHANGE)}handleImageError_(){this.imageState_=r.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=r.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,l.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===r.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=r.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,c.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==r.default.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=(0,a.asString)(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function g(t,e,i,s,n,o){let r=h.shared.get(e,s,o);return r||(r=new u(t,e,i,s,n,o),h.shared.set(e,s,o,r)),r}})),o.register("8vXOK",(function(t,i){e(t.exports,"default",(()=>c));var s=o("hycMe"),n=o("6sg4t"),r=o("1aWBL"),a=o("jODk1"),l=o("a0SEX");const h={Circle:a.default,Default:s.default,Image:n.default,LineString:r.default,Polygon:a.default,Text:l.default};var c=class{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const n=i[s].finish();t[e][s]=n}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let n=s[e];if(void 0===n){n=new(0,h[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=n}return n}}})),o.register("hycMe",(function(t,i){e(t.exports,"default",(()=>g));var s=o("2CzCP"),n=o("iweSO"),r=o("eGc18"),a=o("hlW0i"),l=o("jZquI"),h=o("aHG4Z"),c=o("kBSVF"),d=o("iTdJV");class u extends r.default{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,n=this.coordinates;let o=n.length;for(let r=0,a=t.length;r<a;r+=e)s[0]=t[r],s[1]=t[r+1],(0,l.containsCoordinate)(i,s)&&(n[o++]=s[0],n[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,o,r){const a=this.coordinates;let h=a.length;const c=this.getBufferedMaxExtent();r&&(e+=s);let d=t[e],u=t[e+1];const g=this.tmpCoordinate_;let f,_,x,m=!0;for(f=e+s;f<i;f+=s)g[0]=t[f],g[1]=t[f+1],x=(0,l.coordinateRelationship)(c,g),x!==_?(m&&(a[h++]=d,a[h++]=u,m=!1),a[h++]=g[0],a[h++]=g[1]):x===n.default.INTERSECTING?(a[h++]=g[0],a[h++]=g[1],m=!1):m=!0,d=g[0],u=g[1],_=x;return(o&&m||f===e+s)&&(a[h++]=d,a[h++]=u),h}drawCustomCoordinates_(t,e,i,s,n){for(let o=0,r=i.length;o<r;++o){const r=i[o],a=this.appendFlatLineCoordinates(t,e,r,s,!1,!1);n.push(a),e=r}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const o=t.getType(),r=t.getStride(),a=this.coordinates.length;let l,h,c,u,g;switch(o){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),u=[];const e=t.getEndss();g=0;for(let t=0,i=e.length;t<i;++t){const i=[];g=this.drawCustomCoordinates_(l,g,e[t],r,i),u.push(i)}this.instructions.push([s.default.CUSTOM,a,u,t,i,d.inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([s.default.CUSTOM,a,u,t,n||i,d.inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":c=[],l="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),g=this.drawCustomCoordinates_(l,0,t.getEnds(),r,c),this.instructions.push([s.default.CUSTOM,a,c,t,i,d.inflateCoordinatesArray]),this.hitDetectionInstructions.push([s.default.CUSTOM,a,c,t,n||i,d.inflateCoordinatesArray]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,r,!1,!1),this.instructions.push([s.default.CUSTOM,a,h,t,i,d.inflateCoordinates]),this.hitDetectionInstructions.push([s.default.CUSTOM,a,h,t,n||i,d.inflateCoordinates]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,r),h>a&&(this.instructions.push([s.default.CUSTOM,a,h,t,i,d.inflateCoordinates]),this.hitDetectionInstructions.push([s.default.CUSTOM,a,h,t,n||i,d.inflateCoordinates]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([s.default.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([s.default.CUSTOM,a,h,t,n||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[s.default.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[s.default.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,o,r=-1;for(e=0;e<i;++e)n=t[e],o=n[0],o==s.default.END_GEOMETRY?r=e:o==s.default.BEGIN_GEOMETRY&&(n[2]=e,(0,c.reverseSubArray)(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=(0,a.asColorLike)(e||h.defaultFillStyle)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,a.asColorLike)(t||h.defaultStrokeStyle);const s=e.getLineCap();i.lineCap=void 0!==s?s:h.defaultLineCap;const n=e.getLineDash();i.lineDash=n?n.slice():h.defaultLineDash;const o=e.getLineDashOffset();i.lineDashOffset=o||h.defaultLineDashOffset;const r=e.getLineJoin();i.lineJoin=void 0!==r?r:h.defaultLineJoin;const l=e.getWidth();i.lineWidth=void 0!==l?l:h.defaultLineWidth;const c=e.getMiterLimit();i.miterLimit=void 0!==c?c:h.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[s.default.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[s.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,n=t.lineDash,o=t.lineDashOffset,r=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||n!=t.currentLineDash&&!(0,c.equals)(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=r||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=r,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[s.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,l.clone)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,l.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var g=u})),o.register("2CzCP",(function(t,i){e(t.exports,"fillInstruction",(()=>n)),e(t.exports,"strokeInstruction",(()=>o)),e(t.exports,"beginPathInstruction",(()=>r)),e(t.exports,"closePathInstruction",(()=>a)),e(t.exports,"default",(()=>l));const s={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},n=[s.FILL],o=[s.STROKE],r=[s.BEGIN_PATH],a=[s.CLOSE_PATH];var l=s})),o.register("eGc18",(function(t,i){e(t.exports,"default",(()=>s));var s=class{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}})),o.register("6sg4t",(function(t,i){e(t.exports,"default",(()=>a));var s=o("hycMe"),n=o("2CzCP");class r extends s.default{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,s);this.instructions.push([n.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,s);this.instructions.push([n.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var a=r})),o.register("1aWBL",(function(t,i){e(t.exports,"default",(()=>l));var s=o("hycMe"),n=o("2CzCP"),r=o("aHG4Z");class a extends s.default{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const o=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[n.default.MOVE_TO_LINE_TO,o,r];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(void 0===s||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,r.defaultLineDash,r.defaultLineDashOffset],n.beginPathInstruction);const a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(n.strokeInstruction),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(void 0===s||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],n.beginPathInstruction);const r=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let h=0;for(let t=0,e=r.length;t<e;++t)h=this.drawFlatCoordinates_(a,h,r[t],l);this.hitDetectionInstructions.push(n.strokeInstruction),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(n.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(n.strokeInstruction),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(n.beginPathInstruction)}}var l=a})),o.register("jODk1",(function(t,i){e(t.exports,"default",(()=>h));var s=o("hycMe"),n=o("2CzCP"),r=o("aHG4Z"),a=o("exEDy");class l extends s.default{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const o=this.state,r=void 0!==o.fillStyle,a=void 0!==o.strokeStyle,l=i.length;this.instructions.push(n.beginPathInstruction),this.hitDetectionInstructions.push(n.beginPathInstruction);for(let o=0;o<l;++o){const r=i[o],l=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,r,s,!0,!a),c=[n.default.MOVE_TO_LINE_TO,l,h];this.instructions.push(c),this.hitDetectionInstructions.push(c),a&&(this.instructions.push(n.closePathInstruction),this.hitDetectionInstructions.push(n.closePathInstruction)),e=r}return r&&(this.instructions.push(n.fillInstruction),this.hitDetectionInstructions.push(n.fillInstruction)),a&&(this.instructions.push(n.strokeInstruction),this.hitDetectionInstructions.push(n.strokeInstruction)),e}drawCircle(t,e){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,r.defaultFillStyle]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[n.default.CIRCLE,h];this.instructions.push(n.beginPathInstruction,c),this.hitDetectionInstructions.push(n.beginPathInstruction,c),void 0!==i.fillStyle&&(this.instructions.push(n.fillInstruction),this.hitDetectionInstructions.push(n.fillInstruction)),void 0!==i.strokeStyle&&(this.instructions.push(n.strokeInstruction),this.hitDetectionInstructions.push(n.strokeInstruction)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,r.defaultFillStyle]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,a,h),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,r.defaultFillStyle]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride();let c=0;for(let t=0,e=a.length;t<e;++t)c=this.drawFlatCoordinatess_(l,c,a[t],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=(0,a.snap)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var h=l})),o.register("a0SEX",(function(t,i){e(t.exports,"TEXT_ALIGN",(()=>d)),e(t.exports,"default",(()=>g));var s=o("hycMe"),n=o("2CzCP"),r=o("hlW0i"),a=o("aHG4Z"),l=o("lVQul"),h=o("jZquI"),c=o("b6jom");const d={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class u extends s.default{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(""===this.text_||!o||!i&&!s)return;const r=this.coordinates;let l=r.length;const d=t.getType();let u=null,g=t.getStride();if("line"!==o.placement||"LineString"!=d&&"MultiLineString"!=d&&"Polygon"!=d&&"MultiPolygon"!=d){let i=o.overflow?null:[];switch(d){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),g=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||i.push(u[2]/this.resolution),g=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();u=[];for(let t=0,s=e.length;t<s;t+=3)o.overflow||i.push(e[t+2]/this.resolution),u.push(e[t],e[t+1]);if(0===u.length)return;g=2}const s=this.appendFlatPointCoordinates(u,g);if(s===l)return;if(i&&(s-l)/2!=u.length/g){let t=l/2;i=i.filter(((e,i)=>{const s=r[2*(t+i)]===u[i*g]&&r[2*(t+i)+1]===u[i*g+1];return s||--t,s}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let h=o.padding;if(h!=a.defaultPadding&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],i=o.padding[2],s=o.padding[3];o.scale[0]<0&&(e=-e,s=-s),o.scale[1]<0&&(t=-t,i=-i),h=[t,e,i,s]}const c=this.pixelRatio;this.instructions.push([n.default.DRAW_IMAGE,l,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,h==a.defaultPadding?a.defaultPadding:h.map((function(t){return t*c})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const f=1/c;this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,l,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[f,f],NaN,void 0,this.declutterImageWithText_,h,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!(0,h.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(u=t.getFlatCoordinates(),"LineString"==d)i=[u.length];else if("MultiLineString"==d)i=t.getEnds();else if("Polygon"==d)i=t.getEnds().slice(0,1);else if("MultiPolygon"==d){const e=t.getEndss();i=[];for(let t=0,s=e.length;t<s;++t)i.push(e[t][0])}this.beginGeometry(t,e);const s=o.textAlign;let n,a=0;for(let t=0,e=i.length;t<e;++t){if(null==s){const e=(0,c.matchingChunk)(o.maxAngle,u,a,i[t],g);a=e[0],n=e[1]}else n=i[t];for(let t=a;t<n;t+=g)r.push(u[t],u[t+1]);const e=r.length;a=i[t],this.drawChars_(l,e),l=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||a.defaultTextAlign,justify:e.justify,textBaseline:e.textBaseline||a.defaultTextBaseline,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,r=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=d[s.textBaseline],c=this.textOffsetY_*l,u=this.text_,g=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([n.default.DRAW_CHARS,t,e,h,s.overflow,a,s.maxAngle,l,c,o,g*l,u,r,1]),this.hitDetectionInstructions.push([n.default.DRAW_CHARS,t,e,h,s.overflow,a,s.maxAngle,1,c,o,g,u,r,1/l])}setTextStyle(t,e){let i,s,n;if(t){const e=t.getFill();e?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=(0,r.asColorLike)(e.getColor()||a.defaultFillStyle)):(s=null,this.textFillState_=s);const o=t.getStroke();if(o){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const t=o.getLineDash(),e=o.getLineDashOffset(),i=o.getWidth(),s=o.getMiterLimit();n.lineCap=o.getLineCap()||a.defaultLineCap,n.lineDash=t?t.slice():a.defaultLineDash,n.lineDashOffset=void 0===e?a.defaultLineDashOffset:e,n.lineJoin=o.getLineJoin()||a.defaultLineJoin,n.lineWidth=void 0===i?a.defaultLineWidth:i,n.miterLimit=void 0===s?a.defaultMiterLimit:s,n.strokeStyle=(0,r.asColorLike)(o.getColor()||a.defaultStrokeStyle)}else n=null,this.textStrokeState_=n;i=this.textState_;const h=t.getFont()||a.defaultFont;(0,a.registerFont)(h);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=h,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||a.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||a.defaultPadding,i.scale=void 0===c?[1,1]:c;const d=t.getOffsetX(),u=t.getOffsetY(),g=t.getRotateWithView(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===f?0:f,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,l.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,l.getUid)(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}var g=u})),o.register("b6jom",(function(t,i){function s(t,e,i,s,n){let o,r,a,l,h,c,d,u,g,f,_=i,x=i,m=0,p=0,S=i;for(r=i;r<s;r+=n){const i=e[r],s=e[r+1];void 0!==h&&(g=i-h,f=s-c,l=Math.sqrt(g*g+f*f),void 0!==d&&(p+=a,o=Math.acos((d*g+u*f)/(a*l)),o>t&&(p>m&&(m=p,_=S,x=r),p=0,S=r-n)),a=l,d=g,u=f),h=i,c=s}return p+=l,p>m?[S,r]:[_,x]}e(t.exports,"matchingChunk",(()=>s))})),o.register("dVSax",(function(t,i){e(t.exports,"default",(()=>g));var s=o("c46kz"),n=o("jZquI"),r=o("14PDX"),a=o("cgxQK"),l=o("kKEgb"),h=o("kBSVF"),c=o("bsQCi");const d=["Polygon","Circle","LineString","Image","Text","Default"];const u={};var g=class{constructor(t,e,i,s,n,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,r.create)(),this.createExecutors_(n)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const t in n){const e=n[t];i[t]=new(0,s.default)(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,s=t.length;e<s;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,o,l){const c=2*(s=Math.round(s))+1,g=(0,r.compose)(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),f=!this.hitDetectionContext_;f&&(this.hitDetectionContext_=(0,a.createCanvasContext2D)(c,c));const _=this.hitDetectionContext_;let x;_.canvas.width!==c||_.canvas.height!==c?(_.canvas.width=c,_.canvas.height=c):f||_.clearRect(0,0,c,c),void 0!==this.renderBuffer_&&(x=(0,n.createEmpty)(),(0,n.extendCoordinate)(x,t),(0,n.buffer)(x,e*(this.renderBuffer_+s),x));const m=function(t){if(void 0!==u[t])return u[t];const e=2*t+1,i=t*t,s=new Array(i+1);for(let n=0;n<=t;++n)for(let o=0;o<=t;++o){const r=n*n+o*o;if(r>i)break;let a=s[r];a||(a=[],s[r]=a),a.push(4*((t+n)*e+(t+o))+3),n>0&&a.push(4*((t-n)*e+(t+o))+3),o>0&&(a.push(4*((t+n)*e+(t-o))+3),n>0&&a.push(4*((t-n)*e+(t-o))+3))}const n=[];for(let t=0,e=s.length;t<e;++t)s[t]&&n.push(...s[t]);return u[t]=n,n}(s);let p;function S(t,e){const i=_.getImageData(0,0,c,c).data;for(let n=0,r=m.length;n<r;n++)if(i[m[n]]>0){if(!l||"Image"!==p&&"Text"!==p||l.includes(t)){const i=(m[n]-3)/4,r=s-i%c,a=s-(i/c|0),l=o(t,e,r*r+a*a);if(l)return l}_.clearRect(0,0,c,c);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);let I,v,C,T,k;for(y.sort(h.numberSafeCompareFunction),I=y.length-1;I>=0;--I){const t=y[I].toString();for(C=this.executorsByZIndex_[t],v=d.length-1;v>=0;--v)if(p=d[v],T=C[p],void 0!==T&&(k=T.executeHitDetection(_,g,i,S,x),k))return k}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],n=e[2],o=e[3],r=[i,s,i,o,n,o,n,s];return(0,c.transform2D)(r,0,8,2,t,r),r}isEmpty(){return(0,l.isEmpty)(this.executorsByZIndex_)}execute(t,e,i,s,n,o,r){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,c,u,g,f,_;for(a.sort(h.numberSafeCompareFunction),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||d,r&&a.reverse(),l=0,c=a.length;l<c;++l){const h=a[l].toString();for(f=this.executorsByZIndex_[h],u=0,g=o.length;u<g;++u){_=f[o[u]],void 0!==_&&_.execute(t,e,i,s,n,r)}}this.maxExtent_&&t.restore()}}})),o.register("c46kz",(function(t,i){e(t.exports,"default",(()=>v));var s=o("2CzCP"),n=o("a0SEX"),r=o("14PDX"),a=o("jZquI"),l=o("aHG4Z"),h=o("2soc3"),c=o("kBSVF"),d=o("aSafW"),u=o("bsQCi");const g=(0,a.createEmpty)(),f=[],_=[],x=[],m=[];function p(t){return t[3].declutterBox}const S=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function y(t,e){return"start"!==e&&"end"!==e||S.test(t)||(e="start"===e?"left":"right"),n.TEXT_ALIGN[e]}function I(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var v=class{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,r.create)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const o=t+e+i+s;if(this.labels_[o])return this.labels_[o];const r=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,h=this.textStates[e],c=this.pixelRatio,d=[h.scale[0]*c,h.scale[1]*c],u=Array.isArray(t),g=h.justify?n.TEXT_ALIGN[h.justify]:y(Array.isArray(t)?t[0]:t,h.textAlign||l.defaultTextAlign),f=s&&r.lineWidth?r.lineWidth:0,_=u?t:t.split("\n").reduce(I,[]),{width:x,height:m,widths:p,heights:S,lineWidths:v}=(0,l.getTextDimensions)(h,_),C=x+f,T=[],k=(C+2)*d[0],D=(m+f)*d[1],E={width:k<0?Math.floor(k):Math.ceil(k),height:D<0?Math.floor(D):Math.ceil(D),contextInstructions:T};1==d[0]&&1==d[1]||T.push("scale",d),s&&(T.push("strokeStyle",r.strokeStyle),T.push("lineWidth",f),T.push("lineCap",r.lineCap),T.push("lineJoin",r.lineJoin),T.push("miterLimit",r.miterLimit),T.push("setLineDash",[r.lineDash]),T.push("lineDashOffset",r.lineDashOffset)),i&&T.push("fillStyle",a.fillStyle),T.push("textBaseline","middle"),T.push("textAlign","center");const w=.5-g;let L=g*C+w*f;const O=[],R=[];let M,b=0,F=0,A=0,P=0;for(let t=0,e=_.length;t<e;t+=2){const e=_[t];if("\n"===e){F+=b,b=0,L=g*C+w*f,++P;continue}const n=_[t+1]||h.font;n!==M&&(s&&O.push("font",n),i&&R.push("font",n),M=n),b=Math.max(b,S[A]);const o=[e,L+w*p[A]+g*(p[A]-v[P]),.5*(f+b)+F];L+=p[A],s&&O.push("strokeText",o),i&&R.push("fillText",o),++A}return Array.prototype.push.apply(T,O),Array.prototype.push.apply(T,R),this.labels_[o]=E,E}replayTextBackground_(t,e,i,s,n,o,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,n,o,l,h,c,d,u,p,S,y,I,v){let C=i-(l*=p[0]),T=s-(h*=p[1]);const k=n+c>t?t-c:n,D=o+d>e?e-d:o,E=y[3]+k*p[0]+y[1],w=y[0]+D*p[1]+y[2],L=C-y[3],O=T-y[0];let R;return(I||0!==u)&&(f[0]=L,m[0]=L,f[1]=O,_[1]=O,_[0]=L+E,x[0]=_[0],x[1]=O+w,m[1]=x[1]),0!==u?(R=(0,r.compose)((0,r.create)(),i,s,1,1,u,-i,-s),(0,r.apply)(R,f),(0,r.apply)(R,_),(0,r.apply)(R,x),(0,r.apply)(R,m),(0,a.createOrUpdate)(Math.min(f[0],_[0],x[0],m[0]),Math.min(f[1],_[1],x[1],m[1]),Math.max(f[0],_[0],x[0],m[0]),Math.max(f[1],_[1],x[1],m[1]),g)):(0,a.createOrUpdate)(Math.min(L,L+E),Math.min(O,O+w),Math.max(L,L+E),Math.max(O,O+w),g),S&&(C=Math.round(C),T=Math.round(T)),{drawImageX:C,drawImageY:T,drawImageW:k,drawImageH:D,originX:c,originY:d,declutterBox:{minX:g[0],minY:g[1],maxX:g[2],maxY:g[3],value:v},canvasTransform:R,scale:p}}replayImageOrLabel_(t,e,i,s,n,o,r){const a=!(!o&&!r),h=s.declutterBox,c=t.canvas,d=r?r[2]*s.scale[0]/2:0;return h.minX-d<=c.width/e&&h.maxX+d>=0&&h.minY-d<=c.height/e&&h.maxY+d>=0&&(a&&this.replayTextBackground_(t,f,_,x,m,o,r),(0,l.drawImageOrLabel)(t,s.canvasTransform,n,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,r.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const o=this.textStates[e],r=this.createLabel(t,e,s,i),a=this.strokeStates[i],h=this.pixelRatio,c=y(Array.isArray(t)?t[0]:t,o.textAlign||l.defaultTextAlign),d=n.TEXT_ALIGN[o.textBaseline||l.defaultTextBaseline],u=a&&a.lineWidth?a.lineWidth:0;return{label:r,anchorX:c*(r.width/h-2*o.scale[0])+2*(.5-c)*u,anchorY:d*r.height/h+2*(.5-d)*u}}execute_(t,e,i,o,g,f,_,x){let m;this.pixelCoordinates_&&(0,c.equals)(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,u.transform2D)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,r.setFromArray)(this.renderedTransform_,i));let S=0;const y=o.length;let I,v,C,T,k,D,E,w,L,O,R,M,b=0,F=0,A=0,P=null,W=null;const B=this.coordinateCache_,G=this.viewRotation_,Y=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,X={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},N=this.instructions!=o||this.overlaps?0:200;let z,U,H,V;for(;S<y;){const i=o[S];switch(i[0]){case s.default.BEGIN_GEOMETRY:z=i[1],V=i[3],z.getGeometry()?void 0===_||(0,a.intersects)(_,V.getExtent())?++S:S=i[2]+1:S=i[2];break;case s.default.BEGIN_PATH:F>N&&(this.fill_(t),F=0),A>N&&(t.stroke(),A=0),F||A||(t.beginPath(),T=NaN,k=NaN),++S;break;case s.default.CIRCLE:b=i[1];const o=m[b],r=m[b+1],c=m[b+2]-o,u=m[b+3]-r,y=Math.sqrt(c*c+u*u);t.moveTo(o+y,r),t.arc(o,r,y,0,2*Math.PI,!0),++S;break;case s.default.CLOSE_PATH:t.closePath(),++S;break;case s.default.CUSTOM:b=i[1],I=i[2];const Z=i[3],J=i[4],q=6==i.length?i[5]:void 0;X.geometry=Z,X.feature=z,S in B||(B[S]=[]);const j=B[S];q?q(m,b,I,2,j):(j[0]=m[b],j[1]=m[b+1],j.length=2),J(j,X),++S;break;case s.default.DRAW_IMAGE:b=i[1],I=i[2],w=i[3],v=i[4],C=i[5];let K=i[6];const Q=i[7],$=i[8],tt=i[9],et=i[10];let it=i[11];const st=i[12];let nt=i[13];const ot=i[14],rt=i[15];if(!w&&i.length>=20){L=i[19],O=i[20],R=i[21],M=i[22];const t=this.drawLabelWithPointPlacement_(L,O,R,M);w=t.label,i[3]=w;const e=i[23];v=(t.anchorX-e)*this.pixelRatio,i[4]=v;const s=i[24];C=(t.anchorY-s)*this.pixelRatio,i[5]=C,K=w.height,i[6]=K,nt=w.width,i[13]=nt}let at,lt,ht,ct;i.length>25&&(at=i[25]),i.length>17?(lt=i[16],ht=i[17],ct=i[18]):(lt=l.defaultPadding,ht=!1,ct=!1),et&&Y?it+=G:et||Y||(it-=G);let dt=0;for(;b<I;b+=2){if(at&&at[dt++]<nt/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(w.width,w.height,m[b],m[b+1],nt,K,v,C,$,tt,it,st,g,lt,ht||ct,z),s=[t,e,w,i,Q,ht?P:null,ct?W:null];if(x){if("none"===ot)continue;if("obstacle"===ot){x.insert(i.declutterBox);continue}{let t,e;if(rt){const i=I-b;if(!rt[i]){rt[i]=s;continue}if(t=rt[i],delete rt[i],e=p(t),x.collides(e))continue}if(x.collides(i.declutterBox))continue;t&&(x.insert(e),this.replayImageOrLabel_.apply(this,t)),x.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,s)}++S;break;case s.default.DRAW_CHARS:const ut=i[1],gt=i[2],ft=i[3],_t=i[4];M=i[5];const xt=i[6],mt=i[7],pt=i[8];R=i[9];const St=i[10];L=i[11],O=i[12];const yt=[i[13],i[13]],It=this.textStates[O],vt=It.font,Ct=[It.scale[0]*mt,It.scale[1]*mt];let Tt;vt in this.widths_?Tt=this.widths_[vt]:(Tt={},this.widths_[vt]=Tt);const kt=(0,d.lineStringLength)(m,ut,gt,2),Dt=Math.abs(Ct[0])*(0,l.measureAndCacheTextWidth)(vt,L,Tt);if(_t||Dt<=kt){const i=this.textStates[O].textAlign,s=(kt-Dt)*n.TEXT_ALIGN[i],o=(0,h.drawTextOnPath)(m,ut,gt,2,L,s,xt,Math.abs(Ct[0]),l.measureAndCacheTextWidth,vt,Tt,Y?0:this.viewRotation_);t:if(o){const i=[];let s,n,r,a,h;if(R)for(s=0,n=o.length;s<n;++s){h=o[s],r=h[4],a=this.createLabel(r,O,"",R),v=h[2]+(Ct[0]<0?-St:St),C=ft*a.height+2*(.5-ft)*St*Ct[1]/Ct[0]-pt;const n=this.calculateImageOrLabelDimensions_(a.width,a.height,h[0],h[1],a.width,a.height,v,C,0,0,h[3],yt,!1,l.defaultPadding,!1,z);if(x&&x.collides(n.declutterBox))break t;i.push([t,e,a,n,1,null,null])}if(M)for(s=0,n=o.length;s<n;++s){h=o[s],r=h[4],a=this.createLabel(r,O,M,""),v=h[2],C=ft*a.height-pt;const n=this.calculateImageOrLabelDimensions_(a.width,a.height,h[0],h[1],a.width,a.height,v,C,0,0,h[3],yt,!1,l.defaultPadding,!1,z);if(x&&x.collides(n.declutterBox))break t;i.push([t,e,a,n,1,null,null])}x&&x.load(i.map(p));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++S;break;case s.default.END_GEOMETRY:if(void 0!==f){z=i[1];const t=f(z,V);if(t)return t}++S;break;case s.default.FILL:N?F++:this.fill_(t),++S;break;case s.default.MOVE_TO_LINE_TO:for(b=i[1],I=i[2],U=m[b],H=m[b+1],D=U+.5|0,E=H+.5|0,D===T&&E===k||(t.moveTo(U,H),T=D,k=E),b+=2;b<I;b+=2)U=m[b],H=m[b+1],D=U+.5|0,E=H+.5|0,b!=I-2&&D===T&&E===k||(t.lineTo(U,H),T=D,k=E);++S;break;case s.default.SET_FILL_STYLE:P=i,this.alignFill_=i[2],F&&(this.fill_(t),F=0,A&&(t.stroke(),A=0)),t.fillStyle=i[1],++S;break;case s.default.SET_STROKE_STYLE:W=i,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,i),++S;break;case s.default.STROKE:N?A++:t.stroke(),++S;break;default:++S}}F&&this.fill_(t),A&&t.stroke()}execute(t,e,i,s,n,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,n,void 0,void 0,o)}executeHitDetection(t,e,i,s,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,n)}}})),o.register("2soc3",(function(t,i){e(t.exports,"drawTextOnPath",(()=>r));var s=o("a6roo"),n=o("bsQCi");function r(t,e,i,o,r,a,l,h,c,d,u,g){let f=t[e],_=t[e+1],x=0,m=0,p=0,S=0;function y(){x=f,m=_,f=t[e+=o],_=t[e+1],S+=p,p=Math.sqrt((f-x)*(f-x)+(_-m)*(_-m))}do{y()}while(e<i-o&&S+p<a);let I=0===p?0:(a-S)/p;const v=(0,s.lerp)(x,f,I),C=(0,s.lerp)(m,_,I),T=e-o,k=S,D=a+h*c(d,r,u);for(;e<i-o&&S+p<D;)y();I=0===p?0:(D-S)/p;const E=(0,s.lerp)(x,f,I),w=(0,s.lerp)(m,_,I);let L;if(g){const t=[v,C,E,w];(0,n.rotate)(t,0,4,2,g,t,t),L=t[0]>t[2]}else L=v>E;const O=Math.PI,R=[],M=T+o===e;let b;if(p=0,S=k,f=t[e=T],_=t[e+1],M){y(),b=Math.atan2(_-m,f-x),L&&(b+=b>0?-O:O);const t=(E+v)/2,e=(w+C)/2;return R[0]=[t,e,(D-a)/2,b,r],R}for(let t=0,n=(r=r.replace(/\n/g," ")).length;t<n;){y();let g=Math.atan2(_-m,f-x);if(L&&(g+=g>0?-O:O),void 0!==b){let t=g-b;if(t+=t>O?-2*O:t<-O?2*O:0,Math.abs(t)>l)return null}b=g;const v=t;let C=0;for(;t<n;++t){const s=h*c(d,r[L?n-t-1:t],u);if(e+o<i&&S+p<a+C+s/2)break;C+=s}if(t===v)continue;const T=L?r.substring(n-v,n-t):r.substring(v,t);I=0===p?0:(a+C/2-S)/p;const k=(0,s.lerp)(x,f,I),D=(0,s.lerp)(m,_,I);R.push([k,D,C/2,g,T]),a+=C}return R}})),o.register("aSafW",(function(t,i){function s(t,e,i,s){let n=t[e],o=t[e+1],r=0;for(let a=e+s;a<i;a+=s){const e=t[a],i=t[a+1];r+=Math.sqrt((e-n)*(e-n)+(i-o)*(i-o)),n=e,o=i}return r}e(t.exports,"lineStringLength",(()=>s))})),o.register("3CYjy",(function(t,i){e(t.exports,"HIT_DETECT_RESOLUTION",(()=>c)),e(t.exports,"createHitDetectionImageData",(()=>d)),e(t.exports,"hitDetect",(()=>u));var s=o("htGzg"),n=o("ayeEa"),r=o("a6roo"),a=o("cgxQK"),l=o("jZquI"),h=o("kBSVF");const c=.5;function d(t,e,i,o,r,d,u){const g=t[0]*c,f=t[1]*c,_=(0,a.createCanvasContext2D)(g,f);_.imageSmoothingEnabled=!1;const x=_.canvas,m=new(0,s.default)(_,c,r,null,u),p=i.length,S=Math.floor(16777215/p),y={};for(let t=1;t<=p;++t){const e=i[t-1],s=e.getStyleFunction()||o;if(!o)continue;let h=s(e,d);if(!h)continue;Array.isArray(h)||(h=[h]);const c="#"+("000000"+(t*S).toString(16)).slice(-6);for(let t=0,i=h.length;t<i;++t){const i=h[t],s=i.getGeometryFunction()(e);if(!s||!(0,l.intersects)(r,s.getExtent()))continue;const o=i.clone(),d=o.getFill();d&&d.setColor(c);const u=o.getStroke();u&&(u.setColor(c),u.setLineDash(null)),o.setText(void 0);const g=i.getImage();if(g&&0!==g.getOpacity()){const t=g.getImageSize();if(!t)continue;const e=(0,a.createCanvasContext2D)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=c,e.fillRect(0,0,i.width,i.height),o.setImage(new(0,n.default)({img:i,imgSize:t,anchor:g.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:g.getOrigin(),opacity:1,size:g.getSize(),scale:g.getScale(),rotation:g.getRotation(),rotateWithView:g.getRotateWithView()}))}const f=o.getZIndex()||0;let _=y[f];_||(_={},y[f]=_,_.Polygon=[],_.Circle=[],_.LineString=[],_.Point=[]),_[s.getType().replace("Multi","")].push(s,o)}}const I=Object.keys(y).map(Number).sort(h.numberSafeCompareFunction);for(let t=0,i=I.length;t<i;++t){const i=y[I[t]];for(const t in i){const s=i[t];for(let t=0,i=s.length;t<i;t+=2){m.setStyle(s[t+1]);for(let i=0,n=e.length;i<n;++i)m.setTransform(e[i]),m.drawGeometry(s[t])}}}return _.getImageData(0,0,x.width,x.height)}function u(t,e,i){const s=[];if(i){const n=Math.floor(Math.round(t[0])*c),o=Math.floor(Math.round(t[1])*c),a=4*((0,r.clamp)(n,0,i.width-1)+(0,r.clamp)(o,0,i.height-1)*i.width),l=i.data[a],h=i.data[a+1],d=i.data[a+2]+256*(h+256*l),u=Math.floor(16777215/e.length);d&&d%u==0&&s.push(e[d/u-1])}return s}})),o.register("htGzg",(function(t,i){e(t.exports,"default",(()=>g));var s=o("eGc18"),n=o("hlW0i"),r=o("14PDX"),a=o("aHG4Z"),l=o("kBSVF"),h=o("jZquI"),c=o("bsQCi"),d=o("63y7W");class u extends s.default{constructor(t,e,i,s,n,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.viewRotation_=n,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,r.create)()}drawImages_(t,e,i,s){if(!this.image_)return;const n=(0,c.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(let t=0,e=n.length;t<e;t+=2){const e=n[t]-this.imageAnchorX_,i=n[t+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,s=i+this.imageAnchorY_;(0,r.compose)(a,t,s,1,1,h,-t,-s),o.setTransform.apply(o,a),o.translate(t,s),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=(0,c.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let r=this.textRotation_;for(this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=s){const t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(t-this.textOffsetX_,i-this.textOffsetY_),o.rotate(r),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,s,n){const o=this.context_,r=(0,c.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);let a=r.length;n&&(a-=2);for(let t=2;t<a;t+=2)o.lineTo(r[t],r[t+1]);return n&&o.closePath(),i}drawRings_(t,e,i,s){for(let n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],s,!0);return e}drawCircle(t){if((0,h.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,d.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],n=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(0,h.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,h.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const n=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t)s=this.moveToLineTo_(i,s,n[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const n=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t){const e=n[t];s=this.drawRings_(i,s,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,l.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:a.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,n.asColorLike)(e||a.defaultFillStyle)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),r=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=s||a.defaultLineDash;this.strokeState_={lineCap:void 0!==i?i:a.defaultLineCap,lineDash:1===this.pixelRatio_?c:c.map((t=>t*this.pixelRatio_)),lineDashOffset:(o||a.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==r?r:a.defaultLineJoin,lineWidth:(void 0!==l?l:a.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==h?h:a.defaultMiterLimit,strokeStyle:(0,n.asColorLike)(t||a.defaultStrokeStyle)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,n.asColorLike)(t||a.defaultFillStyle)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),s=i.getLineDash(),o=i.getLineDashOffset(),r=i.getLineJoin(),l=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:a.defaultLineCap,lineDash:s||a.defaultLineDash,lineDashOffset:o||a.defaultLineDashOffset,lineJoin:void 0!==r?r:a.defaultLineJoin,lineWidth:void 0!==l?l:a.defaultLineWidth,miterLimit:void 0!==h?h:a.defaultMiterLimit,strokeStyle:(0,n.asColorLike)(t||a.defaultStrokeStyle)}}else this.textStrokeState_=null;const s=t.getFont(),o=t.getOffsetX(),r=t.getOffsetY(),l=t.getRotateWithView(),h=t.getRotation(),c=t.getScaleArray(),d=t.getText(),u=t.getTextAlign(),g=t.getTextBaseline();this.textState_={font:void 0!==s?s:a.defaultFont,textAlign:void 0!==u?u:a.defaultTextAlign,textBaseline:void 0!==g?g:a.defaultTextBaseline},this.text_=void 0!==d?Array.isArray(d)?d.reduce(((t,e,i)=>t+(i%2?" ":e)),""):d:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}var g=u})),o.register("713Fw",(function(t,i){e(t.exports,"defaultOrder",(()=>a)),e(t.exports,"getSquaredTolerance",(()=>l)),e(t.exports,"getTolerance",(()=>h)),e(t.exports,"renderFeature",(()=>c));var s=o("50PZ9"),n=o("lVQul");const r={Point:function(t,e,i,n,o){const r=i.getImage(),a=i.getText();let l;if(r){if(r.getImageState()!=s.default.LOADED)return;let h=t;if(o){const s=r.getDeclutterMode();if("none"!==s)if(h=o,"obstacle"===s){const s=t.getBuilder(i.getZIndex(),"Image");s.setImageStyle(r,l),s.drawPoint(e,n)}else a&&a.getText()&&(l={})}const c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(r,l),c.drawPoint(e,n)}if(a&&a.getText()){let s=t;o&&(s=o);const r=s.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a,l),r.drawText(e,n)}},LineString:function(t,e,i,s,n){const o=i.getStroke();if(o){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,o),n.drawLineString(e,s)}const r=i.getText();if(r&&r.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(r),o.drawText(e,s)}},Polygon:function(t,e,i,s,n){const o=i.getFill(),r=i.getStroke();if(o||r){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(o,r),n.drawPolygon(e,s)}const a=i.getText();if(a&&a.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,s)}},MultiPoint:function(t,e,i,n,o){const r=i.getImage(),a=i.getText();let l;if(r){if(r.getImageState()!=s.default.LOADED)return;let h=t;if(o){const s=r.getDeclutterMode();if("none"!==s)if(h=o,"obstacle"===s){const s=t.getBuilder(i.getZIndex(),"Image");s.setImageStyle(r,l),s.drawMultiPoint(e,n)}else a&&a.getText()&&(l={})}const c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(r,l),c.drawMultiPoint(e,n)}if(a&&a.getText()){let s=t;o&&(s=o);const r=s.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a,l),r.drawText(e,n)}},MultiLineString:function(t,e,i,s,n){const o=i.getStroke();if(o){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,o),n.drawMultiLineString(e,s)}const r=i.getText();if(r&&r.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(r),o.drawText(e,s)}},MultiPolygon:function(t,e,i,s,n){const o=i.getFill(),r=i.getStroke();if(r||o){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(o,r),n.drawMultiPolygon(e,s)}const a=i.getText();if(a&&a.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,s)}},GeometryCollection:function(t,e,i,s,n){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){(0,r[o[a].getType()])(t,o[a],i,s,n)}},Circle:function(t,e,i,s,n){const o=i.getFill(),r=i.getStroke();if(o||r){const n=t.getBuilder(i.getZIndex(),"Circle");n.setFillStrokeStyle(o,r),n.drawCircle(e,s)}const a=i.getText();if(a&&a.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,s)}}};function a(t,e){return parseInt((0,n.getUid)(t),10)-parseInt((0,n.getUid)(e),10)}function l(t,e){const i=h(t,e);return i*i}function h(t,e){return.5*t/e}function c(t,e,i,n,o,a,l){let h=!1;const c=i.getImage();if(c){const t=c.getImageState();t==s.default.LOADED||t==s.default.ERROR?c.unlistenImageChange(o):(t==s.default.IDLE&&c.load(),c.listenImageChange(o),h=!0)}return function(t,e,i,s,n,o){const a=i.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(s,n);if(i.getRenderer())d(t,l,i,e);else{(0,r[l.getType()])(t,l,i,e,o)}}(t,e,i,n,a,l),h}function d(t,e,i,s){if("GeometryCollection"==e.getType()){const n=e.getGeometries();for(let e=0,o=n.length;e<o;++e)d(t,n[e],i,s);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,s,i.getRenderer(),i.getHitDetectionRenderer())}})),o.register("gKdkP",(function(t,i){e(t.exports,"default",(()=>s));var s={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}})),o.register("6M65l",(function(t,i){e(t.exports,"default",(()=>p));var s=o("8vXOK"),n=o("ddIVC"),r=o("dVSax"),a=o("bCUH1"),l=o("3CYjy"),h=o("14PDX"),c=o("jZquI"),d=o("cgxQK"),u=o("713Fw"),g=o("kBSVF"),f=o("gzr8q"),_=o("lVQul"),x=o("d1ltq");class m extends n.default{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,c.createEmpty)(),this.wrappedRenderedExtent_=(0,c.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,n=e.viewState,o=n.center,r=n.resolution,l=n.projection,h=n.rotation,d=l.getExtent(),u=this.getLayer().getSource(),g=e.pixelRatio,f=e.viewHints,_=!(f[a.default.ANIMATING]||f[a.default.INTERACTING]),x=this.compositionContext_,m=Math.round(e.size[0]*g),p=Math.round(e.size[1]*g),S=u.getWrapX()&&l.canWrapX(),y=S?(0,c.getWidth)(d):null,I=S?Math.ceil((s[2]-d[2])/y)+1:1;let v=S?Math.floor((s[0]-d[0])/y):0;do{const e=this.getRenderTransform(o,r,h,g,m,p,v*y);t.execute(x,1,e,h,_,void 0,i)}while(++v<I)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,d.createCanvasContext2D)(this.context.canvas.width,this.context.canvas.height,n.canvasPool);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,d.releaseCanvas)(this.compositionContext_),n.canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];(0,h.makeScale)(this.pixelTransform,1/i,1/i),(0,h.makeInverse)(this.inversePixelTransform,this.pixelTransform);const n=(0,h.toString)(this.pixelTransform);this.useContainer(e,n,this.getBackground(t));const o=this.context,r=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;const d=Math.round(t.size[0]*i),u=Math.round(t.size[1]*i);r.width!=d||r.height!=u?(r.width=d,r.height=u,r.style.transform!==n&&(r.style.transform=n)):this.containerReused||o.clearRect(0,0,d,u),this.preRender(o,t);const g=t.viewState,_=g.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let x=!1,m=!0;if(s.extent&&this.clipping){const e=(0,f.fromUserExtent)(s.extent,_);m=(0,c.intersects)(e,t.extent),x=m&&!(0,c.containsExtent)(e,t.extent),x&&this.clipUnrotated(this.compositionContext_,t,e)}return m&&this.renderWorlds(a,t),x&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,h.apply)(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,s=this.renderedRotation_,n=this.renderedProjection_,o=this.wrappedRenderedExtent_,r=this.getLayer(),a=[],d=t[0]*l.HIT_DETECT_RESOLUTION,u=t[1]*l.HIT_DETECT_RESOLUTION;a.push(this.getRenderTransform(e,i,s,l.HIT_DETECT_RESOLUTION,d,u,0).slice());const g=r.getSource(),f=n.getExtent();if(g.getWrapX()&&n.canWrapX()&&!(0,c.containsExtent)(f,o)){let t=o[0];const n=(0,c.getWidth)(f);let r,h=0;for(;t<f[0];)--h,r=n*h,a.push(this.getRenderTransform(e,i,s,l.HIT_DETECT_RESOLUTION,d,u,r).slice()),t+=n;for(h=0,t=o[2];t>f[2];)++h,r=n*h,a.push(this.getRenderTransform(e,i,s,l.HIT_DETECT_RESOLUTION,d,u,r).slice()),t-=n}this.hitDetectionImageData_=(0,l.createHitDetectionImageData)(t,a,this.renderedFeatures_,r.getStyleFunction(),o,i,s)}e((0,l.hitDetect)(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,s,n){if(!this.replayGroup_)return;const o=e.viewState.resolution,r=e.viewState.rotation,a=this.getLayer(),l={},h=function(t,e,i){const o=(0,_.getUid)(t),r=l[o];if(r){if(!0!==r&&i<r.distanceSq){if(0===i)return l[o]=!0,n.splice(n.lastIndexOf(r),1),s(t,a,e);r.geometry=e,r.distanceSq=i}}else{if(0===i)return l[o]=!0,s(t,a,e);n.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:i,callback:s})}};let c;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some((s=>c=s.forEachFeatureAtCoordinate(t,o,r,i,h,s===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[a.default.ANIMATING],o=t.viewHints[a.default.INTERACTING],l=e.getUpdateWhileAnimating(),h=e.getUpdateWhileInteracting();if(this.ready&&!l&&n||!h&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=t.extent,_=t.viewState,m=_.projection,p=_.resolution,S=t.pixelRatio,y=e.getRevision(),I=e.getRenderBuffer();let v=e.getRenderOrder();void 0===v&&(v=u.defaultOrder);const C=_.center.slice(),T=(0,c.buffer)(d,I*p),k=T.slice(),D=[T.slice()],E=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!(0,c.containsExtent)(E,t.extent)){const t=(0,c.getWidth)(E),e=Math.max((0,c.getWidth)(T)/2,t);T[0]=E[0]-e,T[2]=E[2]+e,(0,x.wrapX)(C,m);const i=(0,c.wrapX)(D[0],m);i[0]<E[0]&&i[2]<E[2]?D.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>E[0]&&i[2]>E[2]&&D.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==y&&this.renderedRenderOrder_==v&&(0,c.containsExtent)(this.wrappedRenderedExtent_,T))return(0,g.equals)(this.renderedExtent_,k)||(this.hitDetectionImageData_=null,this.renderedExtent_=k),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new(0,s.default)((0,u.getTolerance)(p,S),T,p,S);let L;this.getLayer().getDeclutter()&&(L=new(0,s.default)((0,u.getTolerance)(p,S),T,p,S));const O=(0,f.getUserProjection)();let R;if(O){for(let t=0,e=D.length;t<e;++t){const e=D[t],s=(0,f.toUserExtent)(e,m);i.loadFeatures(s,(0,f.toUserResolution)(p,m),O)}R=(0,f.getTransformFromProjections)(O,m)}else for(let t=0,e=D.length;t<e;++t)i.loadFeatures(D[t],p,m);const M=(0,u.getSquaredTolerance)(p,S);let b=!0;const F=function(t){let i;const s=t.getStyleFunction()||e.getStyleFunction();if(s&&(i=s(t,p)),i){const e=this.renderFeature(t,M,i,w,R,L);b=b&&!e}}.bind(this),A=(0,f.toUserExtent)(T,m),P=i.getFeaturesInExtent(A);v&&P.sort(v);for(let t=0,e=P.length;t<e;++t)F(P[t]);this.renderedFeatures_=P,this.ready=b;const W=w.finish(),B=new(0,r.default)(T,p,S,i.getOverlaps(),W,e.getRenderBuffer());return L&&(this.declutterExecutorGroup=new(0,r.default)(T,p,S,i.getOverlaps(),L.finish(),e.getRenderBuffer())),this.renderedResolution_=p,this.renderedRevision_=y,this.renderedRenderOrder_=v,this.renderedExtent_=k,this.wrappedRenderedExtent_=T,this.renderedCenter_=C,this.renderedProjection_=m,this.replayGroup_=B,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,n,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)r=(0,u.renderFeature)(s,t,i[a],e,this.boundHandleStyleImageChange_,n,o)||r;else r=(0,u.renderFeature)(s,t,i,e,this.boundHandleStyleImageChange_,n,o);return r}}var p=m}));