function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},n=t.parcelRequirecc54;null==n&&((n=function(e){if(e in i)return i[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequirecc54=n);var s=n("cEuiU"),a=n("20LS2"),o=n("6gELa"),l=n("kPMpK"),h=n("dUROT"),d=n("btuox"),c=n("6yJ0x"),u=n("5VeMq"),g=n("iQyfo"),f=n("l9IGS"),p=n("h6Aha"),m=(f=n("l9IGS"),n("d5AAH")),x=n("2zf1Y"),y=n("kuKBR"),w=n("jZquI"),v=n("6sFdl"),L=class extends v.default{constructor(e){e=e||{};var t=document.createElement("div");t.className=(e.target?"":"ol-control ")+"ol-gridreference ol-unselectable "+(e.className||""),e.style=e.style||new(0,f.default)({stroke:new(0,m.default)({color:"#000",width:1}),text:new(0,y.default)({font:"bold 14px Arial",stroke:new(0,m.default)({color:"#fff",width:2}),fill:new(0,x.default)({color:"#000"})})}),super({element:t,target:e.target,style:e.style}),"function"==typeof e.property&&(this.getFeatureName=e.property),"function"==typeof e.sortFeatures&&(this.sortFeatures=e.sortFeatures),"function"==typeof e.indexTitle&&(this.indexTitle=e.indexTitle),this.source_=e.source,e.source&&(this.setIndex(e.source.getFeatures(),e),e.source.once("change",function(){"ready"===e.source.getState()&&this.setIndex(e.source.getFeatures(),e)}.bind(this))),this.set("maxResolution",e.maxResolution||1/0),this.set("extent",e.extent),this.set("size",e.size),this.set("margin",e.margin||0),this.set("property",e.property||"name"),this.set("filterLabel",e.filterLabel||"filter")}setMap(e){super.setMap(e),this.setIndex(this.source_.getFeatures())}getFeatureName(e){return e.get(this.get("property")||"name")}sortFeatures(e,t){return this.getFeatureName(e)==this.getFeatureName(t)?0:this.getFeatureName(e)<this.getFeatureName(t)?-1:1}indexTitle(e){return this.getFeatureName(e).charAt(0)}setIndex(e){if(this.getMap()){var t=this;e.getArray&&(e=e.getArray()),e.sort((function(e,i){return t.sortFeatures(e,i)})),this.element.innerHTML="";var i=this.element,r=document.createElement("input");r.setAttribute("type","search"),r.setAttribute("placeholder",this.get("filterLabel")||"filter");var n=function(){var e=this.value.replace(/^\*/,""),t=new RegExp(e,"i"),i=o.querySelectorAll("li");Array.prototype.forEach.call(i,(function(e){e.classList.contains("ol-title")||t.test(e.querySelector(".ol-name").textContent)?e.style.display="":e.style.display="none"})),Array.prototype.forEach.call(o.querySelectorAll("li.ol-title"),(function(e){for(var t,r=!1,n=0;n<i.length;n++){if(r){if(i[n].classList.contains("ol-title"))break;if(!i[n].style.display){t=i[n];break}}i[n]===e&&(r=!0)}e.style.display=t?"":"none"}))};r.addEventListener("search",n),r.addEventListener("keyup",n),i.appendChild(r);var s,a,o=document.createElement("ul");i.appendChild(o),e.forEach(function(e){if(s=this.getReference(e.getGeometry().getFirstCoordinate())){var t=this.getFeatureName(e),i=this.indexTitle(e);if(i!=a){var r=document.createElement("li");r.classList.add("ol-title"),r.textContent=i,o.appendChild(r)}a=i;var n=document.createElement("li"),l=document.createElement("span");l.classList.add("ol-name"),l.textContent=t,n.appendChild(l);var h=document.createElement("span");h.classList.add("ol-ref"),h.textContent=s,n.appendChild(h);var d=e;n.addEventListener("click",function(){this.dispatchEvent({type:"select",feature:d})}.bind(this)),o.appendChild(n)}}.bind(this))}}getReference(e){if(this.getMap()){var t=this.get("extent"),i=this.get("size"),r=Math.floor((e[0]-t[0])/(t[2]-t[0])*i[0]);if(r<0||r>=i[0])return"";var n=Math.floor((t[3]-e[1])/(t[3]-t[1])*i[1]);return n<0||n>=i[1]?"":this.getHIndex(r)+this.getVIndex(n)}}getVIndex(e){return e}getHIndex(e){return String.fromCharCode(65+e)}_draw(e){if(!(this.get("maxResolution")<e.frameState.viewState.resolution)){var t=this.getContext(e),i=t.canvas,r=e.frameState.pixelRatio,n=i.width/r,s=i.height/r,a=this.get("extent"),o=this.get("size"),l=this.getMap(),h=(0,w.boundingExtent)([l.getPixelFromCoordinate([a[0],a[1]]),l.getPixelFromCoordinate([a[2],a[3]])]),d=[h[0],h[1]],c=[h[2],h[3]],u=(c[0]-d[0])/o[0],g=(c[1]-d[1])/o[1];t.save();var f,p=this.get("margin");for(t.scale(r,r),t.strokeStyle=this.getStroke().getColor(),t.lineWidth=this.getStroke().getWidth(),t.beginPath(),f=0;f<=o[0];f++)t.moveTo(d[0]+f*u,d[1]),t.lineTo(d[0]+f*u,c[1]);for(f=0;f<=o[1];f++)t.moveTo(d[0],d[1]+f*g),t.lineTo(c[0],d[1]+f*g);t.stroke(),t.font=this.getTextFont(),t.fillStyle=this.getTextFill().getColor(),t.strokeStyle=this.getTextStroke().getColor();var m,x,y,v=p+(t.lineWidth=this.getTextStroke().getWidth());for(t.textAlign="center",f=0;f<o[0];f++)m=this.getHIndex(f),x=d[0]+f*u+u/2,(y=d[1]-v)<0?(y=v,t.textBaseline="hanging"):t.textBaseline="alphabetic",t.strokeText(m,x,y),t.fillText(m,x,y),(y=c[1]+v)>s?(y=s-v,t.textBaseline="alphabetic"):t.textBaseline="hanging",t.strokeText(m,x,y),t.fillText(m,x,y);for(t.textBaseline="middle",f=0;f<o[1];f++)m=this.getVIndex(f),y=d[1]+f*g+g/2,t.textAlign="right",(x=d[0]-v)<0?(x=v,t.textAlign="left"):t.textAlign="right",t.strokeText(m,x,y),t.fillText(m,x,y),(x=c[0]+v)>n?(x=n-v,t.textAlign="right"):t.textAlign="left",t.strokeText(m,x,y),t.fillText(m,x,y);t.restore()}}},C=n("1B70O"),_=n("jZUWm");class T{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new T({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var F=T;class b{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null}clone(){const e=this.getColor();return new b({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var k=b;(0,_.default)(e('<div> <h2> Day 14: hexagons </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.style.FlowLine.html" target="_new"> ol-ext Hexbin source </a> to aggregate data on hexagons. </p> </div>')),C.permalink.setUrlReplace(!1),C.default.getView().fit([265737,6250813,267275,6251872]);const A=new(0,o.default)({layer:"ORTHOIMAGERY.ORTHOPHOTOS"});C.default.addLayer(A);const D=new(0,s.default)({source:new(0,a.default)({url:"./pere_lachaise.geojson",format:new(0,l.default),attributions:["<a href='https://www.data.gouv.fr/fr/datasets/monuments-et-tombes-de-personnalites-du-cimetiere-du-pere-lachaise-openstreetmap-wikipedia-wikimedia/'>M Le Moine</a>"]}),style:new(0,f.default)({image:new(0,p.default)({radius:6,points:4,angle:Math.PI/4,fill:new k({color:[0,0,0,.5]}),stroke:new F({color:[0,0,0],width:2.5})})})});C.default.addLayer(D),C.default.addInteraction(new(0,c.default)({layers:[D],cursor:"pointer"}));const E=new L({extent:[265700,6250700,267300,6252e3],size:[11,12],target:document.body,source:D.getSource(),property:"nom",sortFeatures:(e,t)=>{const i=("music"===e.get("type")?"A":e.get("type"))+"-"+e.get("nom"),r=("music"===t.get("type")?"A":t.get("type"))+"-"+t.get("nom");return i===r?0:i<r?-1:1},indexTitle:e=>e.get("type")});C.default.addControl(E);var M=new(0,h.default)({condition:d.click});C.default.addInteraction(M);const O=new(0,u.default)({popupClass:"default anim",positioning:"bottom-center"});C.default.addOverlay(O),M.on("select",(e=>{const t=e.selected[0];if(t){const e=g.default.create("DIV",{html:(t.get("resume")||t.get("nom")).replace(/<a href="/g,'<a target="_wiki" href="https://fr.wikipedia.org/')});g.default.create("IMG",{src:t.get("thumb"),parent:e}),g.default.create("P",{html:"photo &copy; "+t.get("img_auteur"),class:"center",parent:e}),g.default.create("A",{href:t.get("lien_wikipedia"),class:"center",html:"&copy; Wikipedia - OpenStreetMap",parent:e}),O.show(t.getGeometry().getFirstCoordinate(),e)}else O.hide()})),E.on("select",(function(e){M.getFeatures().clear(),M.getFeatures().push(e.feature),M.dispatchEvent({type:"select",selected:[e.feature]});var t=e.feature.getGeometry().getFirstCoordinate();C.default.getView().animate({center:t,duration:500})}));