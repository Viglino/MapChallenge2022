function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=e.parcelRequirecc54;null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var o={id:t,exports:{}};return r[t]=o,e.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){i[t]=e},e.parcelRequirecc54=o);var s=o("2YyN3"),n=o("ddIVC"),a=o("50PZ9"),l=o("bCUH1"),h=o("14PDX"),d=o("jZquI"),u=o("gzr8q");class f extends n.default{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,i=t.viewState,o=i.resolution,s=this.getLayer().getSource(),n=t.viewHints;let h=t.extent;if(void 0!==e.extent&&(h=(0,d.getIntersection)(h,(0,u.fromUserExtent)(e.extent,i.projection))),!n[l.default.ANIMATING]&&!n[l.default.INTERACTING]&&!(0,d.isEmpty)(h))if(s){const t=i.projection,e=s.getImage(h,o,r,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===a.default.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const r=this.getLayer(),i=(0,h.apply)(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!(0,d.containsCoordinate)(o,i))return null;const s=this.image_.getExtent(),n=this.image_.getImage(),a=(0,d.getWidth)(s),l=Math.floor(n.width*((i[0]-s[0])/a));if(l<0||l>=n.width)return null;const u=(0,d.getHeight)(s),f=Math.floor(n.height*((s[3]-i[1])/u));return f<0||f>=n.height?null:this.getImageData(n,l,f)}renderFrame(t,e){const r=this.image_,i=r.getExtent(),o=r.getResolution(),s=r.getPixelRatio(),n=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,f=l.center,c=a*o/(l.resolution*s),g=t.extent,p=l.resolution,w=l.rotation,y=Math.round((0,d.getWidth)(g)/p*a),m=Math.round((0,d.getHeight)(g)/p*a);(0,h.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,w,-y/2,-m/2),(0,h.makeInverse)(this.inversePixelTransform,this.pixelTransform);const v=(0,h.toString)(this.pixelTransform);this.useContainer(e,v,this.getBackground(t));const _=this.context,C=_.canvas;C.width!=y||C.height!=m?(C.width=y,C.height=m):this.containerReused||_.clearRect(0,0,y,m);let x=!1,A=!0;if(n.extent){const e=(0,u.fromUserExtent)(n.extent,l.projection);A=(0,d.intersects)(e,t.extent),x=A&&!(0,d.containsExtent)(e,t.extent),x&&this.clipUnrotated(_,t,e)}const R=r.getImage(),I=(0,h.compose)(this.tempTransform,y/2,m/2,c,c,0,s*(i[0]-f[0])/o,s*(f[1]-i[3])/o);this.renderedResolution=o*a/s;const E=R.width*I[0],S=R.height*I[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,t),A&&E>=.5&&S>=.5){const t=I[4],e=I[5],r=n.opacity;let i;1!==r&&(i=_.globalAlpha,_.globalAlpha=r),_.drawImage(R,0,0,+R.width,+R.height,t,e,E,S),1!==r&&(_.globalAlpha=i)}return this.postRender(_,t),x&&_.restore(),_.imageSmoothingEnabled=!0,v!==C.style.transform&&(C.style.transform=v),this.container}}var c=f,g=o("6M65l"),p=o("cw4dl"),w=o("3QQdo");a=o("50PZ9");class y extends w.default{constructor(t,e,r,i,o){super(t,e,r,void 0!==o?a.default.IDLE:a.default.LOADED),this.loader_=void 0!==o?o:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=a.default.ERROR):this.state=a.default.LOADED,this.changed()}load(){this.state==a.default.IDLE&&(this.state=a.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}var m=y,v=(a=o("50PZ9"),o("4wfAy"));l=o("bCUH1"),h=o("14PDX"),d=o("jZquI");var _=class extends c{constructor(t){super(t),this.vectorRenderer_=new(0,g.default)(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,h.create)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return new Promise((t=>t([])));const e=(0,h.apply)(this.coordinateToVectorPixelTransform_,(0,h.apply)(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const r=e.pixelRatio,i=e.viewState,o=i.resolution,s=e.viewHints,n=this.vectorRenderer_;let u=e.extent;1!==this.layerImageRatio_&&(u=u.slice(0),(0,d.scaleFromCenter)(u,this.layerImageRatio_));const f=(0,d.getWidth)(u)/o,c=(0,d.getHeight)(u)/o;if(!s[l.default.ANIMATING]&&!s[l.default.INTERACTING]&&!(0,d.isEmpty)(u)){n.useContainer(null,null);const s=n.context,l=e.layerStatesArray[e.layerIndex];s.globalAlpha=l.opacity;const d=Object.assign({},l,{opacity:1}),g=Object.assign({},e,{declutterTree:new(t(v))(9),extent:u,size:[f,c],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0});let w=!0;const y=new m(u,o,r,s.canvas,(function(t){n.prepareFrame(g)&&n.replayGroupChanged&&(n.clipping=!1,n.renderFrame(g,null)&&(n.renderDeclutter(g),w=!1),t())}));y.addEventListener(p.default.CHANGE,function(){if(y.getState()!==a.default.LOADED)return;this.image_=w?null:y;const t=y.getResolution(),e=y.getPixelRatio(),o=t*r/e;this.renderedResolution=o,this.coordinateToVectorPixelTransform_=(0,h.compose)(this.coordinateToVectorPixelTransform_,f/2,c/2,1/o,-1/o,0,-i.center[0],-i.center[1])}.bind(this)),y.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,r,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,r,i,o):super.forEachFeatureAtCoordinate(t,e,r,i,o)}};class C extends s.default{constructor(t){t=t||{};const e=Object.assign({},t);delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new _(this)}}var x=C,A=o("20LS2"),R=o("6gELa"),I=o("kPMpK"),E=o("l9IGS"),S=o("lqNjm"),T=(S=o("lqNjm"),o("hvEnP")),b=(o("fYB0A"),o("7TB1l")),P=(o("ljDIj"),o("dEQmT")),M=(o("j2K3b"),o("cgPpQ")),F=o("63y7W"),L=(d=o("jZquI"),o("ee3b9")),O=o("bsQCi");class z extends F.default{constructor(t,e,r){super(),void 0!==r&&void 0===e?this.setFlatCoordinates(r,t):(e=e||0,this.setCenterAndRadius(t,e,r))}clone(){const t=new z(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,i){const o=this.flatCoordinates,s=t-o[0],n=e-o[1],a=s*s+n*n;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)r[t]=o[t];else{const t=this.getRadius()/Math.sqrt(a);r[0]=o[0]+t*s,r[1]=o[1]+t*n;for(let t=2;t<this.stride;++t)r[t]=o[t]}return r.length=this.stride,a}return i}containsXY(t,e){const r=this.flatCoordinates,i=t-r[0],o=e-r[1];return i*i+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,r=e[this.stride]-e[0];return(0,d.createOrUpdate)(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if((0,d.intersects)(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||(0,d.forEachCorner)(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+r;for(let r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let o=(0,L.deflateCoordinate)(i,0,t,this.stride);i[o++]=i[0]+e;for(let t=1,e=this.stride;t<e;++t)i[o++]=i[t];i.length=o,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const r=this.getCenter(),i=this.getStride();this.setCenter((0,O.rotate)(r,0,r.length,i,t,e,r)),this.changed()}translate(t,e){const r=this.getCenter(),i=this.getStride();this.setCenter((0,O.translate)(r,0,r.length,i,t,e,r)),this.changed()}}z.prototype.transform;var D,j=z,N=(d=o("jZquI"),d=o("jZquI"),function(t,e){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}),q=function(t,e){return t[0]==e[0]&&t[1]==e[1]};!function(){function t(t,e){var r;for(let i=t.length-1;i>0;i--)(t[i][0]>e&&t[i-1][0]<e||t[i][0]<e&&t[i-1][0]>e)&&(r=[e,(e-t[i][0])/(t[i-1][0]-t[i][0])*(t[i-1][1]-t[i][1])+t[i][1]],t.splice(i,0,r))}function e(t,e){var r;for(let i=t.length-1;i>0;i--)(t[i][1]>e&&t[i-1][1]<e||t[i][1]<e&&t[i-1][1]>e)&&(r=[(e-t[i][1])/(t[i-1][1]-t[i][1])*(t[i-1][0]-t[i][0])+t[i][0],e],t.splice(i,0,r))}D=function(r,i){var o="Polygon"===i.getType();if(!o&&"MultiPolygon"!==i.getType())return null;var s=i.getCoordinates();return o&&(s=[s]),s.forEach((function(i){i.forEach((function(i){t(i,r[0]),t(i,r[2]),e(i,r[1]),e(i,r[3])}))})),s.forEach((function(t){t.forEach((function(t){t.forEach((function(t){t[0]<r[0]?t[0]=r[0]:t[0]>r[2]&&(t[0]=r[2]),t[1]<r[1]?t[1]=r[1]:t[1]>r[3]&&(t[1]=r[3])}))}))})),o?new(0,M.default)(s[0]):new(0,P.default)(s)}}();var G=function(t,e,r,i){var o=[];!1!==i&&o.push(t);var s=N(t,e);if(s){var n=Math.round(s/r);if(n>1)for(var a=(e[0]-t[0])/n,l=(e[1]-t[1])/n,h=1;h<n;h++)o.push([t[0]+a*h,t[1]+l*h])}return o.push(e),o};T.default.prototype.sampleAt=function(t){for(var e=this.getCoordinates(),r=[],i=1;i<e.length;i++)r=r.concat(G(e[i-1],e[i],t,1===i));return new(0,T.default)(r)},b.default.prototype.sampleAt=function(t){var e=this.getCoordinates(),r=[];return e.forEach((function(e){for(var i=[],o=1;o<e.length;o++)i=i.concat(G(e[o-1],e[o],t,1===o));r.push(i)})),new(0,b.default)(r)},M.default.prototype.sampleAt=function(t){var e=this.getCoordinates(),r=[];return e.forEach((function(e){for(var i=[],o=1;o<e.length;o++)i=i.concat(G(e[o-1],e[o],t,1===o));r.push(i)})),new(0,M.default)(r)},P.default.prototype.sampleAt=function(t){var e=this.getCoordinates(),r=[];return e.forEach((function(e){var i=[];r.push(i),e.forEach((function(e){for(var r=[],o=1;o<e.length;o++)r=r.concat(G(e[o-1],e[o],t,1===o));i.push(r)}))})),new(0,P.default)(r)},j.prototype.intersection=function(t,e){if(t.sampleAt){var r=(0,d.buffer)(this.getCenter().concat(this.getCenter()),this.getRadius());t=(t=D(r,t)).simplify(e);var i=this.getCenter(),o=this.getRadius(),s=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":s=[s];case"MultiPolygon":var n=!1,a=[];return s.forEach((function(t){var e=[];a.push(e),t.forEach((function(t){var r=[];e.push(r),t.forEach((function(t){var e=N(i,t);e>o?(n=!0,r.push([i[0]+o/e*(t[0]-i[0]),i[1]+o/e*(t[1]-i[1])])):r.push(t)}))}))})),n?"Polygon"===t.getType()?new(0,M.default)(a[0]):new(0,P.default)(a):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());return t},(T=o("hvEnP")).default.prototype.splitAt=function(t,e){var r;if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){var i=[this];for(r=0;r<t.length;r++){for(var o=[],s=0;s<i.length;s++){var n=i[s].splitAt(t[r],e);o=o.concat(n)}i=o}return i}if(q(t,this.getFirstCoordinate())||q(t,this.getLastCoordinate()))return[this];var a=this.getCoordinates(),l=[a[0]],h=[];for(r=0;r<a.length-1;r++)if(!q(a[r],a[r+1])){if(q(t,a[r+1]))l.push(a[r+1]),h.push(new(0,T.default)(l)),l=[];else if(!q(t,a[r])){var d,u,f=!1;a[r][0]==a[r+1][0]?(d=(a[r][1]-t[1])/(a[r][1]-a[r+1][1]),f=a[r][0]==t[0]&&0<d&&d<=1):a[r][1]==a[r+1][1]?(d=(a[r][0]-t[0])/(a[r][0]-a[r+1][0]),f=a[r][1]==t[1]&&0<d&&d<=1):(d=(a[r][0]-t[0])/(a[r][0]-a[r+1][0]),u=(a[r][1]-t[1])/(a[r][1]-a[r+1][1]),f=Math.abs(d-u)<=e&&0<d&&d<=1),f&&(l.push(t),h.push(new(0,T.default)(l)),l=[t])}l.push(a[r+1])}return l.length>1&&h.push(new(0,T.default)(l)),h.length?h:[this]};var W=class extends E.default{constructor(t){super({stroke:(t=t||{}).stroke,text:t.text,zIndex:t.zIndex,geometry:t.geometry}),this.setRenderer(this._render.bind(this)),this._visible=!1!==t.visible,"function"==typeof t.width?this._widthFn=t.width:this.setWidth(t.width),this.setWidth2(t.width2),"function"==typeof t.color?this._colorFn=t.color:this.setColor(t.color),this.setColor2(t.color2),this.setLineCap(t.lineCap),this.setArrow(t.arrow),this.setArrowSize(t.arrowSize),this.setArrowColor(t.arrowColor),this._offset=[0,0],this.setOffset(t.offset0,0),this.setOffset(t.offset1,1),this._noOverlap=t.noOverlap}setWidth(t){this._width=t||0}setWidth2(t){this._width2=t}getOffset(t){return this._offset[t]}setOffset(t,e){switch(t=Math.max(0,parseFloat(t)),e){case 0:this._offset[0]=t;break;case 1:this._offset[1]=t}}setLineCap(t){this._lineCap="round"===t?"round":"butt"}getWidth(t,e){if(this._widthFn)return this._widthFn(t,e);var r="number"==typeof this._width2?this._width2:this._width;return this._width+(r-this._width)*e}setColor(t){try{this._color=(0,S.asArray)(t)}catch(t){this._color=[0,0,0,1]}}setColor2(t){try{this._color2=(0,S.asArray)(t)}catch(t){this._color2=null}}setArrowColor(t){try{this._acolor=(0,S.asString)(t)}catch(t){this._acolor=null}}getColor(t,e){if(this._colorFn)return(0,S.asString)(this._colorFn(t,e));var r=this._color,i=this._color2||this._color;return"rgba("+ +Math.round(r[0]+(i[0]-r[0])*e)+","+Math.round(r[1]+(i[1]-r[1])*e)+","+Math.round(r[2]+(i[2]-r[2])*e)+","+(r[3]+(i[3]-r[3])*e)+")"}getArrow(){return this._arrow}setArrow(t){this._arrow=parseInt(t),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)}getArrowSize(){return this._arrowSize||[16,16]}setArrowSize(t){Array.isArray(t)?this._arrowSize=t:"number"==typeof t&&(this._arrowSize=[t,t])}drawArrow(t,e,r,i,o){var s=this.getArrowSize()[0]*o,n=N(e,r),a=(e[0]-r[0])/n,l=(e[1]-r[1])/n;i=Math.max(this.getArrowSize()[1]/2,i/2)*o,t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]-s*a+i*l,e[1]-s*l-i*a),t.lineTo(e[0]-s*a-i*l,e[1]-s*l+i*a),t.lineTo(e[0],e[1]),t.fill()}_render(t,e){if("LineString"===e.geometry.getType()){var r,i,o,s=e.context;if(!this._visible){var n=e.pixelRatio/e.resolution,a=Math.cos(e.rotation),l=Math.sin(e.rotation);i=e.geometry.getCoordinates();var h=t[0][0]-i[0][0]*n*a-i[0][1]*n*l,d=t[0][1]-i[0][0]*n*l+i[0][1]*n*a;for(t=[],r=0;o=i[r];r++)t[r]=[h+o[0]*n*a+o[1]*n*l,d+o[0]*n*l-o[1]*n*a,o[2]]}var u=this.getArrowSize()[0]*e.pixelRatio;s.save(),this.getOffset(0)&&this._splitAsize(t,this.getOffset(0)*e.pixelRatio),this.getOffset(1)&&this._splitAsize(t,this.getOffset(1)*e.pixelRatio,!0),t.length>1&&(-1===this.getArrow()||2===this.getArrow())&&(o=this._splitAsize(t,u),this._acolor?s.fillStyle=this._acolor:s.fillStyle=this.getColor(e.feature,0),this.drawArrow(s,o[0],o[1],this.getWidth(e.feature,0),e.pixelRatio)),t.length>1&&this.getArrow()>0&&(o=this._splitAsize(t,u,!0),this._acolor?s.fillStyle=this._acolor:s.fillStyle=this.getColor(e.feature,1),this.drawArrow(s,o[0],o[1],this.getWidth(e.feature,1),e.pixelRatio));var f=this._splitInto(t,255,2),c=0,g=f.length;if(s.lineJoin="round",s.lineCap=this._lineCap||"butt",f.length>1)for(c=0;c<f.length;c++){var p=c/g;for(i=f[c],s.lineWidth=this.getWidth(e.feature,p)*e.pixelRatio,s.strokeStyle=this.getColor(e.feature,p),s.beginPath(),s.moveTo(i[0][0],i[0][1]),r=1;o=i[r];r++)s.lineTo(o[0],o[1]);s.stroke()}s.restore()}}_splitAsize(t,e,r){var i,o,s,n,a=0;for(i=s=r?t.pop():t.shift();t.length;){if(o=r?t.pop():t.shift(),a+(n=N(i,o))>e){i=[i[0]+(o[0]-i[0])*(e-a)/n,i[1]+(o[1]-i[1])*(e-a)/n],n=N(i,s),r?(t.push(o),t.push(i),t.push([i[0]+(s[0]-i[0])/n,i[1]+(s[1]-i[1])/n])):(t.unshift(o),t.unshift(i),t.unshift([i[0]+(s[0]-i[0])/n,i[1]+(s[1]-i[1])/n]));break}a+=n,i=o}return[s,i]}_splitInto(t,e,r){var i,o,s,n=this._noOverlap?1:.9,a=[],l=0;for(i=1;o=t[i];i++)l+=N(t[i-1],o);var h=Math.max(r||2,l/(e||255)),d=t[0];l=0;var u=[d];for(i=1,o=t[1];i<t.length;){var f=o[0]-d[0],c=o[1]-d[1];if(l+(s=Math.sqrt(f*f+c*c))>h){var g=(h-l)/s;u.push([d[0]+f*g,d[1]+c*g]),a.push(u),u=[d=[d[0]+f*g*n,d[1]+c*g*n]],l=0}else l+=s,d=o,u.push(d),o=t[++i]}return a.push(u),a}},U=o("1B70O"),k=o("jZUWm");var Z=o("ejLRd"),H=o("fkmMz"),V=o("6yJ0x"),Y=o("iGyOD");T=o("hvEnP");(0,k.default)(t('<div> <h2> Day 2: lines Flow lines style </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.style.FlowLine.html" target="_new"> ol-ext FlowLine Style </a> to display professionnal mobility (<a href="https://www.insee.fr/fr/statistiques/4509353" target="_new"> INSEE data &copy; 2017 </a>) </p> </div>'));const B=new(0,R.default)({layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"});U.default.addLayer(B),U.default.getView().setMinZoom(6),U.default.getView().setCenter([251333,5895217]);const Q=new x({source:new(0,A.default)({url:"https://viglino.github.io/ol-ext/examples/data/departements.geojson",format:new(0,I.default),attributions:["&copy; <a href='https://www.insee.fr'>INSEE</a>","&copy; <a href='https://www.data.gouv.fr/fr/datasets/geofla-r/'>IGN</a>"]})});U.default.addLayer(Q);const X={},K=Q.getSource().on("change",(function(t){if((0,Z.unByKey)(K),"ready"===Q.getSource().getState()){let t;Q.getSource().getFeatures().forEach((function(e){let r,i=e.getGeometry();if("41"===e.get("id")&&(t=e),i.getInteriorPoint)r=i.getInteriorPoint().getFirstCoordinate();else{var o=0;i.getPolygons().forEach((function(t){var e=t.getArea();o<e&&(o=e,r=t.getInteriorPoint().getFirstCoordinate())}))}X[e.get("id")]={xy:r,data:[]}})),H.default.get({url:"https://viglino.github.io/ol-ext/examples/data/mobilite-2017.csv",dataType:"CSV",success:function(t){(t=t.split("\n")).shift(),t.forEach((function(t){t=t.split(","),X[t[0]]&&X[t[1]]&&X[t[0]].data.push({dep:t[1],xy:X[t[1]].xy,flow:parseInt(t[2])})}))}}),setTimeout((function(){}),0)}}));const J=new x({source:new(0,A.default),style:function(t,e){return new W({color:"red",color2:"yellow",width:2,width2:t.get("flow"),offset0:10,arrow:1,zIndex:-t.getGeometry().getLastCoordinate()[1]})}});U.default.addLayer(J);var $=new(0,V.default)({cursor:"pointer",layers:[Q]});U.default.addInteraction($),$.on("enter",(function(t){const e=t.feature;if(J.getSource().clear(),e){const t=e.get("id"),r=X[t];r.data.forEach((function(e){if(e.flow>300&&e.dep!==t){const t=new(0,Y.default)(new(0,T.default)([r.xy,e.xy]));t.set("flow",Math.max(2,Math.min(30,e.flow/300))),t.set("flux",e.flow.toLocaleString()),J.getSource().addFeature(t)}}))}})),$.on("leave",(function(t){J.getSource().clear()}));