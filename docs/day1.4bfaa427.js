function t(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},n=e.parcelRequirecc54;null==n&&((n=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){r[t]=e},e.parcelRequirecc54=n),n.register("hMeZw",(function(e,i){t(e.exports,"default",(()=>c));var r=n("9LzRi"),s=n("cw4dl"),o=n("av38f"),a=n("lVQul"),l=n("jZ9vT");class h extends r.default{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(s.default.CHANGE)}release(){this.state===o.default.ERROR&&this.setState(o.default.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==o.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==o.default.LOADED){t.interimTile=null;break}t.getState()==o.default.LOADING?e=t:t.getState()==o.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,a.abstract)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const r=e-i+1e3/60;return r>=this.transition_?1:(0,l.easeIn)(r/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}var c=h})),n.register("85w1a",(function(e,i){t(e.exports,"default",(()=>a));var r=n("1rfTO"),s=n("9YraL");class o extends r.default{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=(0,s.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove((0,s.getKey)(t.tileCoord)),t.release())}.bind(this))}}var a=o})),n.register("1rfTO",(function(e,i){t(e.exports,"default",(()=>s));var r=n("eJ4LZ");var s=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return(0,r.assert)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return(0,r.assert)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,r.assert)(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}})),n.register("9YraL",(function(e,i){function r(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function n(t,e,i){return t+"/"+e+"/"+i}function s(t){return n(t[0],t[1],t[2])}function o(t){const[e,i,r]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return n(e,i,r)}function a(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function h(t,e){const i=t[0],r=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const s=e.getFullTileRange(i);return!s||s.containsXY(r,n)}t(e.exports,"createOrUpdate",(()=>r)),t(e.exports,"getKeyZXY",(()=>n)),t(e.exports,"getKey",(()=>s)),t(e.exports,"getCacheKeyForTileKey",(()=>o)),t(e.exports,"fromKey",(()=>a)),t(e.exports,"hash",(()=>l)),t(e.exports,"withinExtentAndZ",(()=>h))})),n.register("co8nU",(function(e,i){t(e.exports,"default",(()=>f));var r=n("jRKCY"),s=n("3QMf6"),o=n("eJ4LZ"),a=n("a6roo"),l=n("jZquI"),h=n("9YraL"),c=n("4NB4B"),u=n("kBSVF"),d=n("6BjcK");const g=[0,0,0];var f=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,o.assert)((0,u.isSorted)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,o.assert)(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,l.getTopLeft)(i)),(0,o.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,o.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:s.DEFAULT_TILE_SIZE,(0,o.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const n=new(0,r.default)(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const r=this.getTileRangeForExtentAndZ(t,e);for(let t=r.minX,n=r.maxX;t<=n;++t)for(let n=r.minY,s=r.maxY;n<=s;++n)i([e,t,n])}forEachTileCoordParentTileRange(t,e,i,n){let s,o,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);h>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=(0,r.createOrUpdate)(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,h,i),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return(0,r.createOrUpdate)(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],s=t[1],o=t[2];if(e===n)return(0,r.createOrUpdate)(s,o,s,o,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),a=Math.floor(s*t),l=Math.floor(o*t);if(e<n)return(0,r.createOrUpdate)(a,a,l,l,i);const h=Math.floor(t*(s+1))-1,c=Math.floor(t*(o+1))-1;return(0,r.createOrUpdate)(a,h,l,c,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeExtent(t,e,i){const r=this.getOrigin(t),n=this.getResolution(t),s=(0,d.toSize)(this.getTileSize(t),this.tmpSize_),o=r[0]+e.minX*s[0]*n,a=r[0]+(e.maxX+1)*s[0]*n,h=r[1]+e.minY*s[1]*n,c=r[1]+(e.maxY+1)*s[1]*n;return(0,l.createOrUpdate)(o,h,a,c,i)}getTileRangeForExtentAndZ(t,e,i){const n=g;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);const s=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),(0,r.createOrUpdate)(s,n[1],o,n[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=(0,d.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=(0,d.toSize)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*n[0]*r,o=i[1]-(t[2]+1)*n[1]*r,a=s+n[0]*r,h=o+n[1]*r;return(0,l.createOrUpdate)(s,o,a,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,n){const s=this.getZForResolution(i),o=i/this.getResolution(s),l=this.getOrigin(s),c=(0,d.toSize)(this.getTileSize(s),this.tmpSize_);let u=o*(t-l[0])/i/c[0],g=o*(l[1]-e)/i/c[1];return r?(u=(0,a.ceil)(u,5)-1,g=(0,a.ceil)(g,5)-1):(u=(0,a.floor)(u,5),g=(0,a.floor)(g,5)),(0,h.createOrUpdate)(s,u,g,n)}getTileCoordForXYAndZ_(t,e,i,r,n){const s=this.getOrigin(i),o=this.getResolution(i),l=(0,d.toSize)(this.getTileSize(i),this.tmpSize_);let c=(t-s[0])/o/l[0],u=(s[1]-e)/o/l[1];return r?(c=(0,a.ceil)(c,5)-1,u=(0,a.ceil)(u,5)-1):(c=(0,a.floor)(c,5),u=(0,a.floor)(u,5)),(0,h.createOrUpdate)(i,c,u,n)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,u.linearFindNearest)(this.resolutions_,t,e||0);return(0,a.clamp)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,c.intersectsLinearRing)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}})),n.register("jRKCY",(function(e,i){t(e.exports,"createOrUpdate",(()=>n)),t(e.exports,"default",(()=>s));class r{constructor(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function n(t,e,i,n,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=i,s.maxY=n,s):new r(t,e,i,n)}var s=r})),n.register("5k6kp",(function(e,i){t(e.exports,"default",(()=>u));var r=n("65P3L"),s=n("cpPSZ"),o=n("av38f"),a=n("ga5CQ"),l=n("9YraL"),h=n("lVQul");class c extends s.default{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===c.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,h.getUid)(e),n=e.getState();let a;n==o.default.LOADING?(this.tileLoadingKeys_[i]=!0,a=r.default.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=n==o.default.ERROR?r.default.TILELOADERROR:n==o.default.LOADED?r.default.TILELOADEND:void 0),null!=a&&this.dispatchEvent(new(0,s.TileSourceEvent)(a,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=(0,a.expandUrl)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,a.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const r=(0,l.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}var u=c})),n.register("65P3L",(function(e,i){t(e.exports,"default",(()=>r));var r={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}})),n.register("cpPSZ",(function(e,i){t(e.exports,"TileSourceEvent",(()=>_)),t(e.exports,"default",(()=>m));var r=n("iTTi2"),s=n("205E0"),o=n("85w1a"),a=n("av38f"),l=n("lVQul"),h=n("eJ4LZ"),c=n("gzr8q"),u=n("9YraL"),d=n("5NhYx"),g=n("6BjcK");class f extends s.default{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.tileGrid&&(0,g.toSize)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new(0,o.default)(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,r){const n=this.getTileCacheForProjection(t);if(!n)return!1;let s,o,l,h=!0;for(let t=i.minX;t<=i.maxX;++t)for(let c=i.minY;c<=i.maxY;++c)o=(0,u.getKeyZXY)(e,t,c),l=!1,n.containsKey(o)&&(s=n.get(o),l=s.getState()===a.default.LOADED,l&&(l=!1!==r(s))),l||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,r,n){return(0,l.abstract)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,d.getForProjection)(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,h.assert)(null===e||(0,c.equivalent)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),s=(0,g.toSize)(r.getTileSize(t),this.tmpSize);return 1==n?s:(0,g.scale)(s,n,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,d.wrapX)(i,t,e)),(0,u.withinExtentAndZ)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,r){}}class _ extends r.default{constructor(t,e){super(t),this.tile=e}}var m=f})),n.register("5NhYx",(function(e,i){t(e.exports,"getForProjection",(()=>h)),t(e.exports,"wrapX",(()=>c)),t(e.exports,"extentFromProjection",(()=>g)),t(e.exports,"createXYZ",(()=>u));var r=n("co8nU"),s=n("3QMf6"),o=n("gzr8q"),a=n("jZquI"),l=n("6BjcK");function h(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){n=void 0!==n?n:"top-left";const s=d(t,e,i);return new(0,r.default)({extent:t,origin:(0,a.getCorner)(t,n),resolutions:s,tileSize:i})}(g(t),e,i,n)}(t),t.setDefaultTileGrid(e)),e}function c(t,e,i){const r=e[0],n=t.getTileCoordCenter(e),s=g(i);if((0,a.containsCoordinate)(s,n))return e;{const e=(0,a.getWidth)(s),i=Math.ceil((s[0]-n[0])/e);return n[0]+=e*i,t.getTileCoordForCoordAndZ(n,r)}}function u(t){const e=t||{},i=e.extent||(0,o.get)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:d(i,e.maxZoom,e.tileSize,e.maxResolution)};return new(0,r.default)(n)}function d(t,e,i,r){e=void 0!==e?e:s.DEFAULT_MAX_ZOOM,i=(0,l.toSize)(void 0!==i?i:s.DEFAULT_TILE_SIZE);const n=(0,a.getHeight)(t),o=(0,a.getWidth)(t);r=r>0?r:Math.max(o/i[0],n/i[1]);const h=e+1,c=new Array(h);for(let t=0;t<h;++t)c[t]=r/Math.pow(2,t);return c}function g(t){let e=(t=(0,o.get)(t)).getExtent();if(!e){const i=180*o.METERS_PER_UNIT.degrees/t.getMetersPerUnit();e=(0,a.createOrUpdate)(-i,-i,i,i)}return e}})),n.register("ga5CQ",(function(e,i){t(e.exports,"createFromTemplates",(()=>l)),t(e.exports,"createFromTileUrlFunctions",(()=>h)),t(e.exports,"expandUrl",(()=>c));var r=n("eJ4LZ"),s=n("a6roo"),o=n("9YraL");function a(t,e){const i=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(a,l,h){return a?t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(s,a[2].toString()).replace(o,(function(){const t=a[0],i=e.getFullTileRange(t);(0,r.assert)(i,55);return(i.getHeight()-a[2]-1).toString()})):void 0}}function l(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=a(t[n],e);return h(r)}function h(t){return 1===t.length?t[0]:function(e,i,r){if(e){const n=(0,o.hash)(e),a=(0,s.modulo)(n,t.length);return t[a](e,i,r)}}}function c(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const r=i[1].charCodeAt(0),n=i[2].charCodeAt(0);let s;for(s=r;s<=n;++s)e.push(t.replace(i[0],String.fromCharCode(s)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const r=parseInt(i[2],10);for(let n=parseInt(i[1],10);n<=r;n++)e.push(t.replace(i[0],n.toString()));return e}return e.push(t),e}})),n.register("eEuqc",(function(e,i){t(e.exports,"default",(()=>a));var r=n("g0oXy"),s=n("1FnBm");class o extends r.default{constructor(t){super(t)}createRenderer(){return new(0,s.default)(this)}}var a=o})),n.register("g0oXy",(function(e,i){t(e.exports,"default",(()=>a));var r=n("2K2IB"),s=n("8ElLP");class o extends r.default{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(s.default.PRELOAD)}setPreload(t){this.set(s.default.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(s.default.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(s.default.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}var a=o})),n.register("8ElLP",(function(e,i){t(e.exports,"default",(()=>r));var r={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}})),n.register("1FnBm",(function(e,i){t(e.exports,"default",(()=>m));var r=n("ddIVC"),s=n("6EHBB"),o=n("lUH7Q"),a=n("jRKCY"),l=n("av38f"),h=n("14PDX"),c=n("jZquI"),u=n("gzr8q"),d=n("lVQul"),g=n("kBSVF"),f=n("6BjcK");class _ extends r.default{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,c.createEmpty)(),this.tmpTileRange_=new(0,a.default)(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==l.default.LOADED||i==l.default.EMPTY||i==l.default.ERROR&&!r}getTile(t,e,i,r){const n=r.pixelRatio,s=r.viewState.projection,o=this.getLayer();let a=o.getSource().getTile(t,e,i,n,s);return a.getState()==l.default.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),r=(0,h.apply)(e.pixelToCoordinateTransform,t.slice()),n=i.getExtent();if(n&&!(0,c.containsCoordinate)(n,r))return null;const a=e.pixelRatio,u=e.viewState.projection,d=e.viewState,g=i.getRenderSource(),_=g.getTileGridForProjection(d.projection),m=g.getTilePixelRatio(e.pixelRatio);for(let t=_.getZForResolution(d.resolution);t>=_.getMinZoom();--t){const e=_.getTileCoordForCoordAndZ(r,t),i=g.getTile(t,e[1],e[2],a,u);if(!(i instanceof s.default||i instanceof o.default)||i instanceof o.default&&i.getState()===l.default.EMPTY)return null;if(i.getState()!==l.default.LOADED)continue;const n=_.getOrigin(t),h=(0,f.toSize)(_.getTileSize(t)),c=_.getResolution(t),p=Math.floor(m*((r[0]-n[0])/c-e[1]*h[0])),T=Math.floor(m*((n[1]-r[1])/c-e[2]*h[1])),x=Math.round(m*g.getGutterForProjection(d.projection));return this.getImageData(i.getImage(),p+x,T+x)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,n=r.projection,s=r.resolution,o=r.center,a=r.rotation,f=t.pixelRatio,_=this.getLayer(),m=_.getSource(),p=m.getRevision(),T=m.getTileGridForProjection(n),x=T.getZForResolution(s,m.zDirection),E=T.getResolution(x);let C=t.extent;const R=t.viewState.resolution,v=m.getTilePixelRatio(f),F=Math.round((0,c.getWidth)(C)/R*f),S=Math.round((0,c.getHeight)(C)/R*f),w=i.extent&&(0,u.fromUserExtent)(i.extent,n);w&&(C=(0,c.getIntersection)(C,(0,u.fromUserExtent)(i.extent,n)));const P=E*F/2/v,I=E*S/2/v,y=[o[0]-P,o[1]-I,o[0]+P,o[1]+I],j=T.getTileRangeForExtentAndZ(C,x),L={};L[x]={};const O=this.createLoadedTileFinder(m,n,L),z=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;const Y=a?(0,c.getRotatedViewport)(r.center,R,a,t.size):void 0;for(let e=j.minX;e<=j.maxX;++e)for(let r=j.minY;r<=j.maxY;++r){if(a&&!T.tileCoordIntersectsViewport([x,e,r],Y))continue;const n=this.getTile(x,e,r,t);if(this.isDrawableTile(n)){const e=(0,d.getUid)(this);if(n.getState()==l.default.LOADED){L[x][n.tileCoord.toString()]=n;let t=n.inTransition(e);t&&1!==i.opacity&&(n.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(n)||(this.newTiles_=!0)}if(1===n.getAlpha(e,t.time))continue}const s=T.getTileCoordChildTileRange(n.tileCoord,M,z);let o=!1;s&&(o=O(x+1,s)),o||T.forEachTileCoordParentTileRange(n.tileCoord,O,M,z)}const b=E/s*f/v;(0,h.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,a,-F/2,-S/2);const X=(0,h.toString)(this.pixelTransform);this.useContainer(e,X,this.getBackground(t));const U=this.context,Z=U.canvas;(0,h.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,h.compose)(this.tempTransform,F/2,S/2,b,b,0,-F/2,-S/2),Z.width!=F||Z.height!=S?(Z.width=F,Z.height=S):this.containerReused||U.clearRect(0,0,F,S),w&&this.clipUnrotated(U,t,w),m.getInterpolate()||(U.imageSmoothingEnabled=!1),this.preRender(U,t),this.renderedTiles.length=0;let D,A,G,W=Object.keys(L).map(Number);W.sort(g.numberSafeCompareFunction),1!==i.opacity||this.containerReused&&!m.getOpaque(t.viewState.projection)?(D=[],A=[]):W=W.reverse();for(let e=W.length-1;e>=0;--e){const i=W[e],r=m.getTilePixelSize(i,f,n),s=T.getResolution(i)/E,o=r[0]*s*b,a=r[1]*s*b,l=T.getTileCoordForCoordAndZ((0,c.getTopLeft)(y),i),u=T.getTileCoordExtent(l),g=(0,h.apply)(this.tempTransform,[v*(u[0]-y[0])/E,v*(y[3]-u[3])/E]),_=v*m.getGutterForProjection(n),p=L[i];for(const e in p){const r=p[e],n=r.tileCoord,s=l[1]-n[1],h=Math.round(g[0]-(s-1)*o),u=l[2]-n[2],f=Math.round(g[1]-(u-1)*a),T=Math.round(g[0]-s*o),E=Math.round(g[1]-u*a),C=h-T,R=f-E,v=x===i,F=v&&1!==r.getAlpha((0,d.getUid)(this),t.time);let S=!1;if(!F)if(D){G=[T,E,T+C,E,T+C,E+R,T,E+R];for(let t=0,e=D.length;t<e;++t)if(x!==i&&i<A[t]){const e=D[t];(0,c.intersects)([T,E,T+C,E+R],[e[0],e[3],e[4],e[7]])&&(S||(U.save(),S=!0),U.beginPath(),U.moveTo(G[0],G[1]),U.lineTo(G[2],G[3]),U.lineTo(G[4],G[5]),U.lineTo(G[6],G[7]),U.moveTo(e[6],e[7]),U.lineTo(e[4],e[5]),U.lineTo(e[2],e[3]),U.lineTo(e[0],e[1]),U.clip())}D.push(G),A.push(i)}else U.clearRect(T,E,C,R);this.drawTileImage(r,t,T,E,C,R,_,v),D&&!F?(S&&U.restore(),this.renderedTiles.unshift(r)):this.renderedTiles.push(r),this.updateUsedTiles(t.usedTiles,m,r)}}return this.renderedRevision=p,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!(0,c.equals)(this.renderedExtent_,y),this.renderedExtent_=y,this.renderedPixelRatio=f,this.renderedProjection=n,this.manageTilePyramid(t,m,T,f,n,C,x,_.getPreload()),this.scheduleExpireCache(t,m),this.postRender(U,t),i.extent&&U.restore(),U.imageSmoothingEnabled=!0,X!==Z.style.transform&&(Z.style.transform=X),this.container}drawTileImage(t,e,i,r,n,s,o,a){const l=this.getTileImage(t);if(!l)return;const h=(0,d.getUid)(this),c=e.layerStatesArray[e.layerIndex],u=c.opacity*(a?t.getAlpha(h,e.time):1),g=u!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,o,o,l.width-2*o,l.height-2*o,i,r,n,s),g&&this.context.restore(),u!==c.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const r=(0,d.getUid)(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const r=(0,d.getUid)(e);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,e,i,r,n,s,o,a,h){const u=(0,d.getUid)(e);u in t.wantedTiles||(t.wantedTiles[u]={});const g=t.wantedTiles[u],f=t.tileQueue,_=i.getMinZoom(),m=t.viewState.rotation,p=m?(0,c.getRotatedViewport)(t.viewState.center,t.viewState.resolution,m,t.size):void 0;let T,x,E,C,R,v,F=0;for(v=_;v<=o;++v)for(x=i.getTileRangeForExtentAndZ(s,v,x),E=i.getResolution(v),C=x.minX;C<=x.maxX;++C)for(R=x.minY;R<=x.maxY;++R)m&&!i.tileCoordIntersectsViewport([v,C,R],p)||(o-v<=a?(++F,T=e.getTile(v,C,R,r,n),T.getState()==l.default.IDLE&&(g[T.getKey()]=!0,f.isKeyQueued(T.getKey())||f.enqueue([T,u,i.getTileCoordCenter(T.tileCoord),E])),void 0!==h&&h(T)):e.useTile(v,C,R,n));e.updateCacheSize(F,n)}}var m=_})),n.register("6EHBB",(function(e,i){t(e.exports,"default",(()=>h));var r=n("hMeZw"),s=n("av38f"),o=n("cgxQK"),a=n("kUxvm");class l extends r.default{constructor(t,e,i,r,n,s){super(t,e,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=n}getImage(){return this.image_}setImage(t){this.image_=t,this.state=s.default.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=s.default.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,o.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=s.default.LOADED:this.state=s.default.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==s.default.ERROR&&(this.state=s.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==s.default.IDLE&&(this.state=s.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,a.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var h=l})),n.register("lUH7Q",(function(e,i){t(e.exports,"default",(()=>_));var r=n("9ndmc"),s=n("cw4dl"),o=n("hMeZw"),a=n("av38f"),l=n("9JHmh"),h=n("gpSXC"),c=n("a6roo"),u=n("jZquI"),d=n("bsgMw"),g=n("cgxQK");class f extends o.default{constructor(t,e,i,n,s,o,d,g,f,_,m,p){super(s,a.default.IDLE,{interpolate:!!p}),this.renderEdges_=void 0!==m&&m,this.pixelRatio_=d,this.gutter_=g,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const T=n.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let E=this.sourceTileGrid_.getExtent();const C=x?(0,u.getIntersection)(T,x):T;if(0===(0,u.getArea)(C))return void(this.state=a.default.EMPTY);const R=t.getExtent();R&&(E=E?(0,u.getIntersection)(E,R):R);const v=n.getResolution(this.wrappedTileCoord_[0]),F=(0,h.calculateSourceExtentResolution)(t,i,C,v);if(!isFinite(F)||F<=0)return void(this.state=a.default.EMPTY);const S=void 0!==_?_:r.ERROR_THRESHOLD;if(this.triangulation_=new(0,l.default)(t,i,C,E,F*S,v),0===this.triangulation_.getTriangles().length)return void(this.state=a.default.EMPTY);this.sourceZ_=e.getZForResolution(F);let w=this.triangulation_.calculateSourceExtent();if(E&&(t.canWrapX()?(w[1]=(0,c.clamp)(w[1],E[1],E[3]),w[3]=(0,c.clamp)(w[3],E[1],E[3])):w=(0,u.getIntersection)(w,E)),(0,u.getArea)(w)){const t=e.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=f(this.sourceZ_,e,i,d);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=a.default.EMPTY)}else this.state=a.default.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==a.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=a.default.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],n="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,h.render)(r,n,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=a.default.LOADED}this.changed()}load(){if(this.state==a.default.IDLE){this.state=a.default.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){const n=e.getState();if(n==a.default.IDLE||n==a.default.LOADING){t++;const i=(0,d.listen)(e,s.default.CHANGE,(function(r){const n=e.getState();n!=a.default.LOADED&&n!=a.default.ERROR&&n!=a.default.EMPTY||((0,d.unlistenByKey)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){t.getState()==a.default.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(d.unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,g.releaseCanvas)(this.canvas_.getContext("2d")),h.canvasPool.push(this.canvas_),this.canvas_=null),super.release()}}var _=f})),n.register("9ndmc",(function(e,i){t(e.exports,"ERROR_THRESHOLD",(()=>r));const r=.5})),n.register("9JHmh",(function(e,i){t(e.exports,"default",(()=>a));var r=n("jZquI"),s=n("gzr8q"),o=n("a6roo");var a=class{constructor(t,e,i,n,o,a){this.sourceProj_=t,this.targetProj_=e;let l={};const h=(0,s.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,r.getWidth)(n)==(0,r.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,r.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,r.getWidth)(this.targetProj_.getExtent()):null;const c=(0,r.getTopLeft)(i),u=(0,r.getTopRight)(i),d=(0,r.getBottomRight)(i),g=(0,r.getBottomLeft)(i),f=this.transformInv_(c),_=this.transformInv_(u),m=this.transformInv_(d),p=this.transformInv_(g),T=10+(a?Math.max(0,Math.ceil(Math.log2((0,r.getArea)(i)/(a*a*65536)))):0);if(this.addQuad_(c,u,d,g,f,_,m,p,T),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,r){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const r=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-r<this.sourceWorldWidth_/2&&(e.source=i)}}.bind(this))}l={}}addTriangle_(t,e,i,r,n,s){this.triangles_.push({source:[r,n,s],target:[t,e,i]})}addQuad_(t,e,i,n,s,a,l,h,c){const u=(0,r.boundingExtent)([s,a,l,h]),d=this.sourceWorldWidth_?(0,r.getWidth)(u)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1;let _=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const s=(0,r.boundingExtent)([t,e,i,n]);_=(0,r.getWidth)(s)/this.targetWorldWidth_>.25||_}!f&&this.sourceProj_.isGlobal()&&d&&(_=d>.25||_)}if(!_&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!(0,r.intersects)(u,this.maxSourceExtent_))return;let m=0;if(!(_||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(h[0])&&isFinite(h[1])))if(c>0)_=!0;else if(m=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!_){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],r=this.transformInv_(e);let n;if(f){n=((0,o.modulo)(s[0],g)+(0,o.modulo)(l[0],g))/2-(0,o.modulo)(r[0],g)}else n=(s[0]+l[0])/2-r[0];const a=(s[1]+l[1])/2-r[1];_=n*n+a*a>this.errorThresholdSquared_}if(_){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const r=[(e[0]+i[0])/2,(e[1]+i[1])/2],o=this.transformInv_(r),u=[(n[0]+t[0])/2,(n[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,r,u,s,a,o,d,c-1),this.addQuad_(u,r,i,n,d,o,l,h,c-1)}else{const r=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=this.transformInv_(r),u=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=this.transformInv_(u);this.addQuad_(t,r,u,n,s,o,d,h,c-1),this.addQuad_(r,e,i,u,o,a,l,d,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(t,i,n,s,l,h),0==(14&m)&&this.addTriangle_(t,i,e,s,l,a),m&&(0==(13&m)&&this.addTriangle_(e,n,t,a,h,s),0==(7&m)&&this.addTriangle_(e,n,i,a,h,l))}calculateSourceExtent(){const t=(0,r.createEmpty)();return this.triangles_.forEach((function(e,i,n){const s=e.source;(0,r.extendCoordinate)(t,s[0]),(0,r.extendCoordinate)(t,s[1]),(0,r.extendCoordinate)(t,s[2])})),t}getTriangles(){return this.triangles_}}})),n.register("gpSXC",(function(e,i){t(e.exports,"canvasPool",(()=>h)),t(e.exports,"calculateSourceResolution",(()=>d)),t(e.exports,"calculateSourceExtentResolution",(()=>g)),t(e.exports,"render",(()=>f));var r=n("jZquI"),s=n("cgxQK"),o=n("gzr8q"),a=n("a6roo");let l;const h=[];function c(t,e,i,r,n){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(r,n),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(i,n)),t.restore()}function u(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function d(t,e,i,n){const s=(0,o.transform)(i,e,t);let a=(0,o.getPointResolution)(e,n,i);const l=e.getMetersPerUnit();void 0!==l&&(a*=l);const h=t.getMetersPerUnit();void 0!==h&&(a/=h);const c=t.getExtent();if(!c||(0,r.containsCoordinate)(c,s)){const e=(0,o.getPointResolution)(t,a,s)/a;isFinite(e)&&e>0&&(a/=e)}return a}function g(t,e,i,n){const s=(0,r.getCenter)(i);let o=d(t,e,s,n);return(!isFinite(o)||o<=0)&&(0,r.forEachCorner)(i,(function(i){return o=d(t,e,i,n),isFinite(o)&&o>0})),o}function f(t,e,i,n,o,d,g,f,_,m,p,T){const x=(0,s.createCanvasContext2D)(Math.round(i*t),Math.round(i*e),h);if(T||(x.imageSmoothingEnabled=!1),0===_.length)return x.canvas;function E(t){return Math.round(t*i)/i}x.scale(i,i),x.globalCompositeOperation="lighter";const C=(0,r.createEmpty)();_.forEach((function(t,e,i){(0,r.extend)(C,t.extent)}));const R=(0,r.getWidth)(C),v=(0,r.getHeight)(C),F=(0,s.createCanvasContext2D)(Math.round(i*R/n),Math.round(i*v/n));T||(F.imageSmoothingEnabled=!1);const S=i/n;_.forEach((function(t,e,i){const n=t.extent[0]-C[0],s=-(t.extent[3]-C[3]),o=(0,r.getWidth)(t.extent),a=(0,r.getHeight)(t.extent);t.image.width>0&&t.image.height>0&&F.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,n*S,s*S,o*S,a*S)}));const w=(0,r.getTopLeft)(g);return f.getTriangles().forEach((function(t,e,r){const s=t.source,o=t.target;let h=s[0][0],g=s[0][1],f=s[1][0],_=s[1][1],m=s[2][0],p=s[2][1];const R=E((o[0][0]-w[0])/d),v=E(-(o[0][1]-w[1])/d),S=E((o[1][0]-w[0])/d),P=E(-(o[1][1]-w[1])/d),I=E((o[2][0]-w[0])/d),y=E(-(o[2][1]-w[1])/d),j=h,L=g;h=0,g=0,f-=j,_-=L,m-=j,p-=L;const O=[[f,_,0,0,S-R],[m,p,0,0,I-R],[0,0,f,_,P-v],[0,0,m,p,y-v]],z=(0,a.solveLinearSystem)(O);if(z){if(x.save(),x.beginPath(),function(){if(void 0===l){const t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",c(t,4,5,4,0),c(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;l=u(e,0)||u(e,4)||u(e,8)}return l}()||!T){x.moveTo(S,P);const t=4,e=R-S,i=v-P;for(let r=0;r<t;r++)x.lineTo(S+E((r+1)*e/t),P+E(r*i/(t-1))),r!=t-1&&x.lineTo(S+E((r+1)*e/t),P+E((r+1)*i/(t-1)));x.lineTo(I,y)}else x.moveTo(S,P),x.lineTo(R,v),x.lineTo(I,y);x.clip(),x.transform(z[0],z[2],z[1],z[3],R,v),x.translate(C[0]-j,C[3]-L),x.scale(n/i,-n/i),x.drawImage(F.canvas,0,0),x.restore()}})),p&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,f.getTriangles().forEach((function(t,e,i){const r=t.target,n=(r[0][0]-w[0])/d,s=-(r[0][1]-w[1])/d,o=(r[1][0]-w[0])/d,a=-(r[1][1]-w[1])/d,l=(r[2][0]-w[0])/d,h=-(r[2][1]-w[1])/d;x.beginPath(),x.moveTo(o,a),x.lineTo(n,s),x.lineTo(l,h),x.closePath(),x.stroke()})),x.restore()),x.canvas}})),n.register("42VYg",(function(e,i){t(e.exports,"default",(()=>m));var r=n("cw4dl"),s=n("6EHBB"),o=n("lUH7Q"),a=n("85w1a"),l=n("av38f"),h=n("5k6kp"),c=n("gzr8q"),u=n("9YraL"),d=n("5NhYx"),g=n("lVQul");class f extends h.default{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:_,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:s.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const r=this.tileCacheForProjection[t];r.expireCache(r==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,c.equivalent)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,c.equivalent)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(!this.tileGrid||e&&!(0,c.equivalent)(e,t)){const e=(0,g.getUid)(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=(0,d.getForProjection)(t)),this.tileGridForProjection[e]}return this.tileGrid}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,c.equivalent)(e,t))return this.tileCache;{const e=(0,g.getUid)(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new(0,a.default)(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}}createTile_(t,e,i,n,s,o){const a=[t,e,i],h=this.getTileCoordForTileUrlFunction(a,s),c=h?this.tileUrlFunction(h,n,s):void 0,u=new this.tileClass(a,void 0!==c?l.default.IDLE:l.default.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(r.default.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,r,n){const s=this.getProjection();if(s&&n&&!(0,c.equivalent)(s,n)){const a=this.getTileCacheForProjection(n),l=[t,e,i];let h;const c=(0,u.getKey)(l);a.containsKey(c)&&(h=a.get(c));const d=this.getKey();if(h&&h.key==d)return h;{const t=this.getTileGridForProjection(s),e=this.getTileGridForProjection(n),i=this.getTileCoordForTileUrlFunction(l,n),u=new(0,o.default)(s,t,n,e,l,i,this.getTilePixelRatio(r),this.getGutter(),function(t,e,i,r){return this.getTileInternal(t,e,i,r,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return u.key=d,h?(u.interimTile=h,u.refreshInterimChain(),a.replace(c,u)):a.set(c,u),u}}return this.getTileInternal(t,e,i,r,s||n)}getTileInternal(t,e,i,r,n){let s=null;const o=(0,u.getKeyZXY)(t,e,i),a=this.getKey();if(this.tileCache.containsKey(o)){if(s=this.tileCache.get(o),s.key!=a){const h=s;s=this.createTile_(t,e,i,r,n,a),h.getState()==l.default.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(o,s)}}else s=this.createTile_(t,e,i,r,n,a),this.tileCache.set(o,s);return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=(0,c.get)(t);if(i){const t=(0,g.getUid)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function _(t,e){t.getImage().src=e}var m=f}));