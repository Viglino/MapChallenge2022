function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},o=t.parcelRequirecc54;null==o&&((o=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return i[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequirecc54=o);var r=o("7qsnY"),a=o("20LS2"),s=o("kPMpK"),l=o("1B70O"),h=o("jZUWm");class p{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new p({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var d=p;class c{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null}clone(){const e=this.getColor();return new c({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var u=c,f=o("4GUat"),g=o("fnScq"),m=(g=o("fnScq"),class extends g.default{constructor(e){"string"==typeof e&&(e={feoperation:e}),super(),e&&e.feoperation?(this._name=e.feoperation,this.element=document.createElementNS(m.NS||"http://www.w3.org/2000/svg",this._name),this.setProperties(e),e.operations instanceof Array&&this.appendChild(e.operations)):console.error("[SVGOperation]: no operation defined.")}getName(){return this._name}set(e,t){/^feoperation$|^operations$/.test(e)||(super.set(e,t),this.element.setAttribute(e,t))}setProperties(e){for(var t in e=e||{})this.set(t,e[t])}geElement(){return this.element}appendChild(e){e instanceof Array?e.forEach(function(e){this.appendChild(e)}.bind(this)):(e instanceof m||(e=new m(e)),this.element.appendChild(e.geElement()))}}),v=m,A=class extends g.default{constructor(e){e=e||{},super(),A.prototype.svg||(A.prototype.svg=document.createElementNS(this.NS,"svg"),A.prototype.svg.setAttribute("version","1.1"),A.prototype.svg.setAttribute("width",0),A.prototype.svg.setAttribute("height",0),A.prototype.svg.style.position="absolute",document.body.appendChild(A.prototype.svg)),this.element=document.createElementNS(this.NS,"filter"),this._id=e.id||"_ol_SVGFilter_"+A.prototype._id++,this.element.setAttribute("id",this._id),e.color&&this.element.setAttribute("color-interpolation-filters",e.color),e.operation&&this.addOperation(e.operation),A.prototype.svg.appendChild(this.element)}getId(){return this._id}remove(){this.element.remove()}addOperation(e){e instanceof Array?e.forEach(function(e){this.addOperation(e)}.bind(this)):(e instanceof v||(e=new v(e)),this.element.appendChild(e.geElement()))}grayscale(e){this.addOperation({feoperation:"feColorMatrix",type:"saturate",values:e||0})}luminanceToAlpha(e){e=e||{},this.addOperation({feoperation:"feColorMatrix",type:"luminanceToAlpha"}),e.gamma&&this.addOperation({feoperation:"feComponentTransfer",operations:[{feoperation:"feFuncA",type:"gamma",amplitude:e.gamma,exponent:1,offset:0}]})}applyTo(e){var t=document.createElement("CANVAS");return t.width=e.naturalWidth||e.width,t.height=e.naturalHeight||e.height,t.getContext("2d").filter="url(#"+this.getId()+")",t.getContext("2d").drawImage(e,0,0),t}};A.prototype.NS="http://www.w3.org/2000/svg",A.prototype.svg=null,A.prototype._id=0;var y=A,w=class extends y{constructor(e){super({id:(e=e||{}).id}),this.addOperation({feoperation:"feTurbulence",numOctaves:4,seed:0,type:"fractalNoise",baseFrequency:.2/(e.scale||1)}),this.addOperation({feoperation:"feDiffuseLighting","lighting-color":"rgb(255,255,255)",surfaceScale:1.5,kernelUnitLength:.01,diffuseConstant:1.1,result:"paper",operations:[{feoperation:"feDistantLight",elevation:e.light||50,azimuth:75}]}),this.addOperation({feoperation:"feBlend",in:"SourceGraphic",in2:"paper",mode:"multiply"})}setLight(e){this.element.querySelector("feDistantLight").setAttribute("elevation",e)}},C=o("agkzb"),_=class extends C.default{constructor(e){super(),this._svg={},e&&(e instanceof Array||(e=[e]),e.forEach(function(e){this.addSVGFilter(e)}.bind(this)))}addSVGFilter(e){var t="#"+e.getId();this._svg[t]=1,this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})}removeSVGFilter(e){var t="#"+e.getId();delete this._svg[t],this.dispatchEvent({type:"propertychange",key:"svg",oldValue:this._svg})}precompose(){}postcompose(e){var t=[];for(var i in this._svg)t.push("url("+i+")");t=t.join(" ");var n=document.createElement("canvas");n.width=e.context.canvas.width,n.height=e.context.canvas.height,n.getContext("2d").drawImage(e.context.canvas,0,0),t&&(e.context.save(),e.context.clearRect(0,0,n.width,n.height),e.context.filter=t,e.context.drawImage(n,0,0),e.context.restore())}},x=o("dUROT"),b=o("6yJ0x"),S=o("btuox"),L=o("7TB1l"),E=o("cgPpQ"),O=o("dEQmT"),D=o("fvrVu"),M=o("6pyIt"),J=(L=o("7TB1l"),E=o("cgPpQ"),O=o("dEQmT"),o("hvEnP")),F=o("23ytq");D.default.prototype.cspline=function(e){return this.calcCSpline_?(this.csplineGeometryRevision==this.getRevision()&&this.csplineOption==JSON.stringify(e)||(this.csplineGeometry_=this.calcCSpline_(e),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(e)),this.csplineGeometry_):this},M.default.prototype.calcCSpline_=function(e){for(var t=[],i=this.getGeometries(),n=0;n<i.length;n++)t.push(i[n].cspline(e));return new(0,M.default)(t)},L.default.prototype.calcCSpline_=function(e){for(var t=[],i=this.getLineStrings(),n=0;n<i.length;n++)t.push(i[n].cspline(e).getCoordinates());return new(0,L.default)(t)},E.default.prototype.calcCSpline_=function(e){for(var t=[],i=this.getCoordinates(),n=0;n<i.length;n++)t.push(new(0,J.default)(i[n]).cspline(e).getCoordinates());return new(0,E.default)(t)},O.default.prototype.calcCSpline_=function(e){for(var t=[],i=this.getPolygons(),n=0;n<i.length;n++)t.push(i[n].cspline(e).getCoordinates());return new(0,O.default)(t)};var G=function(e,t){t||(t={});var i="number"==typeof t.tension?t.tension:.5,n=0,o=e[0];e.forEach((function(e){n+=(0,F.ol_coordinate_dist2d)(o,e),o=e}));var r,a,s,l,h,p,d,c,u,f,g,m,v,A,y=t.resolution||n/e.length/(t.pointsPerSeg||10),w=[];function C(e,t,i,n){var o=i-e,r=n-t;return Math.sqrt(o*o+r*r)}for(r=e.slice(0),e.length>2&&e[0][0]==e[e.length-1][0]&&e[0][1]==e[e.length-1][1]?(r.unshift(e[e.length-2]),r.push(e[1])):(r.unshift(e[0]),r.push(e[e.length-1])),A=1;A<r.length-2;A++){var _=C(r[A][0],r[A][1],r[A+1][0],r[A+1][1]),x=Math.round(_/y),b=1;if(t.normalize){_=C(r[A+1][0],r[A+1][1],r[A-1][0],r[A-1][1]);var S=C(r[A+2][0],r[A+2][1],r[A][0],r[A][1]);b=_<S?_/S:S/_}for(l=(r[A+1][0]-r[A-1][0])*i*b,h=(r[A+2][0]-r[A][0])*i*b,p=(r[A+1][1]-r[A-1][1])*i*b,d=(r[A+2][1]-r[A][1])*i*b,v=0;v<=x;v++)m=v/x,c=2*Math.pow(m,3)-3*Math.pow(m,2)+1,u=-2*Math.pow(m,3)+3*Math.pow(m,2),f=Math.pow(m,3)-2*Math.pow(m,2)+m,g=Math.pow(m,3)-Math.pow(m,2),a=c*r[A][0]+u*r[A+1][0]+f*l+g*h,s=c*r[A][1]+u*r[A+1][1]+f*p+g*d,a&&s&&w.push([a,s])}return w};J.default.prototype.calcCSpline_=function(e){var t=this.getCoordinates(),i=G(t,e);return new(0,J.default)(i)};F=o("23ytq");O.default.prototype.scribbleFill=function(e){var t,i,n,o=[],r=this.getPolygons();for(t=0;i=r[t];t++){var a=i.scribbleFill(e);a&&o.push(a)}if(!o.length)return null;var s,l=o[0];for(t=0;n=o[t];t++){s=n.getLineStrings();for(var h=0;h<s.length;h++)l.appendLineString(s[h])}return l},E.default.prototype.scribbleFill=function(e){var t,i,n,o=e.interval,r=e.angle||Math.PI/2,a=this.clone();a.rotate(r,[0,0]);var s=a.getCoordinates(),l=s[0];for(t=1;t<s.length;t++)l.push([]),l=l.concat(s[t]);for(var h=a.getExtent(),p=[],d=(Math.floor(h[1]/o)+1)*o;d<h[3];d+=o)n=(0,F.ol_coordinate_splitH)(l,d,t),p=p.concat(n);if(!p.length)return null;var c=l.length-1,u=p[0][0].index;for(i=0;n=p[i];i++)p[i][0].index=(p[i][0].index-u+c)%c,p[i][1].index=(p[i][1].index-u+c)%c;for(var f=[];;){for(i=0;(n=p[i])&&n[0].done;i++);if(!n)break;for(var g=[];n;){n[0].done=!0,g.push(n[0].pt),g.push(n[1].pt);for(var m=n[0].pt[1]+o,v=1/0,A=null;p[i]&&!(p[i][0].pt[1]>m);){if(p[i][0].pt[1]===m){var y=Math.min((p[i][0].index-n[0].index+c)%c,(n[0].index-p[i][0].index+c)%c),w=Math.min((n[1].index-n[0].index+c)%c,(n[0].index-n[1].index+c)%c);y<v&&y<w&&(v=y,A=p[i][0].done?null:p[i])}i++}n=A}g.length&&f.push(g)}if(!f.length)return null;var C=new(0,L.default)(f);return C.rotate(-r,[0,0]),C.cspline({pointsPerSeg:8,tension:.9})};var P=function(e,t){switch(e.getType()){case"Polygon":return E.default.prototype.scribbleFill.call(e,t);case"MultiPolygon":return O.default.prototype.scribbleFill.call(e,t);default:return e}};function T(e,t){const i=[[31,119,180],[174,199,232],[255,127,14],[255,187,120],[44,160,44],[152,223,138],[214,39,40],[255,152,150],[148,103,189],[197,176,213],[140,86,75],[196,156,148],[227,119,194],[247,182,210],[127,127,127],[199,199,199],[188,189,34],[219,219,141],[23,190,207],[158,218,229]],n=Math.random()*Math.PI;e.set("angle",n);const o=i[Math.floor(Math.random()*i.length)];e.set("color",o);const r=Math.max(8e4,8*t),a={step:r,geom:P(e.getGeometry(),{interval:r,angle:n})};e._scribble=a}function U(e,t){const i=e.get("angle"),n=e.get("color"),o=Math.max(8e4,8*t),r=Math.max(2,2e4/t),a=[new(0,f.default)({stroke:new d({width:.5,color:n}),fill:new u({color:"transparent"})})];let s=e._scribble;return s&&s.step!==o&&(s={step:o,geom:P(e.getGeometry(),{interval:o,angle:i})},e._scribble=s),s&&a.push(new(0,f.default)({stroke:new d({width:r,color:n}),geometry:s.geom})),a}(0,h.default)(e('<div> <h2> Day 10: <strike>bad</strike> child map! </h2> <p> Use <a href="http://viglino.github.io/ol-ext/doc/doc-pages/ol.filter.Mask.html" target="_new"> ol-ext Scribble fill </a> to color countries on the map. </p> </div>'));var B=new(0,r.default)({source:new(0,a.default)({url:"https://openlayers.org/en/v4.6.5/examples/data/geojson/countries.geojson",format:new(0,s.default)}),style:U});l.default.addLayer(B);var N=new _,q=new w({scale:2,light:60});N.addSVGFilter(q),B.addFilter(N),l.default.addInteraction(new(0,b.default)({cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAihJREFUWEftlr/LEnEcx193KTQ89JQEDSKELi03BIbQ1uKQptAQYqtbQtDUIBHV2BCIgejk4B8guuhSBs8YYUGoCEa2nSbR8JCHxsfnDtSyu+qo5b7LHXfv7+f9+r6/P+4UnLUacAk4B2jAsbNu9irFXrJWjIE4cNfU33HYz1ZmB6ACOeAxcAE4DbwD7gEN2+oOBPsAXgHPgPM+n++5YRgCkgRaQB0YAA8d1LeV7AIcAq+BsKIoH0Oh0KGmaWfC4TDFYlGKCcQVs6rrAE+A+4CqqurnWCymNhqNs9FolHa7zXA4JJkU/3UCQzcTkFEfmascRVGWmUzmuF6vHwwGA+LxOOOxrEFotVqbELdt83UgkCkwTN0pueZyuVWlUllPTbVapdvtUqvJLjxpGxDWmnBgs18iRivrdSAQYDqdbqlHoxGRSGTrmZsQWwCaptHr9RyNyC2ILQBxbjabJBKJfwaxC/BWjlqnEOVymXw+/80wjJvmGeEIfFO0C/ACeHoSxK+TKBQKq1Kp9Gk+n98A3vy2s9lBAJaAdSAJwDVA5mAvRDab/drpdN7run4d0P/UXPqJ8UvgKuADLAB59wOEruukUql5v9/vzGazW39jbPW1Ri57L7ADsAURDAZJp9NfJpNJcblcFtwwtxKQ62XzG/ABuLhTfJ2E3+83FotFHii7Zb4JIPePgAd7ilv7Ur6Grja7/wFXzX5WzAPwEvAS8BLwEvAS+O8JfAcOZLAhCzd6QAAAAABJRU5ErkJggg==") 0 13, auto'}));const R=new(0,x.default)({style:U,condition:S.click});function V(){const e=l.default.getView().calculateExtent(),t=[(e[0]+e[2])/2+(Math.random()-.5)*(e[2]-e[0])/2,(e[1]+e[3])/2+(Math.random()-.5)*(e[3]-e[1])/2],i=l.default.getFeaturesAtPixel(l.default.getPixelFromCoordinate(t)).pop();i?(T(i,l.default.getView().getResolution()),k=setTimeout(V,2e3*Math.random()+500)):k=setTimeout(V)}l.default.addInteraction(R),R.on("select",(e=>{e.selected.forEach((e=>{T(e,l.default.getView().getResolution()),clearTimeout(k),k=setTimeout(V,2e3*Math.random()+3e3)})),R.getFeatures().clear()}));let k=setTimeout(V,1e3);