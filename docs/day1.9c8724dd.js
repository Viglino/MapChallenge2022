function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},s=e.parcelRequirecc54;null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var s={id:t,exports:{}};return i[t]=s,e.call(s.exports,s,s.exports),s.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){r[t]=e},e.parcelRequirecc54=s);var n=s("6gELa"),o=s("gNqjI"),a=s("cw4dl"),l=s("hMeZw"),h=s("av38f");class u extends l.default{constructor(t,e,i,r,s,n){super(t,e,n),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==h.default.IDLE&&(this.setState(h.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(h.default.ERROR)}setFeatures(t){this.features_=t,this.setState(h.default.LOADED)}setLoader(t){this.loader_=t}}var d=u,f=s("85w1a"),c=s("co8nU"),p=(h=s("av38f"),s("5k6kp")),g=(l=s("hMeZw"),s("cgxQK")),w=s("lVQul");const y=[];class F extends l.default{constructor(t,e,i,r){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){const e=(0,w.getUid)(t);return e in this.context_||(this.context_[e]=(0,g.createCanvasContext2D)(1,1,y)),this.context_[e]}hasContext(t){return(0,w.getUid)(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=(0,w.getUid)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];(0,g.releaseCanvas)(e),y.push(e.canvas),delete this.context_[t]}super.release()}}var x=F,m=s("3QMf6"),_=s("jZquI"),b=s("5NhYx"),v=s("9YraL"),S=s("kKEgb"),C=s("kWPIP"),T=s("6BjcK");class P extends p.default{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||(0,b.extentFromProjection)(e),r=t.tileGrid||(0,b.createXYZ)({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:r,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:E,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new(0,f.default)(this.tileCache.highWaterMark),this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:d,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],i=this.tileCache;if(0===i.getCount())return e;const r=(0,v.fromKey)(i.peekFirstKey())[0],s=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]!==r||i.getState()!==h.default.LOADED)return;const n=i.getSourceTiles();for(let i=0,r=n.length;i<r;++i){const r=n[i],o=r.tileCoord;if((0,_.intersects)(t,s.getTileCoordExtent(o))){const i=r.getFeatures();if(i)for(let r=0,s=i.length;r<s;++r){const s=i[r],n=s.getGeometry();(0,_.intersects)(t,n.getExtent())&&e.push(s)}}}})),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),r=Object.keys(e).reduce(((t,e)=>{const r=(0,v.getCacheKeyForTileKey)(e),s=i.peek(r);if(s){const e=s.sourceTiles;for(let i=0,r=e.length;i<r;++i)t[e[i].getKey()]=!0}return t}),{});super.expireCache(t,e),this.sourceTileCache.expireCache(r)}getSourceTiles(t,e,i){if(i.getState()===h.default.IDLE){i.setState(h.default.LOADING);const r=i.wrappedTileCoord,s=this.getTileGridForProjection(e),n=s.getTileCoordExtent(r),o=r[0],l=s.getResolution(o);(0,_.buffer)(n,-l,n);const u=this.tileGrid,d=u.getExtent();d&&(0,_.getIntersection)(n,d,n);const f=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(n,f,(r=>{const s=this.tileUrlFunction(r,t,e),n=this.sourceTileCache.containsKey(s)?this.sourceTileCache.get(s):new this.tileClass(r,s?h.default.IDLE:h.default.EMPTY,s,this.format_,this.tileLoadFunction);i.sourceTiles.push(n);const o=n.getState();if(o<h.default.LOADED){const t=e=>{this.handleTileChange(e);const r=n.getState();if(r===h.default.LOADED||r===h.default.ERROR){const e=n.getKey();e in i.errorTileKeys?n.getState()===h.default.LOADED&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,r===h.default.ERROR?i.errorTileKeys[e]=!0:n.removeEventListener(a.default.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,S.isEmpty)(i.errorTileKeys)?h.default.LOADED:h.default.ERROR)}};n.addEventListener(a.default.CHANGE,t),i.loadingSourceTiles++}o===h.default.IDLE&&(n.extent=u.getTileCoordExtent(r),n.projection=e,n.resolution=u.getResolution(r[0]),this.sourceTileCache.set(s,n),n.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((t=>t.getState()===h.default.ERROR))?h.default.ERROR:h.default.LOADED)}return i.sourceTiles}getTile(t,e,i,r,s){const n=(0,v.getKeyZXY)(t,e,i),o=this.getKey();let a;if(this.tileCache.containsKey(n)&&(a=this.tileCache.get(n),a.key===o))return a;const l=[t,e,i];let u=this.getTileCoordForTileUrlFunction(l,s);const d=this.getTileGrid().getExtent(),f=this.getTileGridForProjection(s);if(u&&d){const e=f.getTileCoordExtent(u);(0,_.buffer)(e,-f.getResolution(t),e),(0,_.intersects)(d,e)||(u=null)}let c=!0;if(null!==u){const e=this.tileGrid,i=f.getResolution(t),n=e.getZForResolution(i,1),o=f.getTileCoordExtent(u);(0,_.buffer)(o,-i,o),e.forEachTileCoord(o,n,function(t){c=c&&!this.tileUrlFunction(t,r,s)}.bind(this))}const p=new x(l,c?h.default.EMPTY:h.default.IDLE,u,this.getSourceTiles.bind(this,r,s));return p.key=o,a?(p.interimTile=a,p.refreshInterimChain(),this.tileCache.replace(n,p)):this.tileCache.set(n,p),p}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const t=this.tileGrid,r=t.getResolutions().slice(),s=r.map((function(e,i){return t.getOrigin(i)})),n=r.map((function(e,i){return t.getTileSize(i)})),o=m.DEFAULT_MAX_ZOOM+1;for(let t=r.length;t<o;++t)r.push(r[t-1]/2),s.push(s[t-1]),n.push(n[t-1]);i=new(0,c.default)({extent:t.getExtent(),origins:s,resolutions:r,tileSizes:n}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),s=(0,T.toSize)(r.getTileSize(t),this.tmpSize);return[Math.round(s[0]*e),Math.round(s[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}var k=P;function E(t,e){t.setLoader((function(i,r,s){(0,C.loadFeaturesXhr)(e,t.getFormat(),i,r,s,t.onLoad.bind(t),t.onError.bind(t))}))}var V,M=s("9z1G1"),D=s("hvEnP"),R=s("7TB1l"),O=s("ljDIj"),G=s("dEQmT");V=L;var I=s("7y6mg");function L(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}L.Varint=0,L.Fixed64=1,L.Bytes=2,L.Fixed32=5;var B="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function j(t){return t.type===L.Bytes?t.readVarint()+t.pos:t.pos+1}function A(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function z(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var s=i.pos-1;s>=t;s--)i.buf[s+r]=i.buf[s]}function N(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function U(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function K(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Z(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function X(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Y(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function q(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function W(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function H(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Q(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function J(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function $(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}L.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,e,this),this.pos===n&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Q(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=$(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Q(this.buf,this.pos)+4294967296*Q(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Q(this.buf,this.pos)+4294967296*$(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=I.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=I.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,s,n=i.buf;if(s=n[i.pos++],r=(112&s)>>4,s<128)return A(t,r,e);if(s=n[i.pos++],r|=(127&s)<<3,s<128)return A(t,r,e);if(s=n[i.pos++],r|=(127&s)<<10,s<128)return A(t,r,e);if(s=n[i.pos++],r|=(127&s)<<17,s<128)return A(t,r,e);if(s=n[i.pos++],r|=(127&s)<<24,s<128)return A(t,r,e);if(s=n[i.pos++],r|=(1&s)<<31,s<128)return A(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&B?function(t,e,i){return B.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){var r="",s=e;for(;s<i;){var n,o,a,l=t[s],h=null,u=l>239?4:l>223?3:l>191?2:1;if(s+u>i)break;1===u?l<128&&(h=l):2===u?128==(192&(n=t[s+1]))&&(h=(31&l)<<6|63&n)<=127&&(h=null):3===u?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((h=(15&l)<<12|(63&n)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(n=t[s+1],o=t[s+2],a=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&n)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),s+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==L.Bytes)return t.push(this.readVarint(e));var i=j(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==L.Bytes)return t.push(this.readSVarint());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==L.Bytes)return t.push(this.readBoolean());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==L.Bytes)return t.push(this.readFloat());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==L.Bytes)return t.push(this.readDouble());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==L.Bytes)return t.push(this.readFixed32());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==L.Bytes)return t.push(this.readSFixed32());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==L.Bytes)return t.push(this.readFixed64());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==L.Bytes)return t.push(this.readSFixed64());var e=j(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===L.Varint)for(;this.buf[this.pos++]>127;);else if(e===L.Bytes)this.pos=this.readVarint()+this.pos;else if(e===L.Fixed32)this.pos+=4;else{if(e!==L.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),J(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),J(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),J(this.buf,-1&t,this.pos),J(this.buf,Math.floor(2.3283064365386963e-10*t),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),J(this.buf,-1&t,this.pos),J(this.buf,Math.floor(2.3283064365386963e-10*t),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,s,n=0;n<e.length;n++){if((r=e.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):s=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[i++]=239,t[i++]=191,t[i++]=189,s=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&z(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),I.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),I.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&z(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,L.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,N,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,U,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,X,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,K,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Z,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Y,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,q,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,W,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,H,e)},writeBytesField:function(t,e){this.writeTag(t,L.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,L.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,L.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,L.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,L.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,L.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,L.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,L.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,L.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,L.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var tt=s("j2K3b"),et=s("cgPpQ"),it=s("5zIbz"),rt=s("iGyOD"),st=(tt=s("j2K3b"),O=s("ljDIj"),D=s("hvEnP"),R=s("7TB1l"),G=s("dEQmT"),et=s("cgPpQ"),s("14PDX")),nt=(_=s("jZquI"),s("kBSVF")),ot=s("ec4vu"),at=s("gzr8q"),lt=s("2cCpz"),ht=s("1fqgz"),ut=s("88eMt"),dt=s("bsQCi");const ft=(0,st.create)();class ct{constructor(t,e,i,r,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,_.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,_.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,_.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,ot.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,ut.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,ot.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,ht.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const s=i[r],n=(0,ht.interpolatePoint)(t,e,s,2,.5);(0,nt.extend)(this.flatMidpoints_,n),e=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,at.get)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){const t=(0,_.getHeight)(i)/(0,_.getHeight)(e);(0,st.compose)(ft,i[0],i[3],t,-t,0,0,0),(0,dt.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,ft,this.flatCoordinates_)}}getEnds(){return this.ends_}}ct.prototype.getEndss=ct.prototype.getEnds,ct.prototype.getFlatCoordinates=ct.prototype.getOrientedFlatCoordinates;var pt=ct,gt=s("eJ4LZ");at=s("gzr8q"),lt=s("2cCpz");class wt extends M.default{constructor(t){super(),t=t||{},this.dataProjection=new(0,it.default)({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:pt,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,r){t.pos=e.geometry;const s=t.readVarint()+t.pos;let n=1,o=0,a=0,l=0,h=0,u=0;for(;t.pos<s;){if(!o){const e=t.readVarint();n=7&e,o=e>>3}o--,1===n||2===n?(a+=t.readSVarint(),l+=t.readSVarint(),1===n&&h>u&&(r.push(h),u=h),i.push(a,l),h+=2):7===n?h>u&&(i.push(i[u],i[u+1]),h+=2):(0,gt.assert)(!1,59)}h>u&&(r.push(h),u=h)}createFeature_(t,e,i){const r=e.type;if(0===r)return null;let s;const n=e.properties;let o;this.idProperty_?(o=n[this.idProperty_],delete n[this.idProperty_]):o=e.id,n[this.layerName_]=e.layer.name;const a=[],l=[];this.readRawGeometry_(t,e,a,l);const h=function(t,e){let i;1===t?i=1===e?"Point":"MultiPoint":2===t?i=1===e?"LineString":"MultiLineString":3===t&&(i="Polygon");return i}(r,l.length);if(this.featureClass_===pt)s=new this.featureClass_(h,a,l,n,o),s.transform(i.dataProjection);else{let t;if("Polygon"==h){const e=(0,lt.inflateEnds)(a,l);t=e.length>1?new(0,G.default)(a,"XY",e):new(0,et.default)(a,"XY",l)}else t="Point"===h?new(0,tt.default)(a,"XY"):"LineString"===h?new(0,D.default)(a,"XY"):"MultiPoint"===h?new(0,O.default)(a,"XY"):"MultiLineString"===h?new(0,R.default)(a,"XY",l):null;s=new(0,this.featureClass_),this.geometryName_&&s.setGeometryName(this.geometryName_);const e=(0,M.transformGeometryWithOptions)(t,!1,i);s.setGeometry(e),void 0!==o&&s.setId(o),s.setProperties(n,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,i){const r=this.layers_;i=this.adaptOptions(i);const s=(0,at.get)(i.dataProjection);s.setWorldExtent(i.extent),i.dataProjection=s;const n=new(t(V))(e),o=n.readFields(yt,{}),a=[];for(const t in o){if(r&&!r.includes(t))continue;const e=o[t],l=e?[0,0,e.extent,e.extent]:null;s.setExtent(l);for(let t=0,r=e.length;t<r;++t){const r=mt(n,e,t),s=this.createFeature_(n,r,i);null!==s&&a.push(s)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function yt(t,e,i){if(3===t){const t={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(Ft,t,r),t.length=t.features.length,t.length&&(e[t.name]=t)}}function Ft(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){let r=null;const s=i.readVarint()+i.pos;for(;i.pos<s;)r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function xt(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t){const t=i.readVarint()+i.pos;for(;i.pos<t;){const t=e.layer.keys[i.readVarint()],r=e.layer.values[i.readVarint()];e.properties[t]=r}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function mt(t,e,i){t.pos=e.features[i];const r=t.readVarint()+t.pos,s={layer:e,type:0,properties:{}};return t.readFields(xt,s,r),s}var _t=wt;rt=s("iGyOD");s("37u5y");var bt,vt,St,Ct=s("6nlvT"),Tt=s("dUROT"),Pt=s("btuox"),kt=s("1B70O"),Et=s("l9IGS"),Vt=s("4lFOe"),Mt=s("d5AAH"),Dt=s("2zf1Y");bt=[255,255,255,1],vt=[0,153,255,1],St=[new(0,Et.default)({stroke:new(0,Mt.default)({color:bt,width:5})}),new(0,Et.default)({image:new(0,Vt.default)({radius:6,fill:new(0,Dt.default)({color:vt}),stroke:new(0,Mt.default)({color:bt,width:1.5})}),stroke:new(0,Mt.default)({color:vt,width:3}),fill:new(0,Dt.default)({color:[255,255,255,.5]})})];var Rt=function(t){if(!0===t)return St;t=t||{};var e=new(0,Dt.default)({color:t.fillColor||"rgba(255,255,255,0.4)"}),i=new(0,Mt.default)({color:t.color||"#3399CC",width:1.25});return[new(0,Et.default)({image:new(0,Vt.default)({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]},Ot=(Et=s("l9IGS"),s("h1ihb")),Gt=s("ej7yC");Mt=s("d5AAH"),Dt=s("2zf1Y");s("e1DCI"),s("5JlsX");Rt();const It={};function Lt(t){return"erp"===t.get("layer")?It[t.get("type_principal")]||It.default:[]}(0,Gt.default)((()=>{const t={J:"maki-disability",L:"maki-theatre",M:"maki-shop",N:"maki-restaurant",O:"maki-lodging",P:"maki-playground",R:"maki-school",RH:"maki-school",S:"maki-library",T:"maki-museum",U:"maki-hospital",V:"maki-religious-place_of_worship",W:"maki2-bank",X:"maki2-basketball",EF:"maki-ferry",GA:"maki-rail",PA:"maki-soccer",PS:"maki-parking",SG:"maki2-station",CTS:"maki2-station",OA:"maki2-mountain",REF:"maki2-mountain",default:"maki-circle"};Object.keys(t).forEach((e=>{It[e]=new(0,Et.default)({image:new(0,Ot.default)({glyph:t[e],form:"circle",radius:18,displacement:[0,0],fontSize:.8,color:[255,255,255],fill:new(0,Dt.default)({color:"#00AAFF"}),stroke:new(0,Mt.default)({color:[255,255,255],width:2})})})})),window.erpStyle=It}));var Bt=s("jZUWm");var jt=s("6yJ0x"),At=s("5VeMq");Gt=s("ej7yC");(0,Bt.default)(t('<div> <h2> Day 1: points "Open to the public" </h2> <p> POI from <a href="https://geoservices.ign.fr/bdtopo" target="_new">IGNFrance BDTopo.</a> <br> Use the ol-ext font symbol style to display points with <a href="https://labs.mapbox.com/maki-icons/" target="_new">Maki font symbols</a>. </p> </div>'));const zt=new(0,n.default)({layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"});zt.addFilter(new(0,Ct.default)({operation:"difference",color:"#FA0",value:1})),kt.default.addLayer(zt);const Nt=new(0,o.default)({title:"MVT",source:new k({format:new _t({featureClass:rt.default}),url:"https://wxs.ign.fr/topographie/geoportail/tms/1.0.0/BDTOPO/{z}/{x}/{y}.pbf"}),style:Lt});kt.default.getView().setMinZoom(16),kt.default.getView().setCenter([636860,5651388]),kt.default.addLayer(Nt),(0,Gt.default)((()=>{Nt.setStyle(Lt)}));const Ut=new(0,Tt.default)({hitTolerance:2,condition:Pt.click});Ut.on("select",(t=>{const e=t.selected[0];e&&console.log(e.getProperties())})),kt.default.addInteraction(Ut);const Kt=new(0,At.default)({positioning:"bottom-center"});kt.default.addOverlay(Kt);const Zt=new(0,jt.default)({cursor:"pointer",hitTolerance:2});Zt.on("leave",(()=>{Kt.hide()})),Zt.on("hover",(t=>{const e=t.feature;e?Kt.show(t.coordinate,e.get("libelle")||""):Kt.hide()})),kt.default.addInteraction(Zt);