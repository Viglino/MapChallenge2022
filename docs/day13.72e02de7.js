function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},i=t.parcelRequirecc54;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return r[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequirecc54=i),i.register("hddSm",(function(t,r){e(t.exports,"default",(()=>g));var n=i("ejLRd"),s=i("4DafG"),o=i("eEuqc"),a=i("610XN"),h=i("gNqjI"),l=i("dMe05"),u=i("8WefF"),f=i("jZquI"),c=i("iQyfo"),d=class extends s.default{constructor(e){e=e||{};var t=c.default.create("DIV",{className:e.switcherClass||"ol-layerswitcher"});super({element:t,target:e.target});var r=this;this.dcount=0,this.show_progress=e.show_progress,this.oninfo="function"==typeof e.oninfo?e.oninfo:null,this.onextent="function"==typeof e.onextent?e.onextent:null,this.hasextent=e.extent||e.onextent,this.hastrash=e.trash,this.reordering=!1!==e.reordering,this._layers=[],this._layerGroup=e.layerGroup&&e.layerGroup.getLayers?e.layerGroup:null,this.onchangeCheck="function"==typeof e.onchangeCheck?e.onchangeCheck:null,"function"==typeof e.displayInLayerSwitcher&&(this.displayInLayerSwitcher=e.displayInLayerSwitcher),e.target||(t.classList.add("ol-unselectable"),t.classList.add("ol-control"),t.classList.add(!1!==e.collapsed?"ol-collapsed":"ol-forceopen"),this.button=c.default.create("BUTTON",{type:"button",parent:t}),this.button.addEventListener("touchstart",(function(e){t.classList.toggle("ol-forceopen"),t.classList.add("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:t.classList.contains("ol-collapsed")}),e.preventDefault(),r.overflow()})),this.button.addEventListener("click",(function(){t.classList.toggle("ol-forceopen"),t.classList.add("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:!t.classList.contains("ol-forceopen")}),r.overflow()})),e.mouseover&&(t.addEventListener("mouseleave",(function(){t.classList.add("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:!0})})),t.addEventListener("mouseover",(function(){t.classList.remove("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:!1})}))),e.minibar&&(e.noScroll=!0),e.noScroll||(this.topv=c.default.create("DIV",{className:"ol-switchertopdiv",parent:t,click:function(){r.overflow("+50%")}}),this.botv=c.default.create("DIV",{className:"ol-switcherbottomdiv",parent:t,click:function(){r.overflow("-50%")}})),this._noScroll=e.noScroll),this.panel_=c.default.create("UL",{className:"panel"}),this.panelContainer_=c.default.create("DIV",{className:"panel-container",html:this.panel_,parent:t}),e.target||e.noScroll||c.default.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",(function(e){r.overflow(Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)))&&(e.stopPropagation(),e.preventDefault())})),this.header_=c.default.create("LI",{className:"ol-header",parent:this.panel_}),this.set("drawDelay",e.drawDelay||0),this.set("selection",e.selection),e.minibar&&setTimeout(function(){var e=c.default.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],(function(){e.refresh()}))}.bind(this))}displayInLayerSwitcher(e){return!1!==e.get("displayInLayerSwitcher")}setMap(e){if(super.setMap(e),this.drawPanel(),this._listener)for(var t in this._listener)(0,n.unByKey)(this._listener[t]);this._listener=null,e&&(this._listener={moveend:e.on("moveend",this.viewChange.bind(this)),size:e.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=e.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))}show(){this.element.classList.add("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!1})}hide(){this.element.classList.remove("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!0})}toggle(){this.element.classList.toggle("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!this.isOpen()})}isOpen(){return this.element.classList.contains("ol-forceopen")}setHeader(e){c.default.setHTML(this.header_,e)}overflow(e){if(this.button&&!this._noScroll){if(c.default.hidden(this.panel_))return void c.default.setStyle(this.element,{height:"auto"});var t=c.default.outerHeight(this.element),r=c.default.outerHeight(this.panel_),n=this.button.offsetTop+c.default.outerHeight(this.button),i=this.panel_.offsetTop-n;if(r>t-n){c.default.setStyle(this.element,{height:"100%"});var s=this.panel_.querySelectorAll("li.ol-visible .li-content")[0],o=s?2*c.default.getStyle(s,"height"):0;switch(e){case 1:i+=o;break;case-1:i-=o;break;case"+50%":i+=Math.round(t/2);break;case"-50%":i-=Math.round(t/2)}return i+r<=t-3*n/2?(i=t-3*n/2-r,c.default.hide(this.botv)):c.default.show(this.botv),i>=0?(i=0,c.default.hide(this.topv)):c.default.show(this.topv),c.default.setStyle(this.panel_,{top:i+"px"}),!0}return c.default.setStyle(this.element,{height:"auto"}),c.default.setStyle(this.panel_,{top:0}),c.default.hide(this.botv),c.default.hide(this.topv),!1}return!1}_setLayerForLI(e,t){var r=[];t.getLayers&&r.push(t.getLayers().on("change:length",this.drawPanel.bind(this))),e&&(r.push(t.on("change:opacity",function(){this.setLayerOpacity(t,e)}.bind(this))),r.push(t.on("change:visible",function(){this.setLayerVisibility(t,e)}.bind(this)))),r.push(t.on("propertychange",function(e){"displayInLayerSwitcher"!==e.key&&"openInLayerSwitcher"!==e.key&&"title"!==e.key&&"name"!==e.key||this.drawPanel(e)}.bind(this))),this._layers.push({li:e,layer:t,listeners:r})}setLayerOpacity(e,t){var r=t.querySelector(".layerswitcher-opacity-cursor");r&&(r.style.left=100*e.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:e})}setLayerVisibility(e,t){var r=t.querySelector(".ol-visibility");r&&(r.checked=e.getVisible()),e.getVisible()?t.classList.add("ol-visible"):t.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:e})}_clearLayerForLI(){this._layers.forEach((function(e){e.listeners.forEach((function(e){(0,n.unByKey)(e)}))})),this._layers=[]}_getLayerForLI(e){for(var t,r=0;t=this._layers[r];r++)if(t.li===e)return t.layer;return null}viewChange(){this.panel_.querySelectorAll("li").forEach(function(e){var t=this._getLayerForLI(e);t&&(this.testLayerVisibility(t)?e.classList.remove("ol-layer-hidden"):e.classList.add("ol-layer-hidden"))}.bind(this))}getPanel(){return this.panelContainer_}drawPanel(){if(this.getMap()){var e=this;this.dcount++,setTimeout((function(){e.drawPanel_()}),this.get("drawDelay")||0)}}drawPanel_(){if(!--this.dcount&&!this.dragging_){var e=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(e){e.classList.contains("ol-header")||e.remove()}.bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=e}}switchLayerVisibility(e,t){e.get("baseLayer")?(e.getVisible()||e.setVisible(!0),t.forEach((function(t){e!==t&&t.get("baseLayer")&&t.getVisible()&&t.setVisible(!1)}))):e.setVisible(!e.getVisible())}testLayerVisibility(e){if(!this.getMap())return!0;var t=this.getMap().getView().getResolution(),r=this.getMap().getView().getZoom();if(e.getMaxResolution()<=t||e.getMinResolution()>=t)return!1;if(e.getMinZoom&&(e.getMinZoom()>=r||e.getMaxZoom()<r))return!1;var n=e.getExtent();if(n){var i=this.getMap().getView().calculateExtent(this.getMap().getSize());return(0,f.intersects)(i,n)}return!0}dragOrdering_(e){e.stopPropagation(),e.preventDefault();var t,r,n,i,s,o=this,a=e.currentTarget.parentNode.parentNode,h=!0,l=this.panel_,u=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY;function f(e){if(t=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY,h&&Math.abs(u-t)>2&&(h=!1,a.classList.add("drag"),i=o._getLayerForLI(a),r=!1,s=o._getLayerForLI(a.parentNode.parentNode),n=c.default.create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:c.default.outerWidth(a),height:c.default.getStyle(a,"height")},parent:l}),o.element.classList.add("drag"),o.dispatchEvent({type:"reorder-start",layer:i,group:s})),!h){var f;for(e.preventDefault(),e.stopPropagation(),c.default.setStyle(n,{top:t-c.default.offsetRect(l).top+l.scrollTop+5}),(f=e.touches?document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY):e.target).classList.contains("ol-switcherbottomdiv")?o.overflow(-1):f.classList.contains("ol-switchertopdiv")&&o.overflow(1);f&&"LI"!==f.tagName;)f=f.parentNode;f&&f.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach((function(e){e.classList.remove("dropover"),e.classList.remove("dropover-after"),e.classList.remove("dropover-before")})),f&&f.parentNode.classList.contains("drag")&&f!==a?((r=o._getLayerForLI(f))&&!r.get("allwaysOnTop")==!i.get("allwaysOnTop")?(f.classList.add("dropover"),f.classList.add(a.offsetTop<f.offsetTop?"dropover-after":"dropover-before")):r=!1,c.default.show(n)):(r=!1,f===a?c.default.hide(n):c.default.show(n)),r?n.classList.remove("forbidden"):n.classList.add("forbidden")}}a.parentNode.classList.add("drag"),c.default.addListener(document,"mousemove touchmove",f),c.default.addListener(document,"mouseup touchend touchcancel",(function e(){if(r){var t=i,h=o.getSelection()===t;if(t&&r){for(var l,u=(l=s?s.getLayers():o._layerGroup?o._layerGroup.getLayers():o.getMap().getLayers()).getArray(),d=0;d<u.length;d++)if(u[d]==t){l.removeAt(d);break}for(var g=0;g<u.length;g++)if(u[g]===r){d>g?l.insertAt(g,t):l.insertAt(g+1,t);break}}h&&o.selectLayer(t),o.dispatchEvent({type:"reorder-end",layer:t,group:s})}a.parentNode.querySelectorAll("li").forEach((function(e){e.classList.remove("dropover"),e.classList.remove("dropover-after"),e.classList.remove("dropover-before")})),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),o.element.classList.remove("drag"),n&&n.remove(),c.default.removeListener(document,"mousemove touchmove",f),c.default.removeListener(document,"mouseup touchend touchcancel",e)}))}dragOpacity_(e){e.stopPropagation(),e.preventDefault();var t=this,r=e.target,n=this._getLayerForLI(r.parentNode.parentNode.parentNode);if(n){var i=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX,s=c.default.getStyle(r,"left")-i;t.dragging_=!0,c.default.addListener(document,"mouseup touchend touchcancel",(function e(){c.default.removeListener(document,"mouseup touchend touchcancel",e),c.default.removeListener(document,"mousemove touchmove",o),t.dragging_=!1})),c.default.addListener(document,"mousemove touchmove",o)}function o(e){var t=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX,i=(s+t)/c.default.getStyle(r.parentNode,"width"),o=Math.max(0,Math.min(1,i));c.default.setStyle(r,{left:100*o+"%"}),r.parentNode.nextElementSibling.innerHTML=Math.round(100*o),n.setOpacity(o)}}drawList(e,t){var r=this,n=t.getArray(),i=function(e){e.stopPropagation(),e.preventDefault();var n=r._getLayerForLI(this.parentNode.parentNode);r.switchLayerVisibility(n,t),r.get("selection")&&n.getVisible()&&r.selectLayer(n),r.onchangeCheck&&r.onchangeCheck(n)};function s(e){e.stopPropagation(),e.preventDefault();var t=r._getLayerForLI(this.parentNode.parentNode);r.oninfo(t),r.dispatchEvent({type:"info",layer:t})}function a(e){e.stopPropagation(),e.preventDefault();var t=r._getLayerForLI(this.parentNode.parentNode);r.onextent?r.onextent(t):r.getMap().getView().fit(t.getExtent(),r.getMap().getSize()),r.dispatchEvent({type:"extent",layer:t})}function h(e){e.stopPropagation(),e.preventDefault();var t,n=this.parentNode.parentNode.parentNode.parentNode,i=r._getLayerForLI(n);i?(t=r._getLayerForLI(this.parentNode.parentNode),i.getLayers().remove(t),0!=i.getLayers().getLength()||i.get("noSwitcherDelete")||h.call(n.querySelectorAll(".layerTrash")[0],e)):(n=this.parentNode.parentNode,r.getMap().removeLayer(r._getLayerForLI(n)))}function l(t){if(this.displayInLayerSwitcher(t)){var l=c.default.create("LI",{className:(t.getVisible()?"ol-visible ":" ")+(t.get("baseLayer")?"baselayer":""),parent:e});this._setLayerForLI(l,t),this._selectedLayer===t&&l.classList.add("ol-layer-select");var f=c.default.create("DIV",{className:"ol-layerswitcher-buttons",parent:l}),d=c.default.create("DIV",{className:"li-content",parent:l});c.default.create("INPUT",{type:t.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:t.getVisible(),click:i,parent:d});var g=c.default.create("LABEL",{title:t.get("title")||t.get("name"),click:i,style:{userSelect:"none"},parent:d});if(g.addEventListener("selectstart",(function(){return!1})),c.default.create("SPAN",{html:t.get("title")||t.get("name"),click:function(e){this.get("selection")&&(e.stopPropagation(),this.selectLayer(t))}.bind(this),parent:g}),this.reordering&&(u<n.length-1&&(t.get("allwaysOnTop")||!n[u+1].get("allwaysOnTop"))||u>0&&(!t.get("allwaysOnTop")||n[u-1].get("allwaysOnTop")))&&c.default.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(e){r.dragOrdering_(e)}},parent:f}),t.getLayers){var p=0;t.getLayers().forEach((function(e){r.displayInLayerSwitcher(e)&&p++})),p&&c.default.create("DIV",{className:t.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var e=r._getLayerForLI(this.parentNode.parentNode);e.set("openInLayerSwitcher",!e.get("openInLayerSwitcher"))},parent:f})}if(this.oninfo&&c.default.create("DIV",{className:"layerInfo",title:this.tip.info,click:s,parent:f}),this.hastrash&&!t.get("noSwitcherDelete")&&c.default.create("DIV",{className:"layerTrash",title:this.tip.trash,click:h,parent:f}),this.hasextent&&n[u].getExtent()){var y=n[u].getExtent();4==y.length&&y[0]<y[2]&&y[1]<y[3]&&c.default.create("DIV",{className:"layerExtent",title:this.tip.extent,click:a,parent:f})}if(this.show_progress&&t instanceof o.default){var m=c.default.create("DIV",{className:"layerswitcher-progress",parent:d});this.setprogress_(t),t.layerswitcher_progress=c.default.create("DIV",{parent:m})}var x=c.default.create("DIV",{className:"layerswitcher-opacity",click:function(e){if(e.target===this){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(1,e.offsetX/c.default.getStyle(this,"width")));r._getLayerForLI(this.parentNode.parentNode).setOpacity(t),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(100*t)}},parent:d});if(c.default.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*t.getOpacity()+"%"},on:{"mousedown touchstart":function(e){r.dragOpacity_(e)}},parent:x}),c.default.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*t.getOpacity()),parent:d}),t.getLayers&&(l.classList.add("ol-layer-group"),!0===t.get("openInLayerSwitcher"))){var _=c.default.create("UL",{parent:l});this.drawList(_,t.getLayers())}l.classList.add(this.getLayerClass(t)),this.dispatchEvent({type:"drawlist",layer:t,li:l})}else this._setLayerForLI(null,t)}for(var u=n.length-1;u>=0;u--)l.call(this,n[u]);this.viewChange(),e===this.panel_&&this.overflow()}getLayerClass(e){return e?e.getLayers?"ol-layer-group":e instanceof a.default?"ol-layer-vector":e instanceof h.default?"ol-layer-vectortile":e instanceof o.default?"ol-layer-tile":e instanceof l.default?"ol-layer-image":e instanceof u.default?"ol-layer-heatmap":e.getFeatures?"ol-layer-vectorimage":"unknown":"none"}selectLayer(e,t){if(!e){if(!this.getMap())return;e=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=e,this.drawPanel(),t||this.dispatchEvent({type:"select",layer:e})}getSelection(){return this._selectedLayer}setprogress_(e){if(!e.layerswitcher_progress){var t=0,r=0,n=function(){r===t?(r=t=0,c.default.setStyle(e.layerswitcher_progress,{width:0})):c.default.setStyle(e.layerswitcher_progress,{width:(t/r*100).toFixed(1)+"%"})};e.getSource().on("tileloadstart",(function(){r++,n()})),e.getSource().on("tileloadend",(function(){t++,n()})),e.getSource().on("tileloaderror",(function(){t++,n()}))}}};d.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};var g=d})),i.register("dMe05",(function(t,r){e(t.exports,"default",(()=>a));var n=i("55uKe"),s=i("fnQuI");class o extends n.default{constructor(e){super(e)}createRenderer(){return new(0,s.default)(this)}getData(e){return super.getData(e)}}var a=o})),i.register("55uKe",(function(t,r){e(t.exports,"default",(()=>o));var n=i("2K2IB");class s extends n.default{constructor(e){super(e=e||{})}}var o=s})),i.register("fnQuI",(function(t,r){e(t.exports,"default",(()=>f));var n=i("ddIVC"),s=i("50PZ9"),o=i("bCUH1"),a=i("14PDX"),h=i("jZquI"),l=i("gzr8q");class u extends n.default{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,i=n.resolution,a=this.getLayer().getSource(),u=e.viewHints;let f=e.extent;if(void 0!==t.extent&&(f=(0,h.getIntersection)(f,(0,l.fromUserExtent)(t.extent,n.projection))),!u[o.default.ANIMATING]&&!u[o.default.INTERACTING]&&!(0,h.isEmpty)(f))if(a){const e=n.projection,t=a.getImage(f,i,r,e);t&&(this.loadImage(t)?this.image_=t:t.getState()===s.default.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),n=(0,a.apply)(t.pixelToCoordinateTransform,e.slice()),i=r.getExtent();if(i&&!(0,h.containsCoordinate)(i,n))return null;const s=this.image_.getExtent(),o=this.image_.getImage(),l=(0,h.getWidth)(s),u=Math.floor(o.width*((n[0]-s[0])/l));if(u<0||u>=o.width)return null;const f=(0,h.getHeight)(s),c=Math.floor(o.height*((s[3]-n[1])/f));return c<0||c>=o.height?null:this.getImageData(o,u,c)}renderFrame(e,t){const r=this.image_,n=r.getExtent(),i=r.getResolution(),s=r.getPixelRatio(),o=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,f=e.viewState,c=f.center,d=u*i/(f.resolution*s),g=e.extent,p=f.resolution,y=f.rotation,m=Math.round((0,h.getWidth)(g)/p*u),x=Math.round((0,h.getHeight)(g)/p*u);(0,a.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,y,-m/2,-x/2),(0,a.makeInverse)(this.inversePixelTransform,this.pixelTransform);const _=(0,a.toString)(this.pixelTransform);this.useContainer(t,_,this.getBackground(e));const v=this.context,E=v.canvas;E.width!=m||E.height!=x?(E.width=m,E.height=x):this.containerReused||v.clearRect(0,0,m,x);let b=!1,w=!0;if(o.extent){const t=(0,l.fromUserExtent)(o.extent,f.projection);w=(0,h.intersects)(t,e.extent),b=w&&!(0,h.containsExtent)(t,e.extent),b&&this.clipUnrotated(v,e,t)}const T=r.getImage(),L=(0,a.compose)(this.tempTransform,m/2,x/2,d,d,0,s*(n[0]-c[0])/i,s*(c[1]-n[3])/i);this.renderedResolution=i*u/s;const R=T.width*L[0],A=T.height*L[3];if(this.getLayer().getSource().getInterpolate()||(v.imageSmoothingEnabled=!1),this.preRender(v,e),w&&R>=.5&&A>=.5){const e=L[4],t=L[5],r=o.opacity;let n;1!==r&&(n=v.globalAlpha,v.globalAlpha=r),v.drawImage(T,0,0,+T.width,+T.height,e,t,R,A),1!==r&&(v.globalAlpha=n)}return this.postRender(v,e),b&&v.restore(),v.imageSmoothingEnabled=!0,_!==E.style.transform&&(E.style.transform=_),this.container}}var f=u})),i.register("8WefF",(function(t,r){e(t.exports,"default",(()=>d));var n=i("2YyN3"),s=i("14k51"),o=i("a6roo"),a=i("cgxQK");const h="blur",l="gradient",u="radius",f=["#00f","#0ff","#0f0","#ff0","#f00"];class c extends n.default{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(l,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:f),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8);const r=e.weight?e.weight:"weight";this.weightFunction_="string"==typeof r?function(e){return e.get(r)}:r,this.setRenderOrder(null)}getBlur(){return this.get(h)}getGradient(){return this.get(l)}getRadius(){return this.get(u)}handleGradientChanged_(){this.gradient_=function(e){const t=1,r=256,n=(0,a.createCanvasContext2D)(t,r),i=n.createLinearGradient(0,0,t,r),s=1/(e.length-1);for(let t=0,r=e.length;t<r;++t)i.addColorStop(t*s,e[t]);return n.fillStyle=i,n.fillRect(0,0,t,r),n.canvas}(this.getGradient())}setBlur(e){this.set(h,e)}setGradient(e){this.set(l,e)}setRadius(e){this.set(u,e)}createRenderer(){return new(0,s.default)(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(e){const t=this.weightFunction_(e);return void 0!==t?(0,o.clamp)(t,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(u)+this.get(h))}.bind(this),u_blurSlope:function(){return this.get(u)/Math.max(1,this.get(h))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})}renderDeclutter(){}}var d=c})),i.register("14k51",(function(t,r){e(t.exports,"default",(()=>E));var n=i("2YyN3"),s=i("gKdkP"),o=i("bCUH1"),a=i("77SUz"),h=i("iHIuK"),l=i("4WkA9"),u=i("5XVOZ"),f=i("knkkM"),c=i("RJ0Sz"),d=i("14PDX"),g=i("eJ4LZ"),p=i("jZquI"),y=i("bxq6G"),m=i("6AH2e"),x=i("lVQul"),_=i("bsgMw");class v extends h.default{constructor(e,t){const r=t.uniforms||{},n=(0,d.create)();r[f.DefaultUniform.PROJECTION_MATRIX]=n,super(e,{uniforms:r,postProcesses:t.postProcesses}),this.ready=!1,this.sourceRevision_=-1,this.verticesBuffer_=new(0,a.default)(u.ARRAY_BUFFER,u.DYNAMIC_DRAW),this.hitVerticesBuffer_=new(0,a.default)(u.ARRAY_BUFFER,u.DYNAMIC_DRAW),this.indicesBuffer_=new(0,a.default)(u.ELEMENT_ARRAY_BUFFER,u.DYNAMIC_DRAW),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=!(!t.hitFragmentShader||!t.hitVertexShader),this.hitVertexShader_=t.hitVertexShader,this.hitFragmentShader_=t.hitFragmentShader,this.hitProgram_;const i=t.attributes?t.attributes.map((function(e){return{name:"a_"+e.name,size:1,type:f.AttributeType.FLOAT}})):[];this.attributes=[{name:"a_position",size:2,type:f.AttributeType.FLOAT},{name:"a_index",size:1,type:f.AttributeType.FLOAT}].concat(i),this.hitDetectionAttributes=[{name:"a_position",size:2,type:f.AttributeType.FLOAT},{name:"a_index",size:1,type:f.AttributeType.FLOAT},{name:"a_hitColor",size:4,type:f.AttributeType.FLOAT},{name:"a_featureUid",size:1,type:f.AttributeType.FLOAT}].concat(i),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=(0,p.createEmpty)(),this.currentTransform_=n,this.renderTransform_=(0,d.create)(),this.invertRenderTransform_=(0,d.create)(),this.renderInstructions_=new Float32Array(0),this.hitRenderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.generateBuffersRun_=0,this.worker_=(0,m.create)(),this.worker_.addEventListener("message",function(e){const t=e.data;if(t.type===c.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS){const r=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,(0,d.makeInverse)(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):(this.renderInstructions_=new Float32Array(e.data.renderInstructions),t.generateBuffersRun===this.generateBuffersRun_&&(this.ready=!0)),this.getLayer().changed()}}.bind(this)),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[(0,_.listen)(o,s.default.ADDFEATURE,this.handleSourceFeatureAdded_,this),(0,_.listen)(o,s.default.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),(0,_.listen)(o,s.default.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),(0,_.listen)(o,s.default.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(function(e){this.featureCache_[(0,x.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(this))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new(0,l.default)(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[(0,x.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[(0,x.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[(0,x.getUid)(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const r=e.viewState.projection,n=this.getLayer().getSource().getWrapX()&&r.canWrapX(),i=r.getExtent(),s=e.extent,o=n?(0,p.getWidth)(i):null,a=n?Math.ceil((s[2]-i[2])/o)+1:1,h=n?Math.floor((s[0]-i[0])/o):0;let l=h;const u=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,d.translate)(this.currentTransform_,l*o,0),(0,d.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.drawElements(0,u)}while(++l<a);this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const f=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(e,h,a,o),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),f}prepareFrameInternal(e){const t=this.getLayer(),r=t.getSource(),i=e.viewState,s=!e.viewHints[o.default.ANIMATING]&&!e.viewHints[o.default.INTERACTING],a=!(0,p.equals)(this.previousExtent_,e.extent),h=this.sourceRevision_<r.getRevision();if(h&&(this.sourceRevision_=r.getRevision()),s&&(a||h)){const s=i.projection,o=i.resolution,a=t instanceof n.default?t.getRenderBuffer():0,h=(0,p.buffer)(e.extent,a*o);r.loadFeatures(h,o,s),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=(0,d.create)();this.helper.makeProjectionTransform(e,t);const r=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===r||(this.renderInstructions_=new Float32Array(r)),this.hitDetectionEnabled_){const e=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===e||(this.hitRenderInstructions_=new Float32Array(e))}let n,i;const s=[],o=[];let a,h=0,l=0;for(const e in this.featureCache_){if(n=this.featureCache_[e],i=n.geometry,!i||"Point"!==i.getType())continue;let r;s[0]=i.getFlatCoordinates()[0],s[1]=i.getFlatCoordinates()[1],(0,d.apply)(t,s),a=(0,y.colorEncodeId)(l+6,o),this.renderInstructions_[h++]=s[0],this.renderInstructions_[h++]=s[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=s[0],this.hitRenderInstructions_[l++]=s[1],this.hitRenderInstructions_[l++]=a[0],this.hitRenderInstructions_[l++]=a[1],this.hitRenderInstructions_[l++]=a[2],this.hitRenderInstructions_[l++]=a[3],this.hitRenderInstructions_[l++]=Number(e));for(let e=0;e<this.customAttributes.length;e++)r=this.customAttributes[e].callback(n.feature,n.properties),this.renderInstructions_[h++]=r,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=r)}const u={id:0,type:c.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(u.projectionTransform=t,u.generateBuffersRun=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(u,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){const e={id:0,type:c.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};e.projectionTransform=t,e.hitDetection=!0,this.worker_.postMessage(e,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}}forEachFeatureAtCoordinate(e,t,r,n,i){if((0,g.assert)(this.hitDetectionEnabled_,66),!this.hitRenderInstructions_)return;const s=(0,d.apply)(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],h=(0,y.colorDecodeId)(a),l=this.hitRenderInstructions_[h],u=Math.floor(l).toString(),f=this.getLayer().getSource().getFeatureByUid(u);return f?n(f,this.getLayer(),null):void 0}renderHitDetection(e,t,r,n){if(!this.hitVerticesBuffer_.getSize())return;let i=t;this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_,e),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,d.translate)(this.currentTransform_,i*n,0),(0,d.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e);const t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}while(++i<r)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(e){(0,_.unlistenByKey)(e)})),this.sourceListenKeys_=null,super.disposeInternal()}}var E=v})),i.register("77SUz",(function(t,r){e(t.exports,"default",(()=>h));var n=i("5XVOZ"),s=i("eJ4LZ");const o={STATIC_DRAW:n.STATIC_DRAW,STREAM_DRAW:n.STREAM_DRAW,DYNAMIC_DRAW:n.DYNAMIC_DRAW};function a(e){switch(e){case n.ARRAY_BUFFER:return Float32Array;case n.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var h=class{constructor(e,t){this.array=null,this.type=e,(0,s.assert)(e===n.ARRAY_BUFFER||e===n.ELEMENT_ARRAY_BUFFER,62),this.usage=void 0!==t?t:o.STATIC_DRAW}ofSize(e){this.array=new(a(this.type))(e)}fromArray(e){this.array=a(this.type).from(e)}fromArrayBuffer(e){this.array=new(a(this.type))(e)}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}}})),i.register("5XVOZ",(function(t,r){e(t.exports,"ARRAY_BUFFER",(()=>s)),e(t.exports,"ELEMENT_ARRAY_BUFFER",(()=>o)),e(t.exports,"STREAM_DRAW",(()=>a)),e(t.exports,"STATIC_DRAW",(()=>h)),e(t.exports,"DYNAMIC_DRAW",(()=>l)),e(t.exports,"UNSIGNED_BYTE",(()=>u)),e(t.exports,"UNSIGNED_SHORT",(()=>f)),e(t.exports,"UNSIGNED_INT",(()=>c)),e(t.exports,"FLOAT",(()=>d)),e(t.exports,"getContext",(()=>p));var n=i("lW8xZ");const s=34962,o=34963,a=35040,h=35044,l=35048,u=5121,f=5123,c=5125,d=5126,g=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function p(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!n.SAFARI_BUG_237906},t);const r=g.length;for(let n=0;n<r;++n)try{const r=e.getContext(g[n],t);if(r)return r}catch(e){}return null}})),i.register("iHIuK",(function(t,r){e(t.exports,"default",(()=>f));var n=i("7xQTT"),s=i("lgqLq"),o=i("fj1q7"),a=i("6ej6F"),h=i("knkkM"),l=i("14PDX");class u extends s.default{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=(0,l.create)(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(n.default.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(a.default.PRECOMPOSE)){const n=new(0,o.default)(a.default.PRECOMPOSE,void 0,t,e);r.dispatchEvent(n)}}dispatchPostComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(a.default.POSTCOMPOSE)){const n=new(0,o.default)(a.default.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(n)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t,r=!0,n=-1;for(let i=0,s=e.layerStatesArray.length;i<s;i++){const s=e.layerStatesArray[i].layer,o=s.getRenderer();if(!(o instanceof u)){r=!0;continue}const a=s.getClassName();if((r||a!==t)&&(n+=1,r=!1),t=a,o===this)break}const i="map/"+e.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(i)||(this.removeHelper(),this.helper=new(0,h.default)({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:i}),t&&(this.helper.getCanvas().className=t),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,r){const n=this.getLayer();if(n.hasListener(e)){(0,l.compose)(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const i=new(0,o.default)(e,this.inversePixelTransform_,r,t);n.dispatchEvent(i)}}preRender(e,t){this.dispatchRenderEvent_(a.default.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(a.default.POSTRENDER,e,t)}}var f=u})),i.register("knkkM",(function(t,r){e(t.exports,"DefaultUniform",(()=>c)),e(t.exports,"AttributeType",(()=>d)),e(t.exports,"default",(()=>_));var n=i("6M4MS"),s=i("jjfV9"),o=i("aMlwv"),a=i("5XVOZ"),h=i("kKEgb"),l=i("14PDX"),u=i("jYEYW"),f=i("lVQul");const c={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",SIZE_PX:"u_sizePx",PIXEL_RATIO:"u_pixelRatio"},d={UNSIGNED_BYTE:a.UNSIGNED_BYTE,UNSIGNED_SHORT:a.UNSIGNED_SHORT,UNSIGNED_INT:a.UNSIGNED_INT,FLOAT:a.FLOAT},g={};function p(e){return"shared/"+e}let y=0;class m extends s.default{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?p(e.canvasCacheKey):function(){const e="unique/"+y;return y+=1,e}(),this.canvas_=function(e){let t=g[e];if(!t){const r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},g[e]=t}return t.users+=1,t.canvas}(this.canvasCacheKey_),this.gl_=(0,a.getContext)(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener(n.default.LOST,this.boundHandleWebGLContextLost_),this.canvas_.addEventListener(n.default.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,l.create)(),this.offsetScaleMatrix_=(0,l.create)(),this.tmpMat4_=(0,u.create)(),this.uniformLocations_={},this.attribLocations_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms);const t=this.getGL();this.postProcessPasses_=e.postProcesses?e.postProcesses.map((function(e){return new(0,o.default)({webGlContext:t,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})})):[new(0,o.default)({webGlContext:t})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[];for(const t in e)this.uniforms_.push({name:t,value:e[t]});this.uniformLocations_={}}canvasCacheKeyMatches(e){return this.canvasCacheKey_===p(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.getGL(),r=(0,f.getUid)(e);let n=this.bufferCache_[r];if(!n){n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=n}t.bindBuffer(e.getType(),n.webGlBuffer)}flushBufferData(e){const t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.getGL(),r=(0,f.getUid)(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]}disposeInternal(){this.canvas_.removeEventListener(n.default.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(n.default.RESTORED,this.boundHandleWebGLContextRestored_),function(e){const t=g[e];if(!t)return;if(t.users-=1,t.users>0)return;const r=t.canvas,n=(0,a.getContext)(r).getExtension("WEBGL_lose_context");n&&n.loseContext(),delete g[e]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(e,t){const r=this.getGL(),n=this.getCanvas(),i=e.size,s=e.pixelRatio;n.width=i[0]*s,n.height=i[1]*s,n.style.width=i[0]+"px",n.style.height=i[1]+"px";for(let t=this.postProcessPasses_.length-1;t>=0;t--)this.postProcessPasses_[t].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,t?r.ZERO:r.ONE_MINUS_SRC_ALPHA)}prepareDrawToRenderTarget(e,t,r){const n=this.getGL(),i=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA)}drawElements(e,t){const r=this.getGL();this.getExtension("OES_element_index_uint");const n=r.UNSIGNED_INT,i=t-e,s=4*e;r.drawElements(r.TRIANGLES,i,n,s)}finalizeDraw(e,t,r){for(let n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(e){const t=e.size,r=e.viewState.rotation,n=e.pixelRatio,i=(0,l.reset)(this.offsetScaleMatrix_);(0,l.scale)(i,2/t[0],2/t[1]);const s=(0,l.reset)(this.offsetRotateMatrix_);0!==r&&(0,l.rotate)(s,-r),this.setUniformMatrixValue(c.OFFSET_SCALE_MATRIX,(0,u.fromTransform)(this.tmpMat4_,i)),this.setUniformMatrixValue(c.OFFSET_ROTATION_MATRIX,(0,u.fromTransform)(this.tmpMat4_,s)),this.setUniformFloatValue(c.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(c.ZOOM,e.viewState.zoom),this.setUniformFloatValue(c.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(c.PIXEL_RATIO,n),this.setUniformFloatVec2(c.SIZE_PX,[t[0],t[1]])}applyUniforms(e){const t=this.getGL();let r,n=0;this.uniforms_.forEach(function(i){if(r="function"==typeof i.value?i.value(e):i.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData){i.texture||(i.prevValue=void 0,i.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,i.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);(!(r instanceof HTMLImageElement)||r.complete)&&i.prevValue!==r&&(i.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),t.uniform1i(this.getUniformLocation(i.name),n++)}else if(Array.isArray(r)&&6===r.length)this.setUniformMatrixValue(i.name,(0,u.fromTransform)(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:return void t.uniform2f(this.getUniformLocation(i.name),r[0],r[1]);case 3:return void t.uniform3f(this.getUniformLocation(i.name),r[0],r[1],r[2]);case 4:return void t.uniform4f(this.getUniformLocation(i.name),r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&t.uniform1f(this.getUniformLocation(i.name),r)}.bind(this))}useProgram(e,t){this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const r=this.getGL(),n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}getProgram(e,t){const r=this.getGL(),n=this.compileShader(e,r.FRAGMENT_SHADER),i=this.compileShader(t,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,n),r.attachShader(s,i),r.linkProgram(s),!r.getShaderParameter(n,r.COMPILE_STATUS)){const e=`Fragment shader compliation failed: ${r.getShaderInfoLog(n)}`;throw new Error(e)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){const e=`Vertex shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(e)}if(r.deleteShader(i),!r.getProgramParameter(s,r.LINK_STATUS)){const e=`GL program linking failed: ${r.getShaderInfoLog(i)}`;throw new Error(e)}return s}getUniformLocation(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]}getAttributeLocation(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]}makeProjectionTransform(e,t){const r=e.size,n=e.viewState.rotation,i=e.viewState.resolution,s=e.viewState.center;return(0,l.reset)(t),(0,l.compose)(t,0,0,2/(i*r[0]),2/(i*r[1]),-n,-s[0],-s[1]),t}setUniformFloatValue(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.getGL().uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.getGL().uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,r,n,i){const s=this.getAttributeLocation(e);s<0||(this.getGL().enableVertexAttribArray(s),this.getGL().vertexAttribPointer(s,t,r,!1,n,i))}enableAttributes(e){const t=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];t+=n.size*x(n.type)}return t}(e);let r=0;for(let n=0;n<e.length;n++){const i=e[n];this.enableAttributeArray_(i.name,i.size,i.type||a.FLOAT,t,r),r+=i.size*x(i.type)}}handleWebGLContextLost(){(0,h.clear)(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(e,t,r){const n=this.getGL();r=r||n.createTexture();const i=n.RGBA,s=n.RGBA,o=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,0,i,s,o,t):n.texImage2D(n.TEXTURE_2D,0,i,e[0],e[1],0,s,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}function x(e){switch(e){case d.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case d.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case d.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case d.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var _=m})),i.register("6M4MS",(function(t,r){e(t.exports,"default",(()=>n));var n={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}})),i.register("aMlwv",(function(t,r){e(t.exports,"default",(()=>s));var n=i("lVQul");var s=class{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();const r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),t.compileShader(r);const n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(r){this.uniforms_.push({value:e.uniforms[r],location:t.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}getGL(){return this.gl_}init(e){const t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const e=0,n=t.RGBA,i=0,s=t.RGBA,o=t.UNSIGNED_BYTE,a=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,e,n,r[0],r[1],i,s,o,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(e,t,r,i){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const t=(0,n.getUid)(s.canvas);if(!e.renderTargets[t]){const r=s.getContextAttributes();r&&r.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),e.renderTargets[t]=!0}}s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(e){const t=this.getGL();let r,n=1;this.uniforms_.forEach((function(i){if(r="function"==typeof i.value?i.value(e):i.value,r instanceof HTMLCanvasElement||r instanceof ImageData)i.texture||(i.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,i.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(i.location,n++);else if(Array.isArray(r))switch(r.length){case 2:return void t.uniform2f(i.location,r[0],r[1]);case 3:return void t.uniform3f(i.location,r[0],r[1],r[2]);case 4:return void t.uniform4f(i.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&t.uniform1f(i.location,r)}))}}})),i.register("jYEYW",(function(t,r){function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}e(t.exports,"create",(()=>n)),e(t.exports,"fromTransform",(()=>i))})),i.register("4WkA9",(function(t,r){e(t.exports,"default",(()=>o));var n=i("kBSVF");const s=new Uint8Array(4);var o=class{constructor(e,t){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){(0,n.equals)(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return s[0]=this.data_[4*r],s[1]=this.data_[4*r+1],s[2]=this.data_[4*r+2],s[3]=this.data_[4*r+3],s}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(e[0]*e[1]*4)}}})),i.register("RJ0Sz",(function(t,r){e(t.exports,"WebGLWorkerMessageType",(()=>n));const n={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"}})),i.register("bxq6G",(function(t,r){e(t.exports,"colorEncodeId",(()=>n)),e(t.exports,"colorDecodeId",(()=>s));i("lIQYe"),i("14PDX"),i("a6roo");function n(e,t){const r=256,n=255;return(t=t||[])[0]=Math.floor(e/r/r/r)/n,t[1]=Math.floor(e/r/r)%r/n,t[2]=Math.floor(e/r)%r/n,t[3]=e%r/n,t}function s(e){let t=0;const r=256,n=255;return t+=Math.round(e[0]*r*r*r*n),t+=Math.round(e[1]*r*r*n),t+=Math.round(e[2]*r*n),t+=Math.round(e[3]*n),t}})),i.register("lIQYe",(function(e,t){function r(e,t,r){r=r||2;var i,o,a,h,l,c,d,p=t&&t.length,y=p?t[0]*r:e.length,m=n(e,0,y,r,!0),x=[];if(!m||m.next===m.prev)return x;if(p&&(m=function(e,t,r,i){var s,o,a,h=[];for(s=0,o=t.length;s<o;s++)(a=n(e,t[s]*i,s<o-1?t[s+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),h.push(g(a));for(h.sort(u),s=0;s<h.length;s++)r=f(h[s],r);return r}(e,t,m,r)),e.length>80*r){i=a=e[0],o=h=e[1];for(var _=r;_<y;_+=r)(l=e[_])<i&&(i=l),(c=e[_+1])<o&&(o=c),l>a&&(a=l),c>h&&(h=c);d=0!==(d=Math.max(a-i,h-o))?32767/d:0}return s(m,x,r,i,o,d,0),x}function n(e,t,r,n,i){var s,o;if(i===A(e,t,r,n)>0)for(s=t;s<r;s+=n)o=T(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=T(s,e[s],e[s+1],o);return o&&x(o,o.next)&&(L(o),o=o.next),o}function i(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!x(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(L(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function s(e,t,r,n,u,f,c){if(e){!c&&f&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,s,o,a,h,l=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<l&&(a++,n=n.nextZ);t++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,l*=2}while(o>1)}(i)}(e,n,u,f);for(var g,p,y=e;e.prev!==e.next;)if(g=e.prev,p=e.next,f?a(e,n,u,f):o(e))t.push(g.i/r|0),t.push(e.i/r|0),t.push(p.i/r|0),L(e),e=p.next,y=p.next;else if((e=p)===y){c?1===c?s(e=h(i(e),t,r),t,r,n,u,f,2):2===c&&l(e,t,r,n,u,f):s(i(e),t,r,n,u,f,1);break}}}function o(e){var t=e.prev,r=e,n=e.next;if(m(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,o=n.x,a=t.y,h=r.y,l=n.y,u=i<s?i<o?i:o:s<o?s:o,f=a<h?a<l?a:l:h<l?h:l,c=i>s?i>o?i:o:s>o?s:o,d=a>h?a>l?a:l:h>l?h:l,g=n.next;g!==t;){if(g.x>=u&&g.x<=c&&g.y>=f&&g.y<=d&&p(i,a,s,h,o,l,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function a(e,t,r,n){var i=e.prev,s=e,o=e.next;if(m(i,s,o)>=0)return!1;for(var a=i.x,h=s.x,l=o.x,u=i.y,f=s.y,c=o.y,g=a<h?a<l?a:l:h<l?h:l,y=u<f?u<c?u:c:f<c?f:c,x=a>h?a>l?a:l:h>l?h:l,_=u>f?u>c?u:c:f>c?f:c,v=d(g,y,t,r,n),E=d(x,_,t,r,n),b=e.prevZ,w=e.nextZ;b&&b.z>=v&&w&&w.z<=E;){if(b.x>=g&&b.x<=x&&b.y>=y&&b.y<=_&&b!==i&&b!==o&&p(a,u,h,f,l,c,b.x,b.y)&&m(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,w.x>=g&&w.x<=x&&w.y>=y&&w.y<=_&&w!==i&&w!==o&&p(a,u,h,f,l,c,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=g&&b.x<=x&&b.y>=y&&b.y<=_&&b!==i&&b!==o&&p(a,u,h,f,l,c,b.x,b.y)&&m(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=E;){if(w.x>=g&&w.x<=x&&w.y>=y&&w.y<=_&&w!==i&&w!==o&&p(a,u,h,f,l,c,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function h(e,t,r){var n=e;do{var s=n.prev,o=n.next.next;!x(s,o)&&_(s,n,n.next,o)&&b(s,o)&&b(o,s)&&(t.push(s.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),L(n),L(n.next),n=e=o),n=n.next}while(n!==e);return i(n)}function l(e,t,r,n,o,a){var h=e;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&y(h,l)){var u=w(h,l);return h=i(h,h.next),u=i(u,u.next),s(h,t,r,n,o,a,0),void s(u,t,r,n,o,a,0)}l=l.next}h=h.next}while(h!==e)}function u(e,t){return e.x-t.x}function f(e,t){var r=function(e,t){var r,n=t,i=e.x,s=e.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o&&(o=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==t);if(!r)return null;var h,l=r,u=r.x,f=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&p(s<f?i:o,s,u,f,s<f?o:i,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(i-n.x),b(n,e)&&(h<d||h===d&&(n.x>r.x||n.x===r.x&&c(r,n)))&&(r=n,d=h)),n=n.next}while(n!==l);return r}(e,t);if(!r)return t;var n=w(r,e);return i(n,n.next),i(r,r.next)}function c(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function g(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function p(e,t,r,n,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(r-o)*(t-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||x(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,r,n){var i=E(m(e,t,r)),s=E(m(e,t,n)),o=E(m(r,n,e)),a=E(m(r,n,t));return i!==s&&o!==a||(!(0!==i||!v(e,r,t))||(!(0!==s||!v(e,n,t))||(!(0!==o||!v(r,e,n))||!(0!==a||!v(r,t,n)))))}function v(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function E(e){return e>0?1:e<0?-1:0}function b(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var r=new R(e.i,e.x,e.y),n=new R(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function T(e,t,r,n){var i=new R(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function L(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(A(e,0,s,r));if(i)for(var a=0,h=t.length;a<h;a++){var l=t[a]*r,u=a<h-1?t[a+1]*r:e.length;o-=Math.abs(A(e,l,u,r))}var f=0;for(a=0;a<n.length;a+=3){var c=n[a]*r,d=n[a+1]*r,g=n[a+2]*r;f+=Math.abs((e[c]-e[g])*(e[d+1]-e[c+1])-(e[c]-e[d])*(e[g+1]-e[c+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},r.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}})),i.register("6AH2e",(function(t,r){e(t.exports,"create",(()=>s));var n=i("awmEs").Buffer;function s(){const e='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";r.includes("firefox");r.includes("safari")&&!r.includes("chrom")&&(r.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(r)),r.includes("webkit")&&r.includes("edge"),r.includes("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}}();const o={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class i extends Error{constructor(e){const t=o[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}function s(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function a(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],s=t[1],a=t[2],u=t[3],x=t[4],f=t[5];return e[0]=u/n,e[1]=-s/n,e[2]=-a/n,e[3]=o/n,e[4]=(a*f-u*x)/n,e[5]=-(o*f-s*x)/n,e}new Array(6);var u={exports:{}};function x(e,t,n){n=n||2;var r,o,i,s,a,u,x,y=t&&t.length,d=y?t[0]*n:e.length,h=f(e,0,d,n,!0),v=[];if(!h||h.next===h.prev)return v;if(y&&(h=function(e,t,n,r){var o,i,s,a=[];for(o=0,i=t.length;o<i;o++)(s=f(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),a.push(w(s));for(a.sort(p),o=0;o<a.length;o++)n=l(n=g(a[o],n),n.next);return n}(e,t,h,n)),e.length>80*n){r=i=e[0],o=s=e[1];for(var b=n;b<d;b+=n)(a=e[b])<r&&(r=a),(u=e[b+1])<o&&(o=u),a>i&&(i=a),u>s&&(s=u);x=0!==(x=Math.max(i-r,s-o))?1/x:0}return c(h,v,n,r,o,x),v}function f(e,t,n,r,o){var i,s;if(o===B(e,t,n,r)>0)for(i=t;i<n;i+=r)s=U(i,e[i],e[i+1],s);else for(i=n-r;i>=t;i-=r)s=U(i,e[i],e[i+1],s);return s&&M(s,s.next)&&(z(s),s=s.next),s}function l(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(z(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function c(e,t,n,r,o,i,s){if(e){!s&&i&&function(e,t,n,r){var o=e;do{null===o.z&&(o.z=m(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,s,a,u,x=1;do{for(n=e,e=null,i=null,s=0;n;){for(s++,r=n,a=0,t=0;t<x&&(a++,r=r.nextZ);t++);for(u=x;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,a--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,x*=2}while(s>1)}(o)}(e,r,o,i);for(var a,u,x=e;e.prev!==e.next;)if(a=e.prev,u=e.next,i?d(e,r,o,i):y(e))t.push(a.i/n),t.push(e.i/n),t.push(u.i/n),z(e),e=u.next,x=u.next;else if((e=u)===x){s?1===s?c(e=h(l(e),t,n),t,n,r,o,i,2):2===s&&v(e,t,n,r,o,i):c(l(e),t,n,r,o,i,1);break}}}function y(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(A(t.x,t.y,n.x,n.y,r.x,r.y,o.x,o.y)&&Z(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function d(e,t,n,r){var o=e.prev,i=e,s=e.next;if(Z(o,i,s)>=0)return!1;for(var a=o.x<i.x?o.x<s.x?o.x:s.x:i.x<s.x?i.x:s.x,u=o.y<i.y?o.y<s.y?o.y:s.y:i.y<s.y?i.y:s.y,x=o.x>i.x?o.x>s.x?o.x:s.x:i.x>s.x?i.x:s.x,f=o.y>i.y?o.y>s.y?o.y:s.y:i.y>s.y?i.y:s.y,l=m(a,u,t,n,r),c=m(x,f,t,n,r),y=e.prevZ,d=e.nextZ;y&&y.z>=l&&d&&d.z<=c;){if(y!==e.prev&&y!==e.next&&A(o.x,o.y,i.x,i.y,s.x,s.y,y.x,y.y)&&Z(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,d!==e.prev&&d!==e.next&&A(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&Z(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;y&&y.z>=l;){if(y!==e.prev&&y!==e.next&&A(o.x,o.y,i.x,i.y,s.x,s.y,y.x,y.y)&&Z(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;d&&d.z<=c;){if(d!==e.prev&&d!==e.next&&A(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&Z(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function h(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!M(o,i)&&F(o,r,r.next,i)&&k(o,i)&&k(i,o)&&(t.push(o.i/n),t.push(r.i/n),t.push(i.i/n),z(r),z(r.next),r=e=i),r=r.next}while(r!==e);return l(r)}function v(e,t,n,r,o,i){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&E(s,a)){var u=S(s,a);return s=l(s,s.next),u=l(u,u.next),c(s,t,n,r,o,i),void c(u,t,n,r,o,i)}a=a.next}s=s.next}while(s!==e)}function p(e,t){return e.x-t.x}function g(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,s=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=o&&a>s){if(s=a,a===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(o===s)return n;var u,x=n,f=n.x,l=n.y,c=1/0;r=n;do{o>=r.x&&r.x>=f&&o!==r.x&&A(i<l?o:s,i,f,l,i<l?s:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),k(r,e)&&(u<c||u===c&&(r.x>n.x||r.x===n.x&&b(n,r)))&&(n=r,c=u)),r=r.next}while(r!==x);return n}(e,t);if(!n)return t;var r=S(n,e),o=l(n,n.next);return l(r,r.next),t===n?o:t}function b(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function m(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*o)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function w(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function A(e,t,n,r,o,i,s,a){return(o-s)*(t-a)-(e-s)*(i-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(i-a)-(o-s)*(r-a)>=0}function E(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&F(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(k(e,t)&&k(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||M(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function M(e,t){return e.x===t.x&&e.y===t.y}function F(e,t,n,r){var o=I(Z(e,t,n)),i=I(Z(e,t,r)),s=I(Z(n,r,e)),a=I(Z(n,r,t));return o!==i&&s!==a||(!(0!==o||!T(e,n,t))||(!(0!==i||!T(e,r,t))||(!(0!==s||!T(n,e,r))||!(0!==a||!T(n,t,r)))))}function T(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function k(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function S(e,t){var n=new R(e.i,e.x,e.y),r=new R(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function U(e,t,n,r){var o=new R(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(e,t,n,r){for(var o=0,i=t,s=n-r;i<n;i+=r)o+=(e[s]-e[i])*(e[i+1]+e[s+1]),s=i;return o}u.exports=x,u.exports.default=x,x.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,s=Math.abs(B(e,0,i,n));if(o)for(var a=0,u=t.length;a<u;a++){var x=t[a]*n,f=a<u-1?t[a+1]*n:e.length;s-=Math.abs(B(e,x,f,n))}var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,y=r[a+1]*n,d=r[a+2]*n;l+=Math.abs((e[c]-e[d])*(e[y+1]-e[c+1])-(e[c]-e[y])*(e[d+1]-e[c+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},x.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var s=0;s<t;s++)n.vertices.push(e[o][i][s]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};const P=[],C={vertexPosition:0,indexPosition:0};function N(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function _(e,t,n,r,o,i){const s=3+o,a=e[t+0],u=e[t+1],x=P;x.length=o;for(let n=0;n<x.length;n++)x[n]=e[t+2+n];let f=i?i.vertexPosition:0,l=i?i.indexPosition:0;const c=f/s;return N(n,f,a,u,0),x.length&&n.set(x,f+3),f+=s,N(n,f,a,u,1),x.length&&n.set(x,f+3),f+=s,N(n,f,a,u,2),x.length&&n.set(x,f+3),f+=s,N(n,f,a,u,3),x.length&&n.set(x,f+3),f+=s,r[l++]=c,r[l++]=c+1,r[l++]=c+3,r[l++]=c+1,r[l++]=c+2,r[l++]=c+3,C.vertexPosition=f,C.indexPosition=l,C}function L(e,t,n,r,o,i,a,u,x,f){const l=5+u.length,c=i.length/l,y=[e[t+0],e[t+1]],d=[e[n],e[n+1]],h=s(f,[...y]),v=s(f,[...d]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function g(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],s=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),a=[(n[0]-e[0])/s,(n[1]-e[1])/s],u=0===r||0===s?0:Math.acos((x=a[0]*o[0]+a[1]*o[1],f=-1,l=1,Math.min(Math.max(x,f),l)));var x,f,l;return a[0]*i[0]+a[1]*i[1]>0?u:2*Math.PI-u}const b=null!==o;let m=0,w=0;if(null!==r){m=g(h,v,s(f,[...[e[r],e[r+1]]]))}if(b){w=g(v,h,s(f,[...[e[o],e[o+1]]]))}i.push(y[0],y[1],d[0],d[1],p(0,m,w)),i.push(...u),i.push(y[0],y[1],d[0],d[1],p(1,m,w)),i.push(...u),i.push(y[0],y[1],d[0],d[1],p(2,m,w)),i.push(...u),i.push(y[0],y[1],d[0],d[1],p(3,m,w)),i.push(...u),a.push(c,c+1,c+2,c+1,c+3,c+2)}function G(e,t,n,r,o){const i=2+o;let s=t;const a=e.slice(s,s+o);s+=o;const x=e[s++];let f=0;const l=new Array(x-1);for(let t=0;t<x;t++)f+=e[s++],t<x-1&&(l[t]=f);const c=e.slice(s,s+2*f),y=u.exports(c,l,2);for(let e=0;e<y.length;e++)r.push(y[e]+n.length/i);for(let e=0;e<c.length;e+=2)n.push(c[e],c[e+1],...a);return s+2*f}const O=self;O.onmessage=r=>{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesCount,r=t+n,i=new Float32Array(o.renderInstructions),s=i.length/r,a=4*s*(n+e),u=new Uint32Array(6*s),x=new Float32Array(a);let f;for(let e=0;e<i.length;e+=r)f=_(i,e,x,u,n,f);const l=Object.assign({vertexBuffer:x.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);O.postMessage(l,[x.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesCount,r=2,i=new Float32Array(o.renderInstructions);let s=0;const u=o.renderInstructionsTransform,x=[1,0,0,1,0,0];let f,l;for(a(x,u);s<i.length;){l=Array.from(i.slice(s,s+n)),s+=n,f=i[s++];for(let n=0;n<f-1;n++)L(i,s+n*r,s+(n+1)*r,n>0?s+(n-1)*r:null,n<f-2?s+(n+2)*r:null,e,t,l,0,x);s+=f*r}const c=Uint32Array.from(t),y=Float32Array.from(e),d=Object.assign({vertexBuffer:y.buffer,indexBuffer:c.buffer,renderInstructions:i.buffer},o);O.postMessage(d,[y.buffer,c.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesCount,r=new Float32Array(o.renderInstructions);let i=0;for(;i<r.length;)i=G(r,i,e,t,n);const s=Uint32Array.from(t),a=Float32Array.from(e),u=Object.assign({vertexBuffer:a.buffer,indexBuffer:s.buffer,renderInstructions:r.buffer},o);O.postMessage(u,[a.buffer,s.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+n.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}})),i.register("awmEs",(function(t,r){var n,s;e(t.exports,"Buffer",(()=>n),(e=>n=e)),e(t.exports,"INSPECT_MAX_BYTES",(()=>s),(e=>s=e));var o=i("cK8LV"),a=i("7y6mg");const h="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n=f,s=50;const l=2147483647;function u(e){if(e>l)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,f.prototype),t}function f(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return g(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|x(e,t);let n=u(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return y(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return y(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return f.from(n,t,r);const i=function(e){if(f.isBuffer(e)){const t=0|m(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||J(e.length)?u(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function g(e){return d(e),u(e<0?0:0|m(e))}function p(e){const t=e.length<0?0:0|m(e.length),r=u(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function y(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,f.prototype),n}function m(e){if(e>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|e}function x(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(i)return n?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return U(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let s,o=1,a=e.length,h=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,h/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(l(e,s)===l(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===h)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){let r=!0;for(let n=0;n<h;n++)if(l(e,s+n)!==l(t,n)){r=!1;break}if(r)return s}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(J(n))return o;e[r+o]=n}return o}function T(e,t,r,n){return K(q(t,e.length-r),e,r,n)}function L(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function R(e,t,r,n){return K($(t),e,r,n)}function A(e,t,r,n){return K(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,h;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(h=(31&t)<<6|63&r,h>127&&(s=h));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(h=(15&t)<<12|(63&r)<<6|63&n,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(h=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=B));return r}(n)}f.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?u(e):void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}(e,t,r)},f.allocUnsafe=function(e){return g(e)},f.allocUnsafeSlow=function(e){return g(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(Q(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=f.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Q(t,Uint8Array))i+t.length>n.length?(f.isBuffer(t)||(t=f.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!f.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},f.byteLength=x,f.prototype._isBuffer=!0,f.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},f.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},f.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},f.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):_.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){let e="";const t=s;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h&&(f.prototype[h]=f.prototype.inspect),f.prototype.compare=function(e,t,r,n,i){if(Q(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),h=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(h[e]!==l[e]){s=h[e],o=l[e];break}return s<o?-1:o<s?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return L(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const B=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function U(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function F(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=ee[e[n]];return i}function M(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,s){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n,i){X(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function O(e,t,r,n,i){X(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function G(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,i){return t=+t,r>>>=0,i||G(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t=+t,r>>>=0,i||G(e,0,r,8),a.write(e,t,r,n,52,8),r+8}f.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,f.prototype),n},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readBigUInt64LE=te((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||j(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),f.prototype.readBigUInt64BE=te((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||j(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},f.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readBigInt64LE=te((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||j(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),f.prototype.readBigInt64BE=te((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||j(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),f.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),a.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),a.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),a.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),a.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigUInt64LE=te((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),f.prototype.writeBigUInt64BE=te((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),f.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigInt64LE=te((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),f.prototype.writeBigInt64BE=te((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),f.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=f.isBuffer(e)?e:f.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const Z={};function V(e,t,r){Z[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function W(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function X(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new Z.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||j(t,e.length-(r+1))}(n,i,s)}function H(e,t){if("number"!=typeof e)throw new Z.ERR_INVALID_ARG_TYPE(t,"number",e)}function j(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new Z.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new Z.ERR_BUFFER_OUT_OF_BOUNDS;throw new Z.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function q(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const ee=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function te(e){return"undefined"==typeof BigInt?re:e}function re(){throw new Error("BigInt not supported")}})),i.register("cK8LV",(function(t,r){var n,i;e(t.exports,"toByteArray",(()=>n),(e=>n=e)),e(t.exports,"fromByteArray",(()=>i),(e=>i=e)),n=function(e){var t,r,n=f(e),i=n[0],s=n[1],h=new a(function(e,t,r){return 3*(t+r)/4-r}(0,i,s)),l=0,u=s>0?i-4:i;for(r=0;r<u;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],h[l++]=t>>16&255,h[l++]=t>>8&255,h[l++]=255&t;2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,h[l++]=255&t);1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,h[l++]=t>>8&255,h[l++]=255&t);return h},i=function(e){for(var t,r=e.length,n=r%3,i=[],o=16383,a=0,h=r-n;a<h;a+=o)i.push(c(e,a,a+o>h?h:a+o));1===n?(t=e[r-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=h.length;l<u;++l)s[l]=h[l],o[h.charCodeAt(l)]=l;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var n,i,o=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(s[(i=n)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63})),i.register("rnKfx",(function(t,r){e(t.exports,"default",(()=>o));var n=i("lqNjm"),s=i("6sFdl");i("3HxCM");var o=class extends s.default{constructor(e){e=e||{};var t=document.createElement("div");if(super({element:t,target:e.target}),e.target)t.className=e.className||"ol-legend";else{t.className=(e.className||"ol-legend")+" ol-unselectable ol-control"+(!1===e.collapsible?" ol-uncollapsible":" ol-collapsed");var r=document.createElement("button");r.setAttribute("type","button"),r.addEventListener("click",function(){this.toggle()}.bind(this)),t.appendChild(r),(r=document.createElement("button")).setAttribute("type","button"),r.className="ol-closebox",r.addEventListener("click",function(){this.toggle()}.bind(this)),t.appendChild(r)}this._legend=e.legend,this._legend.getCanvas().className="ol-legendImg",t.appendChild(this._legend.getCanvas()),t.appendChild(this._legend.getListElement()),!1!==e.collapsible&&!1===e.collapsed&&this.show(),this._legend.on("select",function(e){this.dispatchEvent(e)}.bind(this)),this._legend.on("refresh",function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch(e){}}.bind(this)),this._legend.on("items",function(t){t.nb?(this.element.classList.remove("ol-empty"),this.element.title=e.title||"legend"):(this.element.classList.add("ol-empty"),this.element.title=e.emptyTitle||"no legend"),this.dispatchEvent(t)}.bind(this))}getLegend(){return this._legend}setCanvas(e){if(this._onCanvas=e,this.element.style.visibility=e?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(e){}}onCanvas(){return!!this._onCanvas}_draw(e){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var t=this._legend.getCanvas(),r=this.getContext(e),i=r.canvas.height-t.height;r.save(),r.rect(0,i,t.width,t.height);var s="#fff";this._legend.getTextStyle().getBackgroundFill()&&(s=(0,n.asString)(this._legend.getTextStyle().getBackgroundFill().getColor())),r.fillStyle=r.strokeStyle=s,r.lineWidth=10,r.lineJoin="round",r.stroke(),r.clearRect(0,i,t.width,t.height),r.fill(),r.drawImage(t,0,i),r.restore()}}show(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch(e){}}hide(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch(e){}}collapse(e){!1===e?this.show():this.hide()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}toggle(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch(e){}}}})),i.register("3HxCM",(function(t,r){e(t.exports,"default",(()=>E));var n=i("fnScq"),s=i("ejLRd"),o=i("31ZqB"),a=i("lW8xZ"),h=i("jtzGF"),l=i("lqNjm"),u=i("iGyOD"),f=i("j2K3b"),c=i("hvEnP"),d=i("cgPpQ"),g=i("jZquI"),p=i("iQyfo"),y=i("kuKBR"),m=i("2zf1Y"),x=i("bJF7J"),_=i("3xROf"),v=class extends n.default{constructor(e){super(),e=e||{},this._items=new(0,o.default);var t,r=[];this._items.on("add",function(e){r.push({item:e.element,on:e.element.on("change",function(){this.refresh()}.bind(this))}),t&&(clearTimeout(t),t=null),t=setTimeout(function(){this.refresh()}.bind(this),0)}.bind(this)),this._items.on("remove",function(e){for(var n=0;n<r;n++)if(e.element===r[n].item){(0,s.unByKey)(r[n].on),r.splice(n,1);break}t&&(clearTimeout(t),t=null),t=setTimeout(function(){this.refresh()}.bind(this),0)}.bind(this)),this._listElement=p.default.create("UL",{className:"ol-legend"}),this._canvas=document.createElement("canvas"),this.setLayer(e.layer),this.set("maxWidth",e.maxWidth,!0),this.set("size",e.size||[40,25],!0),this.set("margin",0===e.margin?0:e.margin||10,!0),this._textStyle=e.textStyle||new(0,y.default)({font:"16px sans-serif",fill:new(0,m.default)({color:"#333"}),backgroundFill:new(0,m.default)({color:"rgba(255,255,255,.8)"})}),this._title=new(0,x.default)({title:e.title||"",className:"ol-title"}),e.titleStyle?this._titleStyle=e.titleStyle:(this._titleStyle=this._textStyle.clone(),this._titleStyle.setFont("bold "+this._titleStyle.getFont())),this.setStyle(e.style),e.items instanceof Array&&e.items.forEach(function(e){this.addItem(e)}.bind(this)),this.refresh()}static getLegendImage(e,t,r){void 0===(e=e||{}).margin&&(e.margin=10);var n=e.size||[40,25];e.width&&(n[0]=e.width),e.heigth&&(n[1]=e.heigth),e.onload=e.onload||function(){setTimeout((function(){v.getLegendImage(e,t,r)}),100)};var i=n[0]+2*e.margin,s=e.lineHeight||n[1]+2*e.margin,o=e.pixelratio||a.DEVICE_PIXEL_RATIO;t||(r=0,(t=document.createElement("canvas")).width=i*o,t.height=s*o);var l=t.getContext("2d");l.save();var p,y=(0,h.toContext)(l,{pixelRatio:o}),m=e.typeGeom,x=e.feature;!x&&m&&(x=/Point/.test(m)?new(0,u.default)(new(0,f.default)([0,0])):/LineString/.test(m)?new(0,u.default)(new(0,c.default)([0,0])):new(0,u.default)(new(0,d.default)([[0,0]])),e.properties&&x.setProperties(e.properties)),x?("function"==typeof(p=x.getStyle())&&(p=p(x)),p||(p="function"==typeof e.style?e.style(x):e.style||[]),m=x.getGeometry().getType()):p=[],p instanceof Array||(p=[p]);var _,E,b=i/2,w=s/2,T=n[0]/2,L=n[1]/2;if("Point"===m){var R=null;for(_=0;E=p[_];_++){var A=E.getImage();if(A){var S=A.getPhoto?A.getPhoto():A.getImage();if(S&&S instanceof HTMLImageElement&&!S.naturalWidth&&("function"==typeof e.onload&&S.addEventListener("load",(function(){setTimeout((function(){e.onload()}),100)})),A.load()),A.getAnchor){var I=A.getAnchor();if(I){var B=A.getSize(),C=I[0]-B[0],U=I[1]-B[1];R?(0,g.extend)(R,[C,U,C+B[0],U+B[1]]):R=[C,U,C+B[0],U+B[1]]}}}}R&&(b+=(R[2]+R[0])/2,w+=(R[3]+R[1])/2)}for(w+=r||0,_=0;E=p[_];_++){var F;switch(y.setStyle(E),l.save(),m){case f.default:case"Point":case"MultiPoint":F=new(0,f.default)([b,w]);break;case c.default:case"LineString":case"MultiLineString":l.rect(e.margin*o,0,n[0]*o,t.height),l.clip(),F=new(0,c.default)([[b-T,w],[b+T,w]]);break;case d.default:case"Polygon":case"MultiPolygon":F=new(0,d.default)([[[b-T,w-L],[b+T,w-L],[b+T,w+L],[b-T,w+L],[b-T,w-L]]])}E.getGeometryFunction()&&(F=E.getGeometryFunction()(new(0,u.default)(F))),y.drawGeometry(F),l.restore()}return l.restore(),t}setTitle(e){this._title.setTitle(e),this.refresh()}getTitle(){return this._title.get("title")}setLayer(e){this._layerListener&&(0,s.unByKey)(this._layerListener),this._layer=e,this._layerListener=e?e.on("change:visible",function(){this.refresh()}.bind(this)):null}getTextStyle(){return this._textStyle}set(e,t,r){super.set(e,t,r),r||this.refresh()}getListElement(){return this._listElement}getCanvas(){return this._canvas}setStyle(e){this._style=e,this.refresh()}addItem(e){e instanceof v?(this._items.push(e),e.on("refresh",function(){this.refresh(!0)}.bind(this))):e instanceof x.default||e instanceof _.default?this._items.push(e):this._items.push(new(0,x.default)(e))}removeItem(e){this._items.remove(e)}removeItemAt(e){this._items.removeAt(e)}getItems(){return this._items}_drawText(e,t,r,n){e.save(),e.scale(a.DEVICE_PIXEL_RATIO,a.DEVICE_PIXEL_RATIO);var i=(t=t||"").split("\n");1===i.length?e.fillText(t,r,n):(e.textBaseline="bottom",e.fillText(i[0],r,n),e.textBaseline="top",e.fillText(i[1],r,n)),e.restore()}_measureText(e,t){var r=(t||"").split("\n");if(1===r.length)return e.measureText(t);var n=e.measureText(r[0]),i=e.measureText(r[1]);return{width:Math.max(n.width,i.width),height:n.height+i.height}}refresh(e){var t=this._listElement;if(t){t.innerHTML="";var r=this.get("margin"),n=this.get("size")[0]+2*r,i=this.get("lineHeight")||this.get("size")[1]+2*r,s=this.getCanvas(),o=s.getContext("2d");o.textAlign="left",o.textBaseline="middle";var h=a.DEVICE_PIXEL_RATIO,u=Math.min(this.getWidth(),this.get("maxWidth")||1/0),f=this.getHeight();s.width=u*h,s.height=f*h,s.style.height=f+"px",o.textBaseline="middle",o.fillStyle=(0,l.asString)(this._textStyle.getFill().getColor()),this.getTitle()&&(t.appendChild(this._title.getElement([n,i],function(e){this.dispatchEvent({type:"select",index:-1,symbol:e,item:this._title})}.bind(this))),o.font=this._titleStyle.getFont(),o.textAlign="center",this._drawText(o,this.getTitle(),s.width/h/2,i/2));var c=0;this.getTitle()&&(c=i);var d=0;this._items.forEach(function(e,a){if(e instanceof v){if((!e._layer||e._layer.getVisible())&&e.getCanvas().height){o.drawImage(e.getCanvas(),0,c*h);for(var l=e._listElement.querySelectorAll("li"),u=0;u<l.length;u++){var f=l[u].cloneNode();f.innerHTML=l[u].innerHTML,t.appendChild(f),d++}c+=e.getHeight()}}else{if(e instanceof _.default){e.get("title")&&(t.appendChild(this._title.getElement([n,i],function(e){this.dispatchEvent({type:"select",index:-1,symbol:e,item:this._title})}.bind(this))),o.font=e.get("textStyle")?e.get("textStyle").getFont():this._titleStyle.getFont(),/\bcenter\b/.test(e.get("className"))?(o.textAlign="center",this._drawText(o,e.get("title"),s.width/h/2,c+i/2)):this._drawText(o,e.get("title"),r,c+i/2),c+=i);var g=e.getImage();try{o.drawImage(g,0,0,g.naturalWidth,g.naturalHeight,0,c*h,e.getWidth()*h,e.getHeight()*h)}catch(e){}c+=e.getHeight()}else{var p=e.getProperties(),y=p.height||i;o.textAlign="left",p.feature||p.typeGeom?(s=this.getLegendImage(p,s,c),o.font=e.get("textStyle")?e.get("textStyle").getFont():this._textStyle.getFont(),this._drawText(o,e.get("title"),n+r,c+y/2)):(o.font=e.get("textStyle")?e.get("textStyle").getFont():this._titleStyle.getFont(),/\bcenter\b/.test(p.className)?(o.textAlign="center",this._drawText(o,e.get("title"),s.width/h/2,c+y/2)):this._drawText(o,e.get("title"),r,c+y/2)),c+=y}t.appendChild(e.getElement([n,i],function(t){this.dispatchEvent({type:"select",index:a,symbol:t,item:e})}.bind(this))),d++}}.bind(this)),this.set("items",d,!0),this.dispatchEvent({type:"items",nb:d}),e||this.dispatchEvent({type:"refresh",width:n,height:(this._items.length+1)*i})}}getHeight(){var e=this.get("margin"),t=this.get("lineHeight")||this.get("size")[1]+2*e,r=this.getTitle()?t:0;return this._items.forEach((function(n){n instanceof v?n._layer&&!n._layer.getVisible()||(r+=n.getHeight()):n instanceof _.default?(n.get("title")&&(r+=t),r+=n.getHeight()):n.get("height")?r+=n.get("height")+2*e:r+=t})),r}getWidth(){var e=this.getCanvas().getContext("2d"),t=this.get("margin"),r=this.get("size")[0]+2*t;e.font=this._titleStyle.getFont();var n=this._measureText(e,this.getTitle("title")).width;return this._items.forEach(function(t){t instanceof v?t._layer&&!t._layer.getVisible()||(n=Math.max(n,t.getWidth())):t instanceof _.default?(n=Math.max(n,t.getWidth()),t.get("title")&&(e.font=t.get("textStyle")?t.get("textStyle").getFont():this._titleStyle.getFont(),n=Math.max(n,this._measureText(e,t.get("title")).width))):t.get("feature")||t.get("typeGeom")?(e.font=t.get("textStyle")?t.get("textStyle").getFont():this._textStyle.getFont(),n=Math.max(n,this._measureText(e,t.get("title")).width+r)):(e.font=t.get("textStyle")?t.get("textStyle").getFont():this._titleStyle.getFont(),n=Math.max(n,this._measureText(e,t.get("title")).width))}.bind(this)),n+2*t}getLegendImage(e,t,r){e=e||{};var n=this.get("size");return v.getLegendImage({className:e.className,feature:e.feature,typeGeom:e.typeGeom,style:e.style||this._style,properties:e.properties,margin:e.margin||this.get("margin"),size:[e.width||n[0],e.height||n[1]],lineHeight:e.lineHeight||this.get("lineHeight"),onload:function(){this.refresh()}.bind(this)},t,r)}},E=v})),i.register("jtzGF",(function(t,r){e(t.exports,"toContext",(()=>a));var n=i("htGzg"),s=i("lW8xZ"),o=i("14PDX");i("713Fw"),i("gzr8q");function a(e,t){const r=e.canvas,i=(t=t||{}).pixelRatio||s.DEVICE_PIXEL_RATIO,a=t.size;a&&(r.width=a[0]*i,r.height=a[1]*i,r.style.width=a[0]+"px",r.style.height=a[1]+"px");const h=[0,0,r.width,r.height],l=(0,o.scale)((0,o.create)(),i,i);return new(0,n.default)(e,i,h,l,0)}})),i.register("bJF7J",(function(t,r){e(t.exports,"default",(()=>o));var n=i("fnScq"),s=i("iQyfo"),o=class extends n.default{constructor(e){super(e=e||{}),e.feature&&this.set("feature",e.feature.clone()),this.setWidth(e.width),this.setHeight(e.height)}setTitle(e){this.set("title",e||""),this.changed()}setWidth(e){this.set("width",e||null),this.changed()}setHeight(e){this.set("heigth",e||null),this.changed()}getElement(e,t){this.get("width")&&(e[0]=this.get("width")),this.get("height")&&(e[1]=this.get("height"));var r=s.default.create("LI",{className:this.get("className"),click:function(e){t(!1),e.stopPropagation()},style:{height:e[1]+"px"},"aria-label":this.get("title")});return s.default.create("DIV",{click:function(e){t(!0),e.stopPropagation()},style:{width:e[0]+"px",height:e[1]+"px"},parent:r}),r}}})),i.register("3xROf",(function(t,r){e(t.exports,"default",(()=>o));var n=i("fnScq"),s=i("iQyfo"),o=class extends n.default{constructor(e){super(e=e||{}),this.set("width",e.width),this._img=e.img||new Image,this._img.onload=function(){this.changed()}.bind(this),e.img||(this._img.src=e.src)}setTitle(e){this.set("title",e||""),this.changed()}setWidth(e){this.set("width",e||null),this.changed()}getWidth(){return this._img.naturalWidth?this.get("width")||this._img.naturalWidth:0}getHeight(){return this._img.naturalWidth?this.get("width")?this.get("width")*this._img.naturalHeight/this._img.naturalWidth:this._img.naturalHeight||0:0}getImage(){return this._img}getElement(e,t){this.get("width")&&(e[0]=this.get("width")),this.get("height")&&(e[1]=this.get("height"));var r=s.default.create("LI",{className:this.get("className"),click:function(e){t(!1),e.stopPropagation()},style:{height:this.getHeight()+"px"},"aria-label":this.get("title")});return s.default.create("DIV",{click:function(e){t(!0),e.stopPropagation()},style:{width:this.getWidth()+"px",height:this.getHeight()+"px"},parent:r}),r}}}));